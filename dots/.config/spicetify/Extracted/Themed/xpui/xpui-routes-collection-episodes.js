"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[1289],{93076:(e,t,r)=>{r.d(t,{$:()=>s,Q:()=>o});r(59538),r(79611);var a=r(59496),n=r(11880),i=r(66524),l=r(4637),o=(0,a.createContext)({setSortState:function(){throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:i.oT.ADDED_AT}),s=a.memo((function(e){var t=e.uri,r=e.children,a=e.defaultSortOption;return(0,l.jsx)(n.r,{uri:t,defaultState:a,sortContext:o,children:r})}))},66524:(e,t,r)=>{r.d(t,{Aq:()=>D,Bf:()=>N,EY:()=>m,G5:()=>O,JV:()=>j,MY:()=>g,Ru:()=>T,ZP:()=>P,a6:()=>_,aY:()=>R,e3:()=>C,ei:()=>f,o$:()=>L,oT:()=>E,pT:()=>x,rJ:()=>M,u3:()=>I,w0:()=>v});var a,n,i,l,o,s,c=r(45389),u=(r(4302),r(66469),r(17249)),A=r(54828),d=r(16204),E=function(e){return e.SHOW_ALPHABETICAL="SHOW_ALPHABETICAL",e.BOOK_ALPHABETICAL="BOOK_ALPHABETICAL",e.EPISODE_ALPHABETICAL="EPISODE_ALPHABETICAL",e.PLAYLIST_ALPHABETICAL="PLAYLIST_ALPHABETICAL",e.ALBUM_ALPHABETICAL="ALBUM_ALPHABETICAL",e.ADDED_AT="ADDED_AT",e.CREATOR_NAME="CREATOR_NAME",e.CREATOR_NAME_ALPHABETICAL="CREATOR_NAME_ALPHABETICAL",e.ALBUM_CREATOR_NAME="ALBUM_CREATOR_NAME",e.RECENTLY_PLAYED="RECENTLY_PLAYED",e.MOST_RELEVANT="MOST_RELEVANT",e.CUSTOM_ORDER="CUSTOM_ORDER",e}({}),f={"show-alphabetical":E.SHOW_ALPHABETICAL,"book-alphabetical":E.BOOK_ALPHABETICAL,"episode-alphabetical":E.EPISODE_ALPHABETICAL,"playlist-alphabetical":E.PLAYLIST_ALPHABETICAL,"album-alphabetical":E.ALBUM_ALPHABETICAL,"recently-added":E.ADDED_AT,"creator-name":E.CREATOR_NAME,"creator-name-alphabetical":E.CREATOR_NAME_ALPHABETICAL,"album-creator-name":E.ALBUM_CREATOR_NAME,"recently-played":E.RECENTLY_PLAYED,"playlist-most-relevant":E.MOST_RELEVANT,"playlist-custom-order":E.CUSTOM_ORDER},g=(a={},(0,c.Z)(a,E.RECENTLY_PLAYED,{key:"recently-played",get value(){return u.ag.get("collection.sort.recently-played")}}),(0,c.Z)(a,E.ADDED_AT,{key:"recently-added",get value(){return u.ag.get("collection.sort.recently-added")}}),(0,c.Z)(a,E.SHOW_ALPHABETICAL,{key:"show-alphabetical",get value(){return u.ag.get("collection.sort.alphabetical")}}),(0,c.Z)(a,E.BOOK_ALPHABETICAL,{key:"book-alphabetical",get value(){return u.ag.get("collection.sort.alphabetical")}}),(0,c.Z)(a,E.EPISODE_ALPHABETICAL,{key:"episode-alphabetical",get value(){return u.ag.get("collection.sort.alphabetical")}}),(0,c.Z)(a,E.PLAYLIST_ALPHABETICAL,{key:"playlist-alphabetical",get value(){return u.ag.get("collection.sort.alphabetical")}}),(0,c.Z)(a,E.ALBUM_CREATOR_NAME,{key:"album-creator-name",get value(){return u.ag.get("collection.sort.creator")}}),(0,c.Z)(a,E.CREATOR_NAME,{key:"creator-name",get value(){return u.ag.get("collection.sort.creator")}}),(0,c.Z)(a,E.CREATOR_NAME_ALPHABETICAL,{key:"creator-name-alphabetical",get value(){return u.ag.get("collection.sort.alphabetical")}}),(0,c.Z)(a,E.ALBUM_ALPHABETICAL,{key:"album-alphabetical",get value(){return u.ag.get("collection.sort.alphabetical")}}),(0,c.Z)(a,E.MOST_RELEVANT,{key:"playlist-most-relevant",get value(){return u.ag.get("collection.sort.most-relevant")}}),(0,c.Z)(a,E.CUSTOM_ORDER,{key:"playlist-custom-order",get value(){return u.ag.get("collection.sort.custom-order")}}),a),T=[E.ADDED_AT,E.ALBUM_ALPHABETICAL,E.CREATOR_NAME],p=(n={},(0,c.Z)(n,E.ADDED_AT,{field:A.lY.ADDED_AT,order:A.As.DESC}),(0,c.Z)(n,E.ALBUM_ALPHABETICAL,{field:A.lY.NAME,order:A.As.ASC}),(0,c.Z)(n,E.CREATOR_NAME,{field:A.lY.ARTIST_NAME,order:A.As.ASC}),n);var D=function(e){if(function(e){return T.includes(e)}(e))return p[e]},L=[E.ADDED_AT,E.CREATOR_NAME_ALPHABETICAL],y=(i={},(0,c.Z)(i,E.ADDED_AT,{field:A.hx.ADDED_AT,order:A.As.DESC}),(0,c.Z)(i,E.CREATOR_NAME_ALPHABETICAL,{field:A.hx.NAME,order:A.As.ASC}),i);var C=function(e){if(function(e){return L.includes(e)}(e))return y[e]},_=[E.ADDED_AT,E.SHOW_ALPHABETICAL],h=(l={},(0,c.Z)(l,E.ADDED_AT,{field:A.aW.ADDED_AT,order:A.As.DESC}),(0,c.Z)(l,E.SHOW_ALPHABETICAL,{field:A.aW.NAME,order:A.As.ASC}),l);var m=function(e){if(function(e){return _.includes(e)}(e))return h[e]},P=[E.ADDED_AT,E.BOOK_ALPHABETICAL],b=(o={},(0,c.Z)(o,E.ADDED_AT,A.VN.ADDED_AT),(0,c.Z)(o,E.BOOK_ALPHABETICAL,A.VN.NAME),o);var O=function(e){if(function(e){return P.includes(e)}(e))return b[e]},v=[E.MOST_RELEVANT,E.RECENTLY_PLAYED,E.ADDED_AT,E.PLAYLIST_ALPHABETICAL,E.CUSTOM_ORDER],S=(s={},(0,c.Z)(s,E.ADDED_AT,{field:d.bD.ADDED_AT,order:d.As.DESC}),(0,c.Z)(s,E.RECENTLY_PLAYED,{field:d.bD.RECENTLY_PLAYED,order:d.As.ASC}),(0,c.Z)(s,E.PLAYLIST_ALPHABETICAL,{field:d.bD.NAME,order:d.As.ASC}),(0,c.Z)(s,E.MOST_RELEVANT,{field:d.bD.RELEVANCE,order:d.As.DESC}),(0,c.Z)(s,E.CUSTOM_ORDER,void 0),s);var x=function(e){if(function(e){return v.includes(e)}(e))return S[e]},R=E.ADDED_AT,I=E.ADDED_AT,M=E.ADDED_AT,N=E.MOST_RELEVANT,j=E.ADDED_AT},13746:(e,t,r)=>{r.d(t,{h:()=>E});var a=r(59496),n=r(92885),i=r(24898),l=r(20188),o=(r(162),r(4159)),s=r(93076),c=r(66524),u=r(4637),A=a.memo((function(e){var t=e.sortOptions,r=e.onSort,n=(0,a.useContext)(s.Q),i=n.sortState,l=n.setSortState,A=(0,a.useCallback)((function(e){var t=c.ei[e];null==r||r(t),l(t)}),[r,l]),d=t.map((function(e){return c.MY[e]})),E=c.MY[i];return(0,u.jsx)(o.A,{options:d,onSelect:A,selected:E})}));const d="collection-searchBar-searchBar";var E=a.memo((function(e){var t=e.canSort,r=e.canFilter,o=e.filterPlaceholder,s=e.sortOptions,c=(0,l.fU)(n.createDesktopSearchBarEventFactory,{}),E=c.spec,f=c.logger,g=(0,a.useCallback)((function(){f.logInteraction(E.filterFieldFactory().keyStrokeFilter())}),[f,E]),T=(0,a.useCallback)((function(){f.logInteraction(E.filterFieldFactory().hitClearFilter())}),[f,E]),p=(0,a.useCallback)((function(){f.logInteraction(E.sortButtonFactory().hitSort())}),[f,E]);return(0,u.jsxs)("div",{className:d,children:[r?(0,u.jsx)(a.Suspense,{fallback:null,children:(0,u.jsx)(i.K,{placeholder:o,onFilter:g,onClear:T})}):null,t?(0,u.jsx)(A,{sortOptions:s,onSort:p}):null]})}))},23229:(e,t,r)=>{r.d(t,{$:()=>a.$,Q:()=>a.Q});var a=r(93076)},87234:(e,t,r)=>{r.d(t,{Aq:()=>a.Aq,Bf:()=>a.Bf,EY:()=>a.EY,G5:()=>a.G5,JV:()=>a.JV,Ru:()=>a.Ru,ZP:()=>a.ZP,a6:()=>a.a6,aY:()=>a.aY,e3:()=>a.e3,o$:()=>a.o$,oT:()=>a.oT,pT:()=>a.pT,rJ:()=>a.rJ,u3:()=>a.u3,w0:()=>a.w0});var a=r(66524)},87915:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ce});var a,n,i=r(45389),l=(r(62780),r(22369),r(59496)),o=r(18113),s=r(17249),c=r(77999),u=r(68833),A=r(60377),d=r(50200),E=r(23229),f=r(87234),g=r(76956),T=r(79105),p=r(62179),D=r(1003),L=r(24122),y=(r(30246),r(84737)),C=r(64371),_=r(13746),h=r(19873),m=(r(4302),r(66469),r(90511),r(162),r(69109),r(54828)),P=(a={},(0,i.Z)(a,m.yW.NAME,A.hI.TITLE),(0,i.Z)(a,m.yW.SHOW_NAME,A.hI.SHOW),(0,i.Z)(a,m.yW.ADDED_AT,A.hI.ADDED_AT),a),b=[f.oT.ADDED_AT,f.oT.CREATOR_NAME,f.oT.EPISODE_ALPHABETICAL],O=(n={},(0,i.Z)(n,f.oT.ADDED_AT,{field:m.yW.ADDED_AT,order:m.As.DESC}),(0,i.Z)(n,f.oT.CREATOR_NAME,{field:m.yW.SHOW_NAME,order:m.As.ASC}),(0,i.Z)(n,f.oT.EPISODE_ALPHABETICAL,{field:m.yW.NAME,order:m.As.ASC}),n);var v=function(e){if(function(e){return b.includes(e)}(e))return O[e]},S=function(e){if(b.includes(e)){var t=v(e);if(null!=t&&t.field){var r=P[t.field];if(r)return A.Vd[r].map((function(e){return t.order?"".concat(e," ").concat(t.order):e})).join(",")}}};const x="m9xwK71Ieq9cySIq4FAP",R="PkEMTu8sGqJeQWJ7HvEs",I="DbH2KkRA8yVWWpXGaNSW";var M=r(4637),N=function(e){var t=e.metadata,r=e.canSort,a=e.backgroundColor,n=e.isPlaying,i=e.isOnline,l=e.togglePlay,o=(0,h.y)(),c=t.uri,u=t.name,A=t.totalLength>0;return(0,M.jsx)(y.o,{backgroundColor:a,children:(0,M.jsxs)(y.F,{children:[A&&(0,M.jsx)(C.$,{onClick:function(){return l()},isPlaying:n,size:"lg",uri:c,disabled:!i,ariaPlayLabel:s.ag.get("playlist.a11y.play",u),ariaPauseLabel:s.ag.get("playlist.a11y.pause",u)}),r&&(0,M.jsx)("div",{className:I,children:(0,M.jsx)(_.h,{canSort:o.getCapabilities().canSort,canFilter:o.getCapabilities().canFilter,filterPlaceholder:s.ag.get("playlist.search_in_playlist"),sortOptions:b})})]})})},j=r(83014),k=r(8850),B=r(39130),H=r(10995),Z=r.n(H),w=(r(72649),r(27535),r(95675),r(61235),r(7845),r(29543),r(70969),r(66715),r(30479),r(75341),r(67262)),U=r(78142),Y=r(45883),W=(r(69724),r(22355)),V=r(47924),F=r(35589),K=r(97427);const $="p6DKqBcwmVtxmHt8ju43",G="_OxEpxzAgJiTENfolVUN";var q=r(96692),J=r(90775),Q=r(54691),z=r(6336),X=r(90902),ee=r(9271),te=r(19968),re=r(83474),ae=r(1962),ne=r(35742),ie=r(19174),le={small:64,standard:300,large:640,xlarge:1024},oe=l.memo((function(e){var t,r,a,n,i,o,s,c=e.index,u=e.contextUri,A=e.episode,E=e.onRemove,f=e.usePlayContextItem,T=(0,l.useRef)(A.duration.milliseconds-A.timeLeft.milliseconds),p=A.uri,L=(0,l.useState)(0===A.timeLeft.milliseconds),y=(0,B.Z)(L,2),C=y[0],_=y[1],m=(0,l.useContext)(d.fo).filter,P=(0,q.O)(),b=(0,Y.jh)(),O=(0,J.o)(),v=(0,h.Z)(p,!0),S=(0,B.Z)(v,1)[0],x=(0,ie.k)(A.uri,A.isPlayable),R=(0,g.k)(),I=(0,ee.Y)((function(e){var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===A.uri){var r,a=null!==(r=(0,te.k)(e))&&void 0!==r?r:0;return T.current=a,a}return 0})),N=f({uri:p,index:c}),j=N.isPlaying,k=N.isActive,H=N.togglePlay,Z=(0,D.n)({uri:p,pages:[{items:[{type:re.p.EPISODE,uri:p,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),w=Z.isPlaying,G=Z.isActive,oe=Z.togglePlay;(0,l.useEffect)((function(){S||E()}),[S,E]),(0,l.useEffect)((function(){j||A.duration.milliseconds<=T.current&&_(!0)}),[j,A.duration.milliseconds]);var se=(0,l.useCallback)((function(e){e||(T.current=0),_(e)}),[]),ce=(0,l.useCallback)((function(){O({type:"click",targetUri:p,intent:"navigate"})}),[p,O]),ue=(0,l.useCallback)((function(){R?(O({type:"click",intent:j?"pause":"play"}),H()):(O({type:"click",intent:w?"pause":"play"}),oe())}),[R,j,w,O,H,oe]),Ae=(0,l.useCallback)((function(e){return(0,M.jsx)(ne.o,{searchWords:[m],textToHighlight:e})}),[m]),de=null!==(t=null===(r=A.podcastSubscription)||void 0===r?void 0:r.isPaywalled)&&void 0!==t&&t,Ee=null!==(a=null===(n=A.podcastSubscription)||void 0===n?void 0:n.isUserSubscribed)&&void 0!==a&&a,fe=(0,ae.r)({isExplicit:A.isExplicit,isMOGEFRestricted:A.is19PlusOnly,isPaywalled:de}).badges,ge=!1;return(k||!R&&G)&&(ge=!0),S?(0,M.jsxs)(U.ZP,{value:"row",index:c,children:[(0,M.jsx)("hr",{className:$,"aria-hidden":!0}),(0,M.jsx)(Q._,{menu:(0,M.jsx)(W.k,{uri:p,showUri:null===(i=A.show)||void 0===i?void 0:i.uri,isPlayed:C,onMarkAsPlayed:se}),children:(0,M.jsx)(V.X,{requestId:A.requestId,index:c,uri:p,uid:p,size:b,images:A.images.map((function(e){return{url:e.url,width:e.width||(e.label?le[e.label]:null),height:e.height||(e.label?le[e.label]:null)}})),isPaywalled:de,isUserSubscribed:Ee,name:A.name,highlightText:Ae,showName:null===(o=A.show)||void 0===o?void 0:o.name,showUri:null===(s=A.show)||void 0===s?void 0:s.uri,description:A.description,isPlayable:x,fullyPlayed:C,durationMs:A.duration.milliseconds,releaseDate:A.release.date||"",resumePositionMs:T.current,handleDragStart:function(e){if(e.target===e.currentTarget){var t="".concat(A.name);A.show&&(t+=" • ".concat(A.show.name)),P(e,[p],t,u)}},handlePlaybackClick:ue,handleClick:ce,isCurrentlyPlaying:ge,isPlaying:R?j:w,position:ge?I:void 0,episodeSharingInfo:null,onMarkAsPlayed:se,badges:(0,M.jsxs)(M.Fragment,{children:[fe.explicit&&(0,M.jsx)(z.N,{}),fe.paid&&(0,M.jsx)(K.g,{}),fe.nineteen&&(0,M.jsx)(X.X,{size:16})]}),playButtonWrapper:function(e){var t;return(0,M.jsx)(F.l,{enabled:de&&!Ee,showUri:(null===(t=A.show)||void 0===t?void 0:t.uri)||void 0,children:e})}})})]}):null}));function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ue=l.memo((function(e){var t,r=e.contextUri,a=e.usePlayContextItem,n=(0,l.useContext)(p.H),o=(0,l.useContext)(E.Q).sortState,s=(0,l.useState)({totalLength:0,unfilteredTotalLength:0,offset:0,items:[],limit:50}),c=(0,B.Z)(s,2),u=c[0],A=c[1],f=(0,l.useRef)(!1),g=(0,l.useRef)(0),T=(0,l.useRef)(0),D=(0,l.useContext)(d.fo).filter,L=(0,l.useCallback)((function(){T.current++}),[]),y=(0,Y.Db)((t={},(0,i.Z)(t,Y.Uo.MEDIUM,0),(0,i.Z)(t,Y.Uo.LARGE,600),t)),C=y.ref,_=y.breakpoint,h=(0,l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){var e=(0,k.Z)(Z().mark((function e(t){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getEpisodes({offset:t-T.current,limit:50,sort:v(o),filter:D});case 2:return r=e.sent,T.current=0,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=g.current;null!==r&&(f.current||(f.current=!0,t(Number(r)).then((function(t){A((function(a){var n=Number(t.offset)+t.items.length,i=e?[]:(0,j.Z)(a.items);return i.splice.apply(i,[Number(r),t.items.length].concat((0,j.Z)(t.items))),g.current=n<t.totalLength?n:null,ce(ce({},t),{},{items:i})})),f.current=!1}))))}),[D,n,o]);return(0,l.useEffect)((function(){g.current=0,h(!0)}),[h]),(0,M.jsx)(Y.ZU.Provider,{value:_,children:(0,M.jsx)(U.ZP,{value:"track-list",children:(0,M.jsx)("div",{ref:C,children:(0,M.jsx)(w.C,{onReachBottom:h,triggerOnInitialLoad:!0,children:u.items.map((function(e,t){return(0,M.jsx)("div",{className:G,children:(0,M.jsx)(oe,{index:t,episode:e,contextUri:r,onRemove:L,usePlayContextItem:a},"".concat(e.uri,"/").concat(t))},"".concat(t).concat(e.uri))}))})})})})})),Ae=r(10506),de=r(23006),Ee=r(35833),fe=r(61996),ge=r(34229),Te=r(50522),pe=function(e){var t=e.metadata,r=e.backgroundColor,a=e.isPlaying,n=e.isOnline,i=e.togglePlay,o=t.uri,c=t.name,u=t.images,A=t.totalLength,d=t.owner,E=(0,l.useMemo)((function(){return{id:d.username,uri:d.uri,name:d.username,displayName:d.displayName||void 0,images:d.images||[]}}),[d]);return(0,M.jsxs)(de.gF,{backgroundColor:r,children:[(0,M.jsxs)(Ee.W,{children:[(0,M.jsx)(C.$,{size:"md",onClick:function(){return i()},isPlaying:a,uri:o,disabled:!n,ariaPlayLabel:s.ag.get("playlist.a11y.play",c),ariaPauseLabel:s.ag.get("playlist.a11y.pause",c)}),(0,M.jsx)(fe.i,{text:c})]}),(0,M.jsx)(de.Oz,{images:u,name:c,shape:ge.K.ROUNDED_CORNERS,renderImage:function(){return(0,M.jsx)(Te.$,{})}}),(0,M.jsxs)(de.sP,{children:[(0,M.jsx)(Ae.D,{variant:"mestoBold",children:s.ag.get("playlist")}),(0,M.jsx)(de.xd,{canEdit:!1,onClick:function(){},children:c}),(0,M.jsx)(de.QS,{creators:[E],totalEpisodes:A})]})]})},De=r(60817),Le=r(35883),ye=function(e){var t,r=e.metadata,a=e.canSort,n=(0,T.Y5)("#006450"),u=(0,g.k)(),f=(0,l.useContext)(E.Q).sortState,p=(0,l.useContext)(d.fo).filter,y=(0,D.n)({uri:r.uri,metadata:(t={},(0,i.Z)(t,L.sb.SORTING_CRITERIA,S(f)),(0,i.Z)(t,L.sb.FILTERING_PREDICATE,(0,A.aK)(p)),t)},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),C=y.isPlaying,_=y.togglePlay,h=y.usePlayContextItem;return(0,M.jsxs)("section",{className:R,"data-testid":"your-episodes-page",children:[(0,M.jsx)(De.$,{children:s.ag.get("sidebar.your_episodes")}),(0,M.jsx)(pe,{metadata:r,backgroundColor:n,isPlaying:C,isOnline:u,togglePlay:_}),(0,M.jsxs)("div",{className:x,children:[(0,M.jsx)(N,{metadata:r,backgroundColor:n,isPlaying:C,isOnline:u,togglePlay:_,canSort:a}),(0,M.jsx)("div",{className:"contentSpacing",children:r.totalLength>0?(0,M.jsx)(ue,{contextUri:r.uri,usePlayContextItem:h}):(0,M.jsx)(c.u,{message:s.ag.get("collection.empty-page.episodes-subtitle"),title:s.ag.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:s.ag.get("collection.empty-page.shows-cta"),renderInline:!0,children:(0,M.jsx)(o.G,{"aria-hidden":"true"})})})]})]})};const Ce=(0,l.memo)((function(){var e=(0,l.useContext)(p.H).getCapabilities(),t=(0,Le.x)();return t?(0,M.jsx)(E.$,{uri:t.uri,defaultSortOption:f.oT.ADDED_AT,children:(0,M.jsx)(d.hz,{uri:t.uri,children:(0,M.jsx)(ye,{metadata:t,canSort:e.canSortTracksAndEpisodes&&t.totalLength>0})})}):(0,M.jsx)(u.h,{hasError:!1,errorMessage:s.ag.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}))}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map