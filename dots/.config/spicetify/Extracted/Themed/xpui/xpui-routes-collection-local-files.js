"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7379],{19382:(e,t,r)=>{r.d(t,{l:()=>S});var n,l,i=r(83014),a=(r(27535),r(62780),r(22369),r(162),r(59496)),s=r(17249),o=r(4159),u=r(45389),c=(r(4302),r(66469),r(56394)),d=r(36841),g={"custom-order":c.HI,title:{column:d.Q.TITLE,order:d.k.ASC},artist:{column:d.Q.TITLE,order:d.k.SECONDARY_ASC},"added-by":{column:d.Q.ADDED_BY,order:d.k.ASC},"added-at":{column:d.Q.ADDED_AT,order:d.k.ASC},duration:{column:d.Q.DURATION,order:d.k.ASC},album:{column:d.Q.ALBUM,order:d.k.ASC},"album-or-podcast":{column:d.Q.ALBUM_OR_PODCAST,order:d.k.ASC},"album-or-show":{column:d.Q.ALBUM_OR_SHOW,order:d.k.ASC}},m={title:d.Q.TITLE,artist:d.Q.TITLE,"added-by":d.Q.ADDED_BY,"added-at":d.Q.ADDED_AT,duration:d.Q.DURATION,album:d.Q.ALBUM,"album-or-podcast":d.Q.ALBUM_OR_PODCAST,"album-or-show":d.Q.ALBUM_OR_SHOW},x=(n={},(0,u.Z)(n,d.k.NONE,d.k.NONE),(0,u.Z)(n,d.k.ASC,d.k.DESC),(0,u.Z)(n,d.k.DESC,d.k.ASC),(0,u.Z)(n,d.k.SECONDARY_ASC,d.k.SECONDARY_DESC),(0,u.Z)(n,d.k.SECONDARY_DESC,d.k.SECONDARY_ASC),n),f=(l={},(0,u.Z)(l,d.Q.INDEX,{key:"custom-order",get value(){return s.ag.get("sort.custom-order")}}),(0,u.Z)(l,d.Q.TITLE,{key:"title",get value(){return s.ag.get("sort.title")}}),(0,u.Z)(l,d.Q.ARTIST,{key:"artist",get value(){return s.ag.get("sort.artist")}}),(0,u.Z)(l,d.Q.ADDED_BY,{key:"added-by",get value(){return s.ag.get("sort.added-by")}}),(0,u.Z)(l,d.Q.ADDED_AT,{key:"added-at",get value(){return s.ag.get("sort.date-added")}}),(0,u.Z)(l,d.Q.DURATION,{key:"duration",get value(){return s.ag.get("sort.duration")}}),(0,u.Z)(l,d.Q.EVENT_DATE,null),(0,u.Z)(l,d.Q.ALBUM,{key:"album",get value(){return s.ag.get("sort.album")}}),(0,u.Z)(l,d.Q.ALBUM_OR_PODCAST,{key:"album-or-podcast",get value(){return s.ag.get("sort.album-or-podcast")}}),(0,u.Z)(l,d.Q.ALBUM_OR_SHOW,{key:"album-or-show",get value(){return s.ag.get("sort.album-or-show")}}),(0,u.Z)(l,d.Q.PLAYS,null),(0,u.Z)(l,d.Q.RELEASE_DATE,null),(0,u.Z)(l,d.Q.ADD,null),(0,u.Z)(l,d.Q.ACTIONS,null),l),b=r(11794),h=r(60377),j=r(4637);function A(e){return!!e}var S=function(e){var t=e.columns,r=e.disabled,n=e.onSort,l=(0,i.Z)(t);l.splice(2,0,b.QD.ARTIST);var u=(0,a.useContext)(c.Gb),S=u.sortState,k=u.setSortState,p=function(e){return null===e.column?f[b.QD.INDEX]:(0,h.cB)(e.column,e.order)?f[b.QD.ARTIST]:f[e.column]}(S),y=(0,a.useCallback)((function(e){null==n||n(),k(function(e,t,r){return e?t!==m[e]||"artist"===e&&[d.k.ASC,d.k.DESC].includes(r)||"title"===e&&[d.k.SECONDARY_ASC,d.k.SECONDARY_DESC].includes(r)?g[e]:{column:m[e],order:x[r]}:c.HI}(e,S.column,S.order))}),[n,k,S.column,S.order]),D=(0,a.useCallback)((function(){return null!==S.column}),[S.column]),C=l.map((function(e){return f[e]})).filter(A);return(0,j.jsx)(o.A,{options:C,onSelect:y,selected:p,isSelectionChanged:D,sortOrder:S.order,heading:s.ag.get("drop_down.sort_by"),disabled:r})}},33155:(e,t,r)=>{r.r(t),r.d(t,{default:()=>K});var n=r(45389),l=r(8850),i=r(39130),a=r(10995),s=r.n(a),o=(r(62780),r(22369),r(162),r(95675),r(61235),r(7845),r(29543),r(70969),r(66715),r(30479),r(75341),r(59496)),u=r(38185),c=r(73845),d=r(17249),g=r(84737),m=r(77999),x=r(23006),f=r(35833),b=r(61996),h=r(24898),j=r(68833),A=r(64371),S=r(60377),k=r(19382),p=r(50200),y=r(11794),D=r(56394),C=r(8161),v=r(81164),O=r(32376),E=r(59791),T=r(1003),Q=(r(83001),r(82),r(27639),r(71756),r(30246),r(90511),r(54691)),_=r(6336),P=r(78142),I=r(1962),R=r(77728),N=r(35742),Z=r(69395),U=r(70436),w=r(14699),L=r(4637),B=o.memo((function(e){var t=e.uri,r=e.uid,n=e.name,l=e.duration_ms,i=e.artists,a=e.album,s=e.is19PlusOnly,u=e.isExplicit,c=e.isPlayable,g=e.index,m=e.contextUri,x=e.imgUrl,f=e.usePlayContextItem,b=(0,o.useContext)(p.fo).filter,h=f({uid:r,uri:t,index:g}),j=h.isActive,A=h.isPlaying,S=h.triggerPlay,k=h.togglePlay,y=(0,I.r)({isExplicit:u}),D=y.badges,C=y.hasBadges,v=(null==i?void 0:i.map((function(e){return e.name})).join(d.ag.getSeparator()))||"";return(0,L.jsx)(P.ZP,{value:"row",index:g,children:(0,L.jsx)(Q._,{menu:(0,L.jsx)(R.N,{uri:t,uid:r,contextUri:m}),children:(0,L.jsxs)(w.c,{uri:t,contextUri:m,isActive:j,index:g,onTriggerPlay:function(){S()},ariaRowIndex:g+1,isPlayable:c,ageRestricted:s,dragMetadata:{name:n,createdBy:v},children:[(0,L.jsx)(Z.Dd,{ariaColIndex:0,children:(0,L.jsx)(Z.Du,{uri:t,playAriaLabel:d.ag.get("tracklist.a11y.play",n,v),isPlaying:A,isActive:j,onClick:function(){k()},children:(0,L.jsx)(Z.km,{children:g+1})})}),(0,L.jsxs)(Z.vZ,{ariaColIndex:1,children:[(0,L.jsx)(Z.lD,{src:x}),(0,L.jsxs)(Z.vm,{children:[(0,L.jsx)(Z.Wh,{titleText:n,children:(0,L.jsx)(N.o,{searchWords:[b],textToHighlight:n})}),C&&(0,L.jsx)(Z.g3,{children:D.explicit?(0,L.jsx)(_.N,{}):null}),(0,L.jsx)(Z.K9,{children:i&&(0,L.jsx)(U.o,{nonInteractive:!0,artists:i,filter:b})})]})]}),(0,L.jsx)(Z.UA,{ariaColIndex:2,children:(null==a?void 0:a.name)&&(0,L.jsx)(Z.BM,{nonInteractive:!0,uri:null==a?void 0:a.uri,name:null==a?void 0:a.name,children:(0,L.jsx)(N.o,{searchWords:[b],textToHighlight:null==a?void 0:a.name})})}),(0,L.jsxs)(Z.mU,{ariaColIndex:3,children:[(0,L.jsx)(Z.A$,{duration:l}),(0,L.jsx)(Z.Zv,{menu:(0,L.jsx)(R.N,{uri:t,uid:r,contextUri:m}),label:d.ag.get("more.label.track",n,v)})]})]})})})}),(function(e,t){return e.uri===t.uri&&e.index===t.index})),M=r(12033),Y=new Set(D.MI),H=o.memo((function(e){var t=e.uri,r=e.tracks,n=e.columns,l=e.sortState,i=e.handleSort,a=e.usePlayContextItem,s=e.tracklistDomRef,u=(0,o.useRef)(null),c=(0,o.useCallback)((function(e,r){var n,l=(0,M.X)(null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40,desiredLabel:"small"});return(0,L.jsx)(B,{index:r,contextUri:t,uri:e.uri,uid:e.uid,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album||void 0,isExplicit:e.isExplicit,is19PlusOnly:e.is19PlusOnly,type:e.type,imgUrl:(null==l?void 0:l.url)||"",usePlayContextItem:a},e.uid)}),[t,a]);return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(P.ZP,{value:"playlist-tracklist",children:(0,L.jsx)(y.Pv,{ariaLabel:d.ag.get("local-files"),hasHeaderRow:!0,columns:n,sortableColumns:Y,sortState:l,onSort:i,renderRow:c,resolveUri:function(e){return e.uri},resolveUid:function(e){return e.uid},tracks:r,nrTracks:r.length,limit:100,outerRef:u,outerDomRef:s},t)})})}));const z="uCHqQ74vvHOnctGg0X0B",W="feuNq1FTxMbdeOTuFgpA";function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=[y.QD.INDEX,y.QD.TITLE,y.QD.ALBUM,y.QD.DURATION],G=function(){var e=(0,o.useContext)(p.fo).filter,t=(0,o.useContext)(D.Gb),r=t.sortState,n=t.setSortState,a=(0,o.useContext)(O.t),y=(0,E.I)(),Q=(0,o.useState)(),_=(0,i.Z)(Q,2),P=_[0],I=_[1],R=(0,C.Y)(u.Fzl),N=(0,o.useRef)(null),Z=(0,o.useCallback)((function(e){n((0,S.VK)(e,r))}),[r,n]),U=(0,o.useCallback)((0,l.Z)(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getTracks((0,S._j)(r),e);case 2:n=t.sent,I(n);case 4:case"end":return t.stop()}}),t)}))),[a,r,e]);(0,o.useEffect)((function(){U()}),[U]);var w=(0,T.n)({uri:v.b,pages:[{items:(null!=P?P:[]).map((function(e){return X(X({},e),{},{provider:null})}))}]},{featureIdentifier:"local_files"}),B=w.isPlaying,M=w.togglePlay,Y=w.usePlayContextItem;return P?e||P.length&&y?(0,L.jsxs)("div",{role:"presentation",className:z,children:[(0,L.jsxs)(x.gF,{backgroundColor:R,children:[(0,L.jsxs)(f.W,{children:[(0,L.jsx)(A.$,{size:"md",onClick:function(){return M()},isPlaying:B,uri:v.b}),(0,L.jsx)(b.i,{text:d.ag.get("local-files")})]}),(0,L.jsxs)(x.sP,{children:[(0,L.jsx)(x.xd,{children:d.ag.get("local-files")}),(0,L.jsx)(x.T0,{children:d.ag.get("local-files.description")})]})]}),(0,L.jsx)(g.o,{backgroundColor:R,children:(0,L.jsxs)(g.F,{children:[(0,L.jsx)(A.$,{size:"lg",onClick:function(){return M()},isPlaying:B,uri:v.b}),(0,L.jsxs)("div",{className:W,children:[(0,L.jsx)(o.Suspense,{fallback:null,children:(0,L.jsx)(h.K,{placeholder:d.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:N})}),(0,L.jsx)(k.l,{columns:D.MI})]})]})}),(0,L.jsx)("div",{className:"contentSpacing",children:(0,L.jsx)(H,{tracks:P,uri:v.b,columns:q,handleSort:Z,sortState:r,usePlayContextItem:Y,tracklistDomRef:N})})]}):(0,L.jsx)(m.u,{linkTo:"/preferences",linkTitle:d.ag.get("local-files.empty-button"),message:d.ag.get("local-files.empty-description"),title:d.ag.get("local-files.empty-header"),children:(0,L.jsx)(c.Y,{iconSize:64,"aria-hidden":"true"})}):(0,L.jsx)(j.h,{hasError:!1,errorMessage:d.ag.get("error.request-artist-failure"),loadOffline:!0})};const K=function(){return(0,L.jsx)(D.kz,{uri:"spotify:internal:local-files",children:(0,L.jsx)(p.hz,{uri:"spotify:internal:local-files",children:(0,L.jsx)(G,{})})})}}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map