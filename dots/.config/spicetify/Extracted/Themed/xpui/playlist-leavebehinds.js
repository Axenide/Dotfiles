"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5457],{19312:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var s=n(8850),a=n(10995),l=n.n(a),i=(n(72304),n(22369),n(82088),n(59496)),r=n(61740),u=n(49421),c=n(59272),d=n(94152),o=(n(69109),n(47393)),v=n(98148),f=n(17249),p=n(70571),h=n(4637),b=function(e){var t=e.leavebehinds,n=e.surface,s=e.playlistUri,a=e.playlistId,l=(0,d.s4)(),i="".concat(f.ag.get("view.see-all")," (").concat(t.length<=p.fz?t.length:"".concat(p.fz),")");return(0,h.jsx)(o.rU,{to:"/playlist/".concat(a,"/see-all-ads"),state:{playlistUri:s},children:(0,h.jsx)(v.o,{"data-testid":"leavebehinds-see-all",buttonSize:"sm",onClick:function(){l.send((0,u.a)({leavebehind_request_id:t[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:n,uri:s}))},children:i})})},y=n(41434),g=n(45099),_=n(40685),m=function(e){var t=e.uri,n=e.playlistName;return _.adsCosmos.post("https://spclient.wg.spotify.com/podcast-ap4p/leavebehinds/ads",{surface:(0,g.OO)(g.Tg.PLAYLIST),uri:t,playlistTitle:n})},I=n(22679),k=n(32865),w=n(42957);const x=function(e){var t,n=e.playlistUri,a=e.playlistName,o=null===(t=(0,c.EC)(n))||void 0===t?void 0:t.id,v=(0,r.v9)(I.N),f=null==v?void 0:v.some((function(e){return e.playlistId===o})),_=(0,g.OO)(g.Tg.PLAYLIST),x=(0,r.I0)(),U=(0,d.s4)(),C=(0,r.v9)((function(e){var t,n;return null===(t=e.ads)||void 0===t||null===(n=t.musicLeavebehinds)||void 0===n?void 0:n.playlistId})),L=(0,r.v9)((function(e){return e.ads.musicLeavebehinds.fetchingState})),T=(0,r.v9)(I.v);(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||f){e.next=13;break}return x((0,k.ZN)(o)),e.prev=2,e.next=5,m({uri:n,playlistName:a});case 5:t=e.sent,x((0,k.Gr)((0,p.D7)({requestId:t.requestId,leavebehindAds:t.leavebehindAds},n))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),x((0,k.tD)()),U.send((0,u.a)({event:"event_error",event_reason:"error_fetching_leavebehinds",surface:_,uri:n}));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();C!==o&&e()}),[x,U,f,C,o,a,n,_]);var A=(0,i.useMemo)((function(){return T.slice(0,p.aV)}),[T]);return L===y.I.FETCHED&&T.length>0&&o&&n===T[0].playlistUri?(0,h.jsx)(w.Z,{surface:_,playlistUri:n,leavebehinds:A,seeAllButton:T.length>p.aV?(0,h.jsx)(b,{leavebehinds:T,surface:_,playlistId:o,playlistUri:n}):null}):null}}}]);
//# sourceMappingURL=playlist-leavebehinds.js.map