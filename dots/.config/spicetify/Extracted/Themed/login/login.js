(()=>{var e,t={22485:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}},51703:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{ABORT_LOGIN_TYPE_ACCOUNTS:()=>R,ACCOUNTS_METHODS:()=>M,LOADING:()=>P,LOGIN_BEFORE:()=>C,LOGIN_CLEAR_ERRORS:()=>x,LOGIN_FAIL:()=>A,LOGIN_SUCCESS:()=>F,LOGIN_TYPE_ACCOUNTS:()=>N,LOGIN_TYPE_AUTOLOGIN:()=>I,LOGIN_TYPE_EMAIL:()=>T,UTM_PARAMETERS:()=>j,abortLoginWithAccounts:()=>K,fetchUTMParameters:()=>Y,loading:()=>G,login:()=>W,loginClearErrors:()=>z,loginFailed:()=>B,loginSuccess:()=>U,loginWithAccounts:()=>V,receivedUTMParameters:()=>q});var o={};n.r(o),n.d(o,{ENTER_LOGIN_MODE:()=>ee,ENTER_SETTINGS_MODE:()=>ne,ENTER_SIGNUP_MODE:()=>X,ENTER_SIGNUP_MODE_STEP_0:()=>$,ENTER_SIGNUP_MODE_STEP_1:()=>Q,ENTER_WELCOME_MODE:()=>te,INTERACTION:()=>re,START_APP:()=>J,enterLoginMode:()=>ue,enterSettingsMode:()=>le,enterSignupMode:()=>ie,enterSignupModeStep0:()=>ae,enterSignupModeStep1:()=>se,enterWelcomeMode:()=>ce,interaction:()=>de,openSignupPage:()=>pe,startApp:()=>oe});var i={};n.r(i),n.d(i,{CLEAR_ALL_ERRORS:()=>Ge,COUNTRY_NOT_LAUNCHED:()=>Be,FACEBOOK_SIGNUP_ATTEMPT:()=>Ie,FACEBOOK_SIGNUP_FAILURE:()=>Re,FACEBOOK_SIGNUP_SUCCESS:()=>Ne,SIGNUP_ATTEMPT:()=>Pe,SIGNUP_FAILURE:()=>je,SIGNUP_RESTRICTIONS_FAILURE:()=>Ae,SIGNUP_RESTRICTIONS_SUCCESS:()=>xe,SIGNUP_SUCCESS:()=>Te,UPDATE_SIGNUP_DATA:()=>Ue,VALIDATE_FIELD_ATTEMPT:()=>Me,VALIDATE_FIELD_FAILURE:()=>Ze,VALIDATE_FIELD_SUCCESS:()=>Le,clearAllErrors:()=>st,countryNotLaunched:()=>at,facebookSignup:()=>Qe,facebookSignupFailure:()=>tt,facebookSignupSuccess:()=>et,getSignupRestrictions:()=>He,signup:()=>Ke,signupAttempt:()=>qe,signupFailure:()=>Je,signupRestrictionsFailure:()=>Ve,signupRestrictionsSuccess:()=>We,signupSuccess:()=>ze,signupWithAccounts:()=>$e,updateSignupData:()=>it,validateField:()=>Ye,validateFieldAttempt:()=>nt,validateFieldFailure:()=>rt,validateFieldSuccess:()=>ot});var a={};n.r(a),n.d(a,{SETTINGS_FETCH_PROXY_SETTINGS_FAILURE:()=>Rt,SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS:()=>Nt,SETTINGS_RESTART_CLIENT_FAILURE:()=>Ut,SETTINGS_RESTART_CLIENT_SUCCESS:()=>Lt,SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE:()=>Zt,SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS:()=>Mt,fetchProxySettings:()=>Bt,restartClient:()=>Ht,updateProxySettings:()=>Gt});var s=n(45389),u=n(8850),c=n(10995),l=n.n(c),p=(n(22369),n(8760),n(59538),n(79611),n(16366),n(70785),n(3270),n(14863),n(41337),n(46743),n(74553),n(47921),n(87995)),d=n(92033),f=n(61740),h=n(82990),g=n(1744);n(95675),n(61235),n(62780),n(7845),n(29543),n(70969),n(66715),n(30479),n(75341),n(81289),n(69109),n(89620);const v=function(e){return n.g&&"function"==typeof n.g._getSpotifyModule?new Promise((function(t,r){n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(e),{onSuccess:t,onFailure:r})})):null},m=window.localStorage;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _="lastUsername",E="THIS_USER_DOES_NOT_EXIST_AND_IS_A_PLACEHOLDER",k="utmParameters",S=m.getItem(k),D=m.getItem(_),w={errorData:null,loginInProgress:!1,redirectTo:null,username:D!==E?D:"",utmParameters:S?JSON.parse(S):null};const O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Kt.LOADING:return b(b({},e),{},{loading:!0,throbberDelay:t.throbberDelay});case Kt.LOGIN_FAIL:return b(b({},e),{},{loading:!1,errorData:t.errorData,loggedIn:!1,loginInProgress:!1});case Kt.LOGIN_BEFORE:return b(b({},e),{},{errorData:t.errorData,loggedIn:!1,loginInProgress:t.loginInProgress,username:t.username});case Kt.LOGIN_SUCCESS:return b(b({},e),{},{loading:!1,loggedIn:!0,redirectDelay:t.redirectDelay||0,redirectTo:t.redirectTo,username:t.username});case Kt.UTM_PARAMETERS:return b(b({},e),{},{utmParameters:t.utmParameters});case Kt.LOGIN_CLEAR_ERRORS:return b(b({},e),{},{errorData:null});default:return e}};var C="LOGIN_BEFORE",F="LOGIN_SUCCESS",x="LOGIN_CLEAR_ERRORS",A="LOGIN_FAIL",P="LOADING",j="UTM_PARAMETERS",T="login",I="autologin",N="login-accounts",R="abort-login-accounts",M={facebook:"facebook",apple:"apple",google:"google"},Z=200;function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:C,errorData:null,username:e||"",loginInProgress:t===T,loginType:t}}function U(e,t){return{type:F,errorData:null,redirectTo:arguments.length>4?arguments[4]:void 0,redirectDelay:t||0,username:e,loginType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:T,afterSignup:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}}function B(e){return{type:A,errorData:e,loginType:arguments.length>1&&void 0!==arguments[1]?arguments[1]:T}}function G(e){return{type:P,throbberDelay:e&&e.throbberDelay?e.throbberDelay:0}}var H=function(){var e=(0,u.Z)(l().mark((function e(t,n){var r,o,i,a,s,u,c,p,d,f,h,g,m=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(r=m.length>2&&void 0!==m[2]?m[2]:{}).defaultErrorCode,i=r.redirectDelay,a=void 0===i?0:i,s=m.length>3&&void 0!==m[3]?m[3]:T,u=m.length>4&&void 0!==m[4]&&m[4],p=!(m.length>6&&void 0!==m[6])||m[6],(c=m.length>5&&void 0!==m[5]?m[5]:null)&&(n.args=n.args||[],n.args[0]=n.args[0]||{},n.args[0].actionHash=c),e.prev=6,e.t0=JSON,e.next=10,v(n);case 10:e.t1=e.sent,d=e.t0.parse.call(e.t0,e.t1),f=d.redirectTo||"xpui",h=null,n&&n.args&&n.args[0]&&(h=n.args[0].username),t(U(p?h:E,a,s,u,f)),e.next=23;break;case 18:e.prev=18,e.t2=e.catch(6),g=e.t2,o?g={errorCode:o}:"string"==typeof e.t2&&(g=JSON.parse(e.t2)),t(B(g,s));case 23:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t,n){return e.apply(this,arguments)}}();function W(e){var t=e.username,n=e.password,r=e.rememberMe,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e){var a=o?I:T;e(L(r?t:E,a)),H(e,{name:T,args:[{username:t,password:n,rememberMe:r}]},{redirectDelay:Z},a,o,i,r)}}function V(e,t){return function(n){n(L(null,N)),H(n,{name:N,args:[{method:e,enableSignup:!1}]},{redirectDelay:Z},N,!1,t)}}function K(){return(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({name:R,args:[]});case 2:case"end":return e.stop()}}),e)})))}function Y(){return function(){var e=(0,u.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:"get-signup-utm-parameters",args:[]},e.t0=t,e.t1=q,e.t2=JSON,e.next=6,v(n);case 6:e.t3=e.sent,e.t4=e.t2.parse.call(e.t2,e.t3),e.t5=(0,e.t1)(e.t4),(0,e.t0)(e.t5);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function q(e){return{type:j,utmParameters:e}}function z(){return{type:x}}var J="START_APP",X="ENTER_SIGNUP_MODE",$="ENTER_SIGNUP_MODE_STEP_0",Q="ENTER_SIGNUP_MODE_STEP_1",ee="ENTER_LOGIN_MODE",te="ENTER_WELCOME_MODE",ne="ENTER_SETTINGS_MODE",re="INTERACTION";function oe(){return{type:J}}function ie(){return{type:X,actionHash:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}}function ae(){return{type:$}}function se(){return{type:Q}}function ue(){return{type:ee,actionHash:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}}function ce(){return{type:te,errorMessage:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}}function le(){return{type:ne}}function pe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(){var t=(0,u.Z)(l().mark((function t(n,r){var o,i,a,s,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o={},a=e?"website":"desktop-app",t.t0=a,t.next="desktop-app"===t.t0?5:"website"===t.t0?7:16;break;case 5:return n(ie()),t.abrupt("break",17);case 7:return t.next=9,n(Y());case 9:return s=r(),o=s.login.utmParameters||{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""},u=Object.keys(o).reduce((function(e,t){return e[t]=encodeURIComponent(o[t]),e}),{}),i="https://www.spotify.com/signup?utm_source=".concat(u.utm_source,"&utm_medium=").concat(u.utm_medium,"&utm_campaign=").concat(u.utm_campaign),u.referral&&(i+="&referral=".concat(u.referral,"&referrer=").concat(u.referral)),window.open(i),t.abrupt("break",17);case 16:return t.abrupt("break",17);case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function de(e,t,n,r,o){return{type:re,page:e,interactionType:t,intent:n,itemId:r,actionHash:o}}var fe=n(980),he=n(69775),ge=(n(63691),n(40265),n(83001),n(42617),n(27639),n(71756),n(92346),n(84456),n(30246),n(90511),n(68961)),ve=n.n(ge),me=["errors"],ye="Spotify-App-Version",be="App-Platform";function _e(){var e="undefined"!=typeof window&&window.__spotify&&window.__spotify.client_version||"";if(!e)throw new Error("Missing Spotify App Version! Something is wrong: talk to #desktop-squad.");return[ye,e]}function Ee(){var e="undefined"!=typeof window&&window.navigator&&window.navigator.platform||"",t="";if(-1!==e.indexOf("Mac")?t="OSX":-1!==e.indexOf("Win")?t="Win32":-1!==e.indexOf("Linux")&&(t="Linux"),!t)throw new Error("Missing App Platform! Something is wrong: talk to #desktop-squad.");return[be,t]}function ke(e){var t,n,r=new Map(Object.entries(e).sort()),o=(t=r,n=ve().create(),t.forEach((function(e){void 0!==e&&n.update(e.toString())})),n.hex());if(r.size>o.length)return r;var i=(0,he.Z)(r),a=(0,he.Z)(Array(r.size).keys()).sort((function(e,t){var n=o.charAt(e).localeCompare(o.charAt(t));return 0!==n?n:i[e][0].localeCompare(i[t][0])})),s=new Map;return a.forEach((function(e){s.set(i[e][0],i[e][1])})),s}function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.email,r=e.password,o=e.gender,i=e.birthDate,a=void 0===i?{}:i,s=e.sendEmail,u=e.shareData,c=e.agreeEula,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""},p=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=Object.keys(l).reduce((function(e,t){return e[t]=encodeURIComponent(l[t]),e}),{}),f="https://login.app.spotify.com?utm_source=".concat(d.utm_source,"&utm_medium=").concat(d.utm_medium,"&utm_campaign=").concat(d.utm_campaign);d.referral&&(f+="&referral=".concat(d.referral,"&referrer=").concat(d.referral));var h,g={key:(h="undefined"!=typeof window&&window.__spotify&&window.__spotify.DESKTOP_SIGNUP_DEBUG_KEY,h||"4c7a36d5260abca4af282779720cf631"),displayname:t,email:n,password:r,password_repeat:r,gender:o,birth_year:a.year,birth_month:a.month,birth_day:a.day,iagree:c?1:0,creation_point:f,creation_flow:"desktop",platform:"desktop",referrer:d.referral};return"boolean"==typeof s&&(g["send-email"]=s),"boolean"==typeof u&&(g.thirdpartyemail=u),p&&Object.keys(g).forEach((function(e){void 0===g[e]&&delete g[e]})),ke(g)}var De=function(e,t){var n=e.headers.get("content-type");e.headers.set("content-type",function(e,t){return[].concat((0,he.Z)(e.split(";")),[t]).join(";")}(n,t))},we=function(e){return function(){var t=(0,u.Z)(l().mark((function t(n,r,o){var i,a,s,u,c,p,d,f,h;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Se(n,r,o),a=new FormData,i.forEach((function(e,t){a.append(t,e)})),s=[_e(),Ee()].reduce((function(e,t){return e[t[0]]=t[1],e}),{}),u={method:"POST",body:a,headers:{"App-Platform":s["App-Platform"],"Spotify-App-Version":s["Spotify-App-Version"],"X-Client-Id":{}.SPOTIFY_CLIENT_ID}},c=new Request(e,u),De(c,"charset=utf-8"),t.next=9,fetch(c);case 9:return p=t.sent,t.next=12,p.json();case 12:if(t.t0=t.sent,t.t0){t.next=15;break}t.t0={};case 15:if(d=t.t0,f=d.errors,h=(0,fe.Z)(d,me),!f){t.next=20;break}throw f;case 20:return t.abrupt("return",h);case 21:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},Oe=we("https://spclient.wg.spotify.com/signup/public/v1/account/"),Ce=we("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=true"),Fe=function(){var e=(0,u.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=1");case 2:return t=e.sent,e.next=5,t.json();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(!((n=e.t0).errors&&n.errors.length>0)){e.next=11;break}throw n.errors;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var xe="SIGNUP_RESTRICTIONS_SUCCESS",Ae="SIGNUP_RESTRICTIONS_FAILURE",Pe="SIGNUP_ATTEMPT",je="SIGNUP_FAILURE",Te="SIGNUP_SUCCESS",Ie="FACEBOOK_SIGNUP_ATTEMPT",Ne="FACEBOOK_SIGNUP_SUCCESS",Re="FACEBOOK_SIGNUP_FAILURE",Me="VALIDATE_FIELD_ATTEMPT",Ze="VALIDATE_FIELD_FAILURE",Le="VALIDATE_FIELD_SUCCESS",Ue="UPDATE_SIGNUP_DATA",Be="COUNTRY_NOT_LAUNCHED",Ge="CLEAR_ALL_ERRORS";function He(){return function(){var e=(0,u.Z)(l().mark((function e(t,n){var r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),e.prev=1,!window.__spotify||!0!==window.__spotify.is_running_on_teamcity){e.next=6;break}e.t0={},e.next=9;break;case 6:return e.next=8,Fe();case 8:e.t0=e.sent;case 9:o=e.t0,t(We(o)),e.next=17;break;case 13:e.prev=13,e.t1=e.catch(1),t(Ve(e.t1)),r.app&&r.app.mode&&"welcome"!==r.app.mode&&(t(ue()),t(pe(!0)));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()}function We(e){return{type:xe,restrictions:e}}function Ve(e){return{type:Ae,error:e}}function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=(0,u.Z)(l().mark((function t(n,r){var o,i,a,s,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(qe()),t.next=3,n(Y());case 3:return o=r().signup.formData,i=r().login.utmParameters,t.prev=5,t.next=8,Oe(o,i);case 8:n(ze()),a=o.email,s=o.password,n(W({username:a,password:s,rememberMe:!0},!0,e)),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(5),u={},Object.keys(t.t0).forEach((function(e){u["birthdate"===e?"birthDate":e]={message:t.t0[e]}})),n(Je(u));case 18:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()}function Ye(e){return function(){var t=(0,u.Z)(l().mark((function t(n,r){var o,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(Y());case 2:return o=r().signup.formData[e],i=r().login.utmParameters,n(nt(e,o)),t.prev=5,t.next=8,Ce((0,s.Z)({},e,o),i,!0);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),t.t0[e]&&n(rt(e,{message:t.t0[e]}));case 13:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e,n){return t.apply(this,arguments)}}()}function qe(){return{type:Pe}}function ze(){return{type:Te}}function Je(e){return{type:je,errors:e}}var Xe=function(){var e=(0,u.Z)(l().mark((function e(t,n){var r,o,i,a,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=s.length>2&&void 0!==s[2]?s[2]:null)&&(n.args=n.args||[],n.args[0]=n.args[0]||{},n.args[0].actionHash=r),e.prev=2,e.t0=JSON,e.next=6,v(n);case 6:e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),i=o.redirectTo||"xpui",t(et()),t(U(null,0,I,!0,i)),e.next=18;break;case 13:e.prev=13,e.t2=e.catch(2),a=e.t2,"string"==typeof e.t2&&(a=JSON.parse(e.t2)),t(tt(a));case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}();function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){var r={name:N,args:[{method:e,enableSignup:!0}]};n(Qe()),Xe(n,r,t)}}function Qe(){return{type:Ie}}function et(){return{type:Ne}}function tt(e){return{type:Re,errorData:e}}function nt(e,t){return{type:Me,field:e,value:t}}function rt(e,t){return{type:Ze,field:e,error:t}}function ot(e){return{type:Le,field:e}}function it(e){return{type:Ue,data:e}}function at(){return{type:Be}}function st(){return{type:Ge}}n(4302),n(66469),n(43125),n(69724),n(39965),n(39975);var ut,ct=n(58583),lt=n(318),pt=n(96268),dt=n(27915),ft=n(92449),ht=(n(162),n(5538),n(96669),n(31781),n(82088),n(35019),n(37193),n(72835),n(59496)),gt=n(22485),vt=n.n(gt);function mt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bt=function(e){return e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu",e}({}),_t=function(e){return e.AR="، ",e.FA="، ",e.EN=", ",e}(_t||{}),Et=function(e){return e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other",e}(Et||{});var kt={},St=function(e){return"ar"===e?"ar-u-nu-latn":e};function Dt(e){var t="(?:".concat(e.join("|"),")");return new RegExp(String.raw(ut||(ut=(0,ct.Z)(["({","}|%","%)"],["(\\{","\\}|%","%)"])),t,t),"g")}var wt=new(function(){function e(){(0,dt.Z)(this,e),(0,s.Z)(this,"_relativeTimeFormat",null),(0,s.Z)(this,"_dateTimeFormats",new Map),this._dictionary={},this._locale=bt.en,this._urlLocale=bt.en}return(0,ft.Z)(e,[{key:"getDateTimeFormat",value:function(e){var t=JSON.stringify(Object.keys(e).sort().map((function(t){return(0,s.Z)({},t,e[t])}))),n=this._dateTimeFormats.get(t);return void 0===n&&(n=new Intl.DateTimeFormat(St(this._locale),e),this._dateTimeFormats.set(t,n)),n}},{key:"getRelativeTimeFormat",value:function(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=void 0===Intl.RelativeTimeFormat?null:new Intl.RelativeTimeFormat(this._locale)),this._relativeTimeFormat}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"setDictionary",value:function(e){this._dictionary=e}},{key:"setLocale",value:function(e){this._locale=e,this._dateTimeFormats.clear(),this._relativeTimeFormat=null}},{key:"setUrlLocale",value:function(e){this._urlLocale=e}},{key:"getLocale",value:function(){return this._locale}},{key:"getUrlLocale",value:function(){return this._urlLocale}},{key:"getSmartlingLocale",value:function(){var e=this._locale;return vt()[e]||e}},{key:"toLocaleLowerCase",value:function(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}},{key:"toLocaleUpperCase",value:function(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}},{key:"get",value:function(e){for(var t=this,n=(e in this._dictionary?this._dictionary[e]:e),r="",o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if("string"!=typeof n){var s=i[0],u=function(e,t){try{return(kt[e]||(kt[e]=new Intl.PluralRules(e))).select(t)}catch(e){return Et.OTHER}}(this._locale,parseInt(s,10)),c=n[u];void 0!==c?r=c:n.other&&(r=n.other)}else r=n;if(/%\d%/.test(r)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}var l={},p={};i.forEach((function(e,t){var n,r=mt("object"!==(0,pt.Z)(e)||null===e||(0,ht.isValidElement)(e)?[[t,e]]:Object.entries(e));try{for(r.s();!(n=r.n()).done;){var o=(0,lt.Z)(n.value,2),i=o[0],a=o[1];(0,ht.isValidElement)(a)?p[i]=a:void 0!==a&&(l[i]=a)}}catch(e){r.e(e)}finally{r.f()}})),r=r.replace(Dt(Object.keys(l)),(function(e,n){var r=n.slice(1,-1),o=l[r];return"number"==typeof o?t.formatNumber(o):o}));var d=Object.keys(p);return d.length?(0,ht.createElement)(ht.Fragment,null,r.split(Dt(d)).map((function(e,t){if(t%2){var n,r=e.slice(1,-1),o=p[r];return(0,ht.cloneElement)(o,{key:null!==(n=o.key)&&void 0!==n?n:r})}return e})).filter((function(e){return""!==e}))):r}},{key:"getSeparator",value:function(){switch(this._locale){case bt.ar:return _t.AR;case bt.fa:return _t.FA;default:return _t.EN}}},{key:"formatNumber",value:function(e,t){return e.toLocaleString(St(this._locale),t)}},{key:"formatNumberCompact",value:function(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}},{key:"formatDate",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(t).format(e)}},{key:"formatRelativeDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Date(Date.now());e=new Date(e);var r,o=this.getRelativeTimeFormat(),i=e.getTime()-n.getTime(),a=Math.abs(i)<2592e6;if(null!==o&&a){var s=(r=i,{seconds:Math.round(r/1e3),minutes:Math.round(r/1e3/60),hours:Math.round(r/1e3/60/60),days:Math.round(r/1e3/60/60/24),weeks:Math.round(r/1e3/60/60/24/7)}),u=s.weeks,c=s.days,l=s.hours,p=s.minutes,d=s.seconds;return Math.abs(c)>=7?o.format(u,"weeks"):Math.abs(l)>=24?o.format(c,"days"):Math.abs(p)>=60?o.format(l,"hours"):Math.abs(d)>=60?o.format(p,"minutes"):o.format(d,"seconds")}return this.formatDate(e,t)}},{key:"__resetForTests",value:function(){this._dictionary={},this._locale=bt.en,kt={}}}]),e}()),Ot=2,Ct=3,Ft=4,xt={"auto-detect":{label:function(){return wt.get("desktop.settings.proxy.autodetect")}},"no-proxy":{label:function(){return wt.get("desktop.settings.proxy.noproxy")}},http:{label:function(){return wt.get("desktop.settings.proxy.http")}},socks4:{label:function(){return wt.get("desktop.settings.proxy.socks4")}},socks5:{label:function(){return wt.get("desktop.settings.proxy.socks5")}}},At=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}],Pt="sp://proxy/v1/";function jt(){return(jt=(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:Pt}),persistent:!1,onSuccess:function(n){var r=JSON.parse(n);200!==r.status&&t(new Error("Failed to fetch proxy settings (status code: ".concat(r.status,")")));var o=JSON.parse(r.body);e({mode:o["network.proxy.mode"],address:o["network.proxy.addr"],username:o["network.proxy.user"],password:o["network.proxy.pass"]})},onFailure:function(e,n){t(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(){return(Tt=(0,u.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r={"network.proxy.mode":t.mode};[Ot,Ct,Ft].includes(t.mode)&&(r["network.proxy.addr"]=t.address,r["network.proxy.user"]=t.username),[Ot,Ft].includes(t.mode)&&(r["network.proxy.pass"]=t.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:Pt,body:JSON.stringify(r)}),persistent:!1,onSuccess:function(){e()},onFailure:function(e,t){n(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(){return(It=(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:function(){e()},onFailure:function(e,n){t(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nt="SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS",Rt="SETTINGS_FETCH_PROXY_SETTINGS_FAILURE",Mt="SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS",Zt="SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE",Lt="SETTINGS_RESTART_CLIENT_SUCCESS",Ut="SETTINGS_RESTART_CLIENT_FAILURE";function Bt(){return function(e){(function(){return jt.apply(this,arguments)})().then((function(t){e(function(e){return{type:Nt,data:e}}(t))}),(function(t){e(function(e){return{type:Rt,error:e}}(t))}))}}function Gt(e){return function(t){(function(e){return Tt.apply(this,arguments)})(e).then((function(){t({type:Mt}),t(Bt())}),(function(e){t(function(e){return{type:Zt,error:e}}(e))}))}}function Ht(){return function(e){(function(){return It.apply(this,arguments)})().then((function(){e({type:Lt})}),(function(t){e(function(e){return{type:Ut,error:e}}(t))}))}}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Kt=Vt(Vt(Vt(Vt({},o),r),i),a);n(39723),n(21861);var Yt=n(35391),qt=n(23011),zt=n(61899),Jt=(n(61391),n(72649),n(94562),n(4637));function Xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var $t=function(e){(0,Yt.Z)(n,e);var t=Xt(n);function n(e){var r;return(0,dt.Z)(this,n),(r=t.call(this,e)).state={hidden:r.props.delay>0},r}return(0,ft.Z)(n,[{key:"componentDidMount",value:function(){var e=this;!0===this.state.hidden&&(this.throbberTimeout=setTimeout((function(){e.setState({hidden:!1})}),this.props.delay))}},{key:"componentWillUnmount",value:function(){this.throbberTimeout&&clearTimeout(this.throbberTimeout)}},{key:"render",value:function(){return this.state.hidden?null:(0,Jt.jsx)("div",{"data-testid":"glue-throbber",className:"GlueThrobber ".concat(this.props.initial?"throbber-initial":"throbber"),children:(0,Jt.jsx)("div",{})})}}]),n}(ht.Component);$t.defaultProps={delay:0,initial:!0};var Qt=n(92720),en=(n(98853),n(55530)),tn=n.n(en);function nn(){return tn().create().toString()}var rn=n(82504),on=n(63892);function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var sn=function(e){(0,Yt.Z)(n,e);var t=an(n);function n(e){var r;return(0,dt.Z)(this,n),(r=t.call(this,e)).handleLoginClick=r.handleLoginClick.bind((0,Qt.Z)(r)),r.handleErrorClick=r.handleErrorClick.bind((0,Qt.Z)(r)),r}return(0,ft.Z)(n,[{key:"handleLoginClick",value:function(){var e=nn();this.props.openLoginPage(e),this.props.onInteraction("login/welcome","click","open-page-login",null,e)}},{key:"handleErrorClick",value:function(e){e.target.getAttribute("data-action")&&("showSettings"===e.target.getAttribute("data-action")&&this.props.openSettingsPage())}},{key:"render",value:function(){var e=this.props.errorMessage;return(0,Jt.jsxs)("main",{className:"Welcome","data-testid":"welcome",children:[(0,Jt.jsxs)("h1",{className:"HeroText __welcome",children:[wt.get("desktop-auth.login.millions-of-songs"),(0,Jt.jsx)("br",{}),wt.get("desktop-auth.login.free-on-spotify")]}),(0,Jt.jsxs)("div",{className:"Welcome__signup-or-login",children:[e&&(0,Jt.jsxs)("div",{className:"Welcome__error-message",role:"alert",onClick:this.handleErrorClick,"aria-live":"assertive",children:[(0,Jt.jsx)(rn.l,{className:"Welcome__error-message__icon"}),(0,Jt.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})]}),(0,Jt.jsx)(on.D,{id:"login-button",onClick:this.handleLoginClick,"data-ta-id":"welcome-login-button","data-testid":"login-button",fullWidth:!0,children:wt.get("desktop.login.LoginButton")})]})]})}}]),n}(ht.PureComponent);const un=(0,f.$j)((function(e){return{errorMessage:e.app.errorMessage}}),(function(e){return{openLoginPage:function(t){return e(Kt.enterLoginMode(t))},openSettingsPage:function(){return e(Kt.enterSettingsMode())},onInteraction:function(t,n,r,o,i){return e(Kt.interaction(t,n,r,o,i))}}}))(sn);var cn=n(10506),ln=n(77600),pn=(n(40274),"https://www.spotify.com/redirect/account-page/"),dn="showSettings",fn={id:"UnknownLoginErrorMessage"},hn={id:"DefaultErrorMessage",replace:[dn]},gn={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[dn]},400:fn,401:fn,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:fn,405:fn,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[pn]},408:{id:"RegionMismatchMessage",replace:[pn,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:fn,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:fn,415:fn,416:fn,417:{id:"FacebookCredentialsMisusedMessage"},418:fn,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]}},vn={1:fn,2:fn,3:{id:"BadCredentialsMessage"},4:fn,5:fn,6:fn,7:fn,8:fn,9:fn},mn={1:{silent:!0},2:fn,3:fn,4:{id:"SessionExpiredMessage"},5:hn};function yn(e,t,n){if(0===t)return!1;if(!e&&!t)return!1;var r=gn;switch(e){case"session":r=vn;break;case"desktop_login_accounts":r=mn}var o=r[t]||hn;if(o.silent)return!1;var i=o.replace||[],a="";switch(o.id){case"UnknownLoginErrorMessage":a=wt.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":a=wt.get("desktop.login.DefaultErrorMessage",i[0]);break;case"SessionTerminatedMessage":a=wt.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":a=wt.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":a=wt.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":a=wt.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":a=wt.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":a=wt.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":a=wt.get("desktop.login.ErrorProxyAuthRequired",i[0]);break;case"CriticalUpdate":a=wt.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":a=wt.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":a=wt.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":a=wt.get("desktop.login.MissingUserInfoMessage",i[0]);break;case"RegionMismatchMessage":a=wt.get("desktop.login.RegionMismatchMessage",i[0],i[1]);break;case"PremiumUsersOnlyMessage":a=wt.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":a=wt.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":a=wt.get("desktop.login.ClientUpdateFail",i[0]);break;case"FbUserNotFoundSignUp":a=wt.get("desktop.login.FbUserNotFoundSignUp",i[0])}return n?"".concat(a,"<br>").concat(wt.get("desktop.login.errorCode",n)):a}function bn(e){var t=e.validity,n=void 0===t?{}:t;return n.valid?null:["valueMissing","typeMismatch","tooShort"].find((function(e){return n[e]}))}const _n="H5vfurs7KNEs9Io5DUA7",En="qfBRU_bttJde7gy46oAB",kn="ypTrzM1PtlrZp04qs6Eq",Sn="oHZmDpK0SrWDaXhPjUtC",Dn="lAHowB9HYfAUrg9UaSde";var wn=n(83631),On=tn().create().toString();var Cn="has-used-app",Fn=!window.localStorage.getItem(Cn);Fn&&window.localStorage.setItem(Cn,!0);const xn=function(){var e,t=m.getItem("utmParameters");try{e=t?JSON.parse(t).referral:""}catch(t){e=""}return e};var An=function(){function e(t){(0,dt.Z)(this,e),this._eventSender=t}return(0,ft.Z)(e,[{key:"logPageView",value:function(e){var t=e.page;this.logAction({page:t,action_type:"pageview",action_intent:""})}},{key:"logAction",value:function(e,t){var n=e.page,r=e.action_type,o=e.action_intent,i=e.item_id,a=e.action_hash;this._eventSender.send((0,wn.e)({action_type:r,action_intent:o,action_page:n,action_item_id:i,action_hash:a,device_is_new_install:Fn,device_locale:window.__spotify.locale,device_referrer:xn(),ab_flags:"",session_id:On}),t)}}]),e}(),Pn=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR",e}(Pn||{}),jn=function(e){var t=e.eventSender,n=e.loginOnly,r=void 0!==n&&n,o=(0,ht.useState)(""),i=(0,lt.Z)(o,2),a=i[0],s=i[1],c=(0,ht.useState)(!1),p=(0,lt.Z)(c,2),d=p[0],h=p[1],g=(0,ht.useState)(!1),m=(0,lt.Z)(g,2),y=m[0],b=m[1],_=(0,f.I0)(),E=function(){var e=(0,f.I0)();return function(){e(le())}}(),k=(0,ht.useRef)(0),S=(0,ht.useMemo)((function(){return new An(t)}),[t]);(0,ht.useEffect)((function(){S.logPageView({page:"auth-on-web"})}),[S]);var D=function(){var e=(0,u.Z)(l().mark((function e(n){var r,o,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=++k.current,o=nn(),b(n),s(""),h(!0),S.logAction({page:"auth-on-web",action_type:"click",action_intent:n?"sign-up-with-browser":"log-in-with-browser",action_hash:o}),e.prev=6,e.next=9,v({name:N,args:[{method:"login-accounts",enableSignup:n,actionHash:o}]});case 9:return S.logAction({page:"auth-on-web",action_type:"view",action_intent:n?"show-success-signup":"show-success-login"},{flush:!1}),e.next=12,t.finalFlush();case 12:location.href="spotify:app:xpui",e.next=26;break;case 15:if(e.prev=15,e.t0=e.catch(6),i="string"==typeof e.t0?JSON.parse(e.t0):e.t0,r===k.current){e.next=21;break}return S.logAction({page:"auth-on-web",action_type:"view",action_intent:n?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:null==i?void 0:i.errorReference}),e.abrupt("return");case 21:h(!1),a=yn(i.errorCategory,i.errorCode,i.errorReference),"desktop_login_accounts"===i.errorCategory&&i.errorCode===Pn.OPERATION_TIMED_OUT&&(a=n?wt.get("desktop-auth.login.signup-time-out"):wt.get("desktop-auth.login.login-time-out")),s(a||""),S.logAction({page:"auth-on-web",action_type:"view",action_intent:n?"show-error-signup":"show-error-login",item_id:null==i?void 0:i.errorReference});case 26:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();return(0,Jt.jsx)("main",{children:d?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)(cn.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:_n,children:y?wt.get("desktop-auth.login.go-to-browser-signup"):wt.get("desktop-auth.login.go-to-browser-login")}),(0,Jt.jsxs)("button",{className:kn,onClick:function(){h(!1),S.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})},children:[(0,Jt.jsx)(cn.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:wt.get("desktop-auth.login.not-seeing-browser")})," ",(0,Jt.jsx)(cn.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:wt.get("desktop-auth.login.try-again")})]})]}):(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsxs)(cn.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:_n,children:[wt.get("desktop-auth.login.millions-of-songs"),(0,Jt.jsx)("br",{}),wt.get("desktop-auth.login.free-on-spotify")]}),a&&(0,Jt.jsxs)("div",{className:Sn,role:"alert",onClick:function(e){e.currentTarget.getAttribute("data-action")&&("showSettings"===e.currentTarget.getAttribute("data-action")&&E())},"aria-live":"assertive",children:[(0,Jt.jsx)(rn.l,{className:Dn}),(0,Jt.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})]}),(0,Jt.jsx)(on.D,{onClick:function(){D(!1)},iconTrailing:ln.T,children:wt.get("desktop-auth.login.log-in-with-browser")}),(0,Jt.jsxs)("button",{className:En,onClick:function(){if(r){var e=nn();_(Kt.enterSignupMode(e))}else D(!0)},children:[(0,Jt.jsx)(cn.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:wt.get("desktop-auth.login.new-to-spotify")}),(0,Jt.jsx)(cn.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:wt.get("desktop-auth.login.sign-up-with-browser")}),!r&&(0,Jt.jsx)(ln.T,{iconSize:16,semanticColor:"textBase"})]})]})})},Tn=(n(72304),n(98923)),In=n(35188),Nn=n(98148),Rn=n(84875),Mn=n.n(Rn);function Zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var Ln=function(){return(0,Jt.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Jt.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM7.25 3V10H8.75V3H7.25ZM7.25 11.5256V13.0256H8.75V11.5256H7.25Z",fill:"#eb6471"})})},Un=function(e){(0,Yt.Z)(n,e);var t=Zn(n);function n(){return(0,dt.Z)(this,n),t.apply(this,arguments)}return(0,ft.Z)(n,[{key:"render",value:function(){var e=this.props.errorMessage;return(0,Jt.jsxs)("div",{"aria-live":"polite",className:Mn()("FieldError",{"FieldError--hidden":!e}),children:[(0,Jt.jsx)(Ln,{}),(0,Jt.jsx)("span",{children:e||""})]})}}]),n}(ht.PureComponent);function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var Gn=0;var Hn=function(e){(0,Yt.Z)(n,e);var t=Bn(n);function n(){var e;(0,dt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).idNumber=++Gn,e.handleChange=e.handleChange.bind((0,Qt.Z)(e)),e}return(0,ft.Z)(n,[{key:"handleChange",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.placeholderLabel,r=e.name,o=e.type,i=e.isRequired,a=e.taId,s=e.id,u=e.defaultValue,c=e.value,l=e.minLength,p=e.autoFocus,d=e.hasError,f=e.isDisabled,h=e.isHiddenForScreenReaders,g=e.useCustomStyle,v=e.className,m=e.inputClassName,y=e.inputRef,b=e.onBlur,_=e.onFocus,E=e.onInput,k=e.onKeyDown,S=e.onKeyUp,D=s||"GlueTextInput-".concat(this.idNumber);return(0,Jt.jsx)("label",{className:g?v:"GlueTextInput",htmlFor:D,"aria-label":t,"aria-hidden":!!h||void 0,children:(0,Jt.jsx)("input",{className:g?m:Mn()("GlueTextInput__input",{"GlueTextInput__input--has-error":d}),tabIndex:h?"-1":void 0,type:o,id:D,name:r,"data-ta-id":a,"aria-invalid":d,disabled:f,minLength:l,autoFocus:p,placeholder:n||t,value:u?void 0:c,defaultValue:u,onBlur:b,onFocus:_,onChange:this.handleChange,onInput:u?void 0:E,onKeyDown:k,onKeyUp:S,ref:y,required:i})})}}]),n}(ht.PureComponent);function Wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}Hn.defaultProps={name:"",type:"text",isRequired:!1,taId:"",defaultValue:void 0,value:"",minLength:0,autoFocus:!1,hasError:!1,isDisabled:!1,isHiddenForScreenReaders:!1,useCustomStyle:!1,onBlur:function(){},onFocus:function(){},onChange:function(){},onInput:function(){},onKeyDown:function(){}};var Vn=function(e){(0,Yt.Z)(n,e);var t=Wn(n);function n(e){var r;return(0,dt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,Qt.Z)(r),"handleTogglePasswordVisible",(function(){var e=!r.state.passwordVisible;r.setState({passwordVisible:e}),r.props.onTogglePasswordVisibility&&r.props.onTogglePasswordVisibility(e)})),r.state={isEditing:!1,passwordVisible:!1},r.handleBlur=r.handleBlur.bind((0,Qt.Z)(r)),r.handleInput=r.handleInput.bind((0,Qt.Z)(r)),r}return(0,ft.Z)(n,[{key:"handleBlur",value:function(e){var t=e.target,n=e.relatedTarget;this.setState({isEditing:!1}),n&&(n.name||"submit"===n.type)&&this.validate(t)}},{key:"handleInput",value:function(){this.setState({isEditing:!0})}},{key:"validate",value:function(e){var t=this.props,n=t.name,r=t.onValidate;!t.noValidate&&r&&r(n,bn(e))}},{key:"renderPasswordEyeToggler",value:function(){var e=this.props.type,t=this.state.passwordVisible;return"password"!==e?null:(0,Jt.jsxs)(ht.Fragment,{children:[(0,Jt.jsx)("button",{type:"button",onClick:this.handleTogglePasswordVisible,tabIndex:"-1",className:"FormField--passwordEyeIcon ".concat(t?"passwordVisible":"")}),(0,Jt.jsx)("span",{tabIndex:"-1",className:"FormField--passwordEyeIcon--cross ".concat(t?"passwordVisible":"")})]})}},{key:"render",value:function(){var e=this.props,t=e.error,n=void 0===t?{}:t,r=e.noValidate,o=e.label,i=e.name,a=e.type,s=e.value,u=e.isRequired,c=e.minLength,l=e.autoFocus,p=e.isDisabled,d=e.onChange,f=e.onKeyUp,h=e.onFocus,g=e.rightIcon,v=void 0===g?null:g,m=this.state,y=m.isEditing,b=m.passwordVisible,_=v,E=a;return"password"===a&&b&&(E="text"),(0,Jt.jsxs)("div",{className:Mn()("FormField",{"FormField--no-validate":r}),children:[(0,Jt.jsx)(Hn,{label:o,name:i,type:E,taId:"".concat(i,"-field"),value:s,isRequired:u,minLength:c,autoFocus:l,hasError:!!n.message&&!y,isDisabled:p,onChange:d,onFocus:h,onKeyUp:f,onBlur:this.handleBlur,onInput:this.handleInput}),_&&(0,Jt.jsx)(_,{className:"FormField--rightIcon"}),this.renderPasswordEyeToggler(),!r&&!y&&n.message&&(0,Jt.jsx)(Jt.Fragment,{children:(0,Jt.jsx)(Un,{errorMessage:n.message})})]})}}]),n}(ht.PureComponent);const Kn=(0,f.$j)((function(){return{}}),(function(){return{}}))(Vn);var Yn=["type","name","label","classes","hasError"];function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var Xn=function(e){(0,Yt.Z)(n,e);var t=Jn(n);function n(){var e;(0,dt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleBlur=e.handleBlur.bind((0,Qt.Z)(e)),e}return(0,ft.Z)(n,[{key:"handleBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props.onBlur&&this.props.onBlur(e)}},{key:"render",value:function(){var e=this.props,t=e.type,n=void 0===t?"text":t,r=e.name,o=e.label,i=e.classes,a=e.hasError,s=(0,fe.Z)(e,Yn),u="".concat(r,"-field");return(0,Jt.jsxs)("span",{className:i,children:[(0,Jt.jsx)("label",{className:"glue-hidden-visually",htmlFor:u,children:o}),(0,Jt.jsx)("input",zn(zn({},s),{},{onBlur:this.handleBlur,type:n,name:r,id:u,"data-ta-id":u,className:Mn()("form-control Input",{"Input--has-error":a}),"aria-invalid":!!a,placeholder:o,required:!0}))]})}}]),n}(ht.PureComponent),$n=(new Date).getFullYear()-120,Qn=function(e,t,n){var r=null;return!function(e,t,n){return[e,t,n].reduce((function(e,t){return e&&!!t}),!0)}(e,t,n)?r="incomplete":function(e,t,n){var r=new Date(n,t-1,e);return!(r.getFullYear()<$n)&&r.getDate()===e&&r.getMonth()===t-1&&r.getFullYear()===n}(e,t,n)||(r="invalid"),r};function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var rr={BIG_ENDIAN:"big",LITTLE_ENDIAN:"little",MIDDLE_ENDIAN:"middle"},or=function(e){(0,Yt.Z)(n,e);var t=nr(n);function n(e){var r;return(0,dt.Z)(this,n),(r=t.call(this,e)).state={isEditing:!1},r.monthStrings=[wt.get("desktop.login.January"),wt.get("desktop.login.February"),wt.get("desktop.login.March"),wt.get("desktop.login.April"),wt.get("desktop.login.May"),wt.get("desktop.login.June"),wt.get("desktop.login.July"),wt.get("desktop.login.August"),wt.get("desktop.login.September"),wt.get("desktop.login.October"),wt.get("desktop.login.November"),wt.get("desktop.login.December")],r.handleInput=r.handleInput.bind((0,Qt.Z)(r)),r.handleBlur=r.handleBlur.bind((0,Qt.Z)(r)),r.handleFocus=r.handleFocus.bind((0,Qt.Z)(r)),r}return(0,ft.Z)(n,[{key:"handleInput",value:function(e){var t=e.target,n=t.name,r=t.value,o=t.validity,i=void 0===o?{}:o;this.setState({isEditing:!0});var a=parseInt(r,10);i.valueMissing||!isFinite(r)||isNaN(a)?this.props.onChange(tr(tr({},this.props.value),{},(0,s.Z)({},n,void 0))):this.props.onChange(tr(tr({},this.props.value),{},(0,s.Z)({},n,a)))}},{key:"handleBlur",value:function(e){var t=e.relatedTarget?e.relatedTarget.name:null,n=["day","month","year"].includes(t);this.setState({isEditing:n}),n||this.validate()}},{key:"handleFocus",value:function(e){this.setState({isEditing:!0});var t=e.relatedTarget?e.relatedTarget.name:null;!["day","month","year"].includes(t)&&this.props.onFocus&&this.props.onFocus()}},{key:"validate",value:function(){var e=this.props.value,t=e.day,n=e.month,r=e.year,o=Qn(t,n,r,this.props.minAge);this.props.onValidate("birthDate",o)}},{key:"renderYear",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(0,Jt.jsx)(Xn,{type:"number",name:"year",classes:"FormDate__input FormDate__year",label:wt.get("desktop.login.Year"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:$n,hasError:t.includes("year"),onFocus:this.handleFocus})}},{key:"renderMonth",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(0,Jt.jsxs)("select",{name:"month",id:"month-field",className:Mn()("form-control Input FormDate__input FormDate__month",{"Input--has-error":t.includes("month")}),autoFocus:n,defaultValue:e||"",required:!0,onChange:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,onFocus:this.handleFocus,children:[(0,Jt.jsx)("option",{value:"",disabled:!0,hidden:!0,children:wt.get("desktop.login.Month")}),this.monthStrings.map((function(e,t){return(0,Jt.jsx)("option",{value:t+1,children:e},t)}))]})}},{key:"renderDay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(0,Jt.jsx)(Xn,{type:"number",name:"day",classes:"FormDate__input FormDate__day",label:wt.get("desktop.login.Day"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:1,max:31,hasError:t.includes("day"),onFocus:this.handleFocus})}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.label,o=t.dateEndianness,i=t.error,a=void 0===i?{}:i,s=t.autoFocus,u=this.props.value,c=u.day,l=u.month,p=u.year,d=this.state.isEditing,f=["day","month","year"].filter((function(t){return!(d||!a.message)&&("incomplete"===a.code?!e.props.value[t]:"tooOld"!==a.code||"year"===t)})),h="";return h="big"===rr[o]?(0,Jt.jsxs)("div",{className:"FormDate__inputs",children:[this.renderYear(p,f,s),this.renderMonth(l,f),this.renderDay(c,f)]}):"little"===rr[o]?(0,Jt.jsxs)("div",{className:"FormDate__inputs",children:[this.renderDay(c,f,s),this.renderMonth(l,f),this.renderYear(p,f)]}):(0,Jt.jsxs)("div",{className:"FormDate__inputs",children:[this.renderMonth(l,f,s),this.renderDay(c,f),this.renderYear(p,f)]}),(0,Jt.jsxs)("div",{className:"FormDate",children:[(0,Jt.jsx)("label",{className:"FormDate__label ".concat(n,"-label"),htmlFor:"month-field",children:r}),h,!d&&a.message&&(0,Jt.jsx)(Jt.Fragment,{children:(0,Jt.jsx)(Un,{errorMessage:a.message})})]})}}]),n}(ht.PureComponent);or.defaultProps={value:{},dateEndianness:"MIDDLE_ENDIAN",minAge:13};const ir=(0,f.$j)((function(){return{}}),(function(){return{}}))(or);var ar=["name","label","options","value","showTitle","error","onValidate","onOptionFocus"];function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var lr=function(e){(0,Yt.Z)(n,e);var t=cr(n);function n(e){var r;return(0,dt.Z)(this,n),(r=t.call(this,e)).state={isEditing:!1},r.handleBlur=r.handleBlur.bind((0,Qt.Z)(r)),r.handleFocus=r.handleFocus.bind((0,Qt.Z)(r)),r}return(0,ft.Z)(n,[{key:"handleBlur",value:function(e){this.state={isEditing:!1},(e.relatedTarget?e.relatedTarget.name:null)!==this.props.name&&this.validate(e.target)}},{key:"handleFocus",value:function(e){this.state={isEditing:!0},this.props.onOptionFocus&&e&&e.target&&this.props.onOptionFocus(e.target.value)}},{key:"validate",value:function(e){var t=this.props,n=t.name,r=t.onValidate;r&&r(n,bn(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.label,o=t.options,i=t.value,a=t.showTitle,s=t.error,u=void 0===s?{}:s,c=(t.onValidate,t.onOptionFocus,(0,fe.Z)(t,ar)),l=this.state.isEditing,p="".concat(n,"-field"),d=Mn()("FormRadioSelect",{"FormRadioSelect--is-disabled":this.props.disabled});return(0,Jt.jsxs)("div",{className:d,children:[(0,Jt.jsx)("label",{className:a?"":"glue-hidden-visually",htmlFor:p,children:r}),o.map((function(t){var r="".concat(t.value,"-radio");return(0,Jt.jsxs)("span",{className:i===t.value?"checked":"",children:[(0,Jt.jsx)("input",ur(ur({},c),{},{name:n,type:"radio",id:r,className:"glue-hidden-visually",value:t.value,checked:i===t.value,onBlur:e.handleBlur,onFocus:e.handleFocus,required:!0,disabled:e.props.disabled})),(0,Jt.jsx)("label",{className:Mn()("FormRadioSelect__label",{"FormRadioSelect__label--has-error":!!u.message}),htmlFor:r,children:t.label})]},t.value)})),!l&&u.message&&(0,Jt.jsx)(Jt.Fragment,{children:(0,Jt.jsx)(Un,{errorMessage:u.message})})]})}}]),n}(ht.PureComponent);const pr=(0,f.$j)((function(){return{}}),(function(){return{}}))(lr);function dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var fr=function(e){(0,Yt.Z)(n,e);var t=dr(n);function n(){var e;(0,dt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleChange=e.handleChange.bind((0,Qt.Z)(e)),e}return(0,ft.Z)(n,[{key:"handleChange",value:function(e){this.props.isDisabled||this.props.onChange(e.target.checked)}},{key:"render",value:function(){var e="".concat(this.props.name,"-field"),t=Mn()("GlueCheckbox",{"GlueCheckbox--is-disabled":this.props.isDisabled});return(0,Jt.jsxs)("div",{className:t,children:[(0,Jt.jsx)("input",{className:"GlueCheckbox__input",id:e,name:this.props.name,checked:this.props.isChecked,type:"checkbox",onChange:this.handleChange,disabled:this.props.isDisabled}),(0,Jt.jsx)("label",{className:"GlueCheckbox__label",htmlFor:e,dangerouslySetInnerHTML:{__html:this.props.label}})]})}}]),n}(ht.PureComponent);function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}fr.defaultProps={label:"",name:"",isChecked:!1,isDisabled:!1,onChange:function(){}};var gr=function(e){(0,Yt.Z)(n,e);var t=hr(n);function n(e){var r;return(0,dt.Z)(this,n),(r=t.call(this,e)).handleClick=r.handleClick.bind((0,Qt.Z)(r)),r}return(0,ft.Z)(n,[{key:"handleClick",value:function(e){e.target.getAttribute("data-action")&&("showSettings"===e.target.getAttribute("data-action")&&this.props.openSettingsPage())}},{key:"render",value:function(){var e=this.props.errorData,t=e?yn(e.errorCategory,e.errorCode,e.errorReference):null;return t?(0,Jt.jsxs)("div",{className:"alert alert-danger ErrorMessage alert-icon",id:"login-message","data-ta-id":"login-message","data-testid":"login-message",role:"alert","aria-live":"assertive",onClick:this.handleClick,children:[(0,Jt.jsx)(rn.l,{iconSize:24}),(0,Jt.jsx)("span",{dangerouslySetInnerHTML:{__html:t}})]}):null}}]),n}(ht.Component);const vr=(0,f.$j)((function(e){var t=e.app.mode;return"welcome"===t&&(t="signup"),{errorData:e[t]&&e[t].errorData?e[t].errorData:null}}),(function(e){return{openSettingsPage:function(){return e(Kt.enterSettingsMode())},openSignupPage:function(){return e(Kt.openSignupPage())}}}))(gr);function mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var yr=function(e){(0,Yt.Z)(n,e);var t=mr(n);function n(e){var r;return(0,dt.Z)(this,n),(r=t.call(this,e)).state={tosAgreed:!1,privacyAgreed:!1},r.handleTosChange=r.handleTosChange.bind((0,Qt.Z)(r)),r.handlePrivacyChange=r.handlePrivacyChange.bind((0,Qt.Z)(r)),r.handleTosAndPrivacyChange=r.handleTosAndPrivacyChange.bind((0,Qt.Z)(r)),r.handleEulaChange=r.handleEulaChange.bind((0,Qt.Z)(r)),r.eulaId=n.getNextId(),r}return(0,ft.Z)(n,[{key:"handleTosChange",value:function(e){var t=this;this.setState({tosAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handlePrivacyChange",value:function(e){var t=this;this.setState({privacyAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handleTosAndPrivacyChange",value:function(e){var t=this;this.setState({tosAgreed:e,privacyAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handleEulaChange",value:function(){this.props.onChange(this.state.tosAgreed&&this.state.privacyAgreed)}},{key:"render",value:function(){var e=null,t='<a href="https://www.spotify.com/int/legal/end-user-agreement/" target="_new">'.concat(wt.get("desktop.login.TermsAndConditions"),"</a>"),n='<a href="https://www.spotify.com/int/legal/privacy-policy/" target="_new">'.concat(wt.get("desktop.login.PrivacyPolicy"),"</a>"),r=wt.get("desktop.login.SignupButton");return e=this.props.restrictions.pretick_eula?(0,Jt.jsxs)("div",{children:[!this.props.hideTermsAndConditions&&(0,Jt.jsx)("p",{className:"SignupForm__terms-and-conditions",dangerouslySetInnerHTML:{__html:wt.get("desktop.login.SignupAgree",r,t)}}),!this.props.hidePrivacyPolicy&&(0,Jt.jsx)("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:wt.get("desktop.login.PrivacyPolicyAgree",n)}})]}):this.props.restrictions.can_accept_licenses_in_one_step?(0,Jt.jsxs)("div",{className:"SignupForm__checkbox-container",children:[(0,Jt.jsx)(fr,{"data-ta-id":"agree-eula",name:"agree-eula-".concat(this.eulaId),label:this.props.restrictions.specific_licenses?wt.get("desktop.login.SignupAgreeCheckboxSpecificLicenses",t,n):wt.get("desktop.login.SignupAgreeCheckbox",t,n),onChange:this.handleTosAndPrivacyChange,isChecked:this.state.tosAgreed&&this.state.privacyAgreed,isDisabled:this.props.disabled}),this.props.restrictions.specific_licenses&&(0,Jt.jsx)("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:wt.get("desktop.login.PrivacyPolicyAgree",n)}})]}):(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("div",{className:"SignupForm__checkbox-container",children:(0,Jt.jsx)(fr,{"data-ta-id":"agree-tos",name:"agree-tos-".concat(this.eulaId),label:wt.get("desktop.login.TermsOfServiceAgreeCheckbox",t),onChange:this.handleTosChange,isChecked:this.state.tosAgreed,isDisabled:this.props.disabled})}),(0,Jt.jsx)("div",{className:"SignupForm__checkbox-container",children:(0,Jt.jsx)(fr,{"data-ta-id":"agree-privacy",name:"agree-privacy-".concat(this.eulaId),label:wt.get("desktop.login.PrivacyPolicyAgreeCheckbox",n),onChange:this.handlePrivacyChange,isChecked:this.state.privacyAgreed,isDisabled:this.props.disabled})})]}),(0,Jt.jsxs)("div",{className:"EulaAgreement",children:[e,this.props.error&&(0,Jt.jsx)(Jt.Fragment,{children:(0,Jt.jsx)(Un,{errorMessage:this.props.error.message})})]})}}],[{key:"getNextId",value:function(){var e=(n.instanceCount||0)+1;return n.instanceCount=e,e}}]),n}(ht.PureComponent);const br=(0,f.$j)((function(){return{}}),(function(){return{}}))(yr);n(83809);function _r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var Er=function(e){(0,Yt.Z)(n,e);var t=_r(n);function n(){var e;(0,dt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,s.Z)((0,Qt.Z)(e),"handleClick",(function(t){var n=e.props.method;t&&(t.preventDefault(),t.stopPropagation()),e.props.onClick(n)})),e}return(0,ft.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.type,r=t.label,o=t.isDisabled,i=t.method,a=i.substr(0,1).toUpperCase()+i.substr(1),u=Mn()("button","SocialButton","".concat(a,"Button"),(e={},(0,s.Z)(e,"".concat(a,"Button--login"),"login"===n),(0,s.Z)(e,"".concat(a,"Button--signup"),"signup"===n),e));return(0,Jt.jsx)("button",{type:"button",className:u,onClick:this.handleClick,"data-ta-id":"".concat(i,"-").concat(n,"-button"),disabled:o,children:r})}}]),n}(ht.PureComponent);function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var wr=function(e){(0,Yt.Z)(n,e);var t=Dr(n);function n(e){var r;return(0,dt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,Qt.Z)(r),"handleAgreeEulaChange",(function(e){var t=e?"checked":"unchecked";r.props.onInteraction("signup","click","eula-change-".concat(t),null,r.props.actionHash),r.setState({eulaAgreed:e,error:e?{}:r.state.error})})),(0,s.Z)((0,Qt.Z)(r),"handleOnClick",(function(){var e;r.state.eulaAgreed||r.props.restrictions.pretick_eula||r.props.hideEula?(e=r.props).onClick.apply(e,arguments):r.setState({error:{message:wt.get("desktop.login.agreeEula.notAccepted")}})})),r.state={eulaAgreed:r.props.restrictions.pretick_eula,error:{}},r}return(0,ft.Z)(n,[{key:"render",value:function(){var e=this;return(0,Jt.jsxs)("div",{className:"SignupFacebook",children:[(0,Jt.jsx)(Er,{method:"facebook",isDisabled:this.props.isDisabled,onClick:function(t){return e.handleOnClick(t,e.props.actionHash)},type:"signup",label:wt.get("desktop.login.SignupButtonFacebookNirvana")}),this.props.restrictions.pretick_eula||this.props.hideEula?null:(0,Jt.jsx)(br,{restrictions:this.props.restrictions,error:this.state.error,disabled:this.props.isDisabled,onChange:this.handleAgreeEulaChange})]})}}]),n}(ht.PureComponent);(0,s.Z)(wr,"defaultProps",{isDisabled:!1,hideEula:!1});const Or=(0,f.$j)((function(e){var t;return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions,actionHash:null!==(t=e.app.currentActionHash)&&void 0!==t?t:nn()}}),(function(e){return{onInteraction:function(t,n,r,o,i){return e(Kt.interaction(t,n,r,o,i))},onClick:function(t,n){e(Kt.signupWithAccounts(t,n)),e(Kt.interaction("signup","click","create-account-".concat(t),null,n))}}}),(function(e,t){return Sr(Sr(Sr({},e),t),{},{onClick:function(e,n){t.onClick(e,n)}})}))(wr);var Cr=function(e){var t=e.title;return(0,Jt.jsx)("p",{className:"FormTitleSeparator","aria-hidden":"true",children:t})};Cr.defaultProps={title:""};const Fr=Cr;function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var Ar=function(e){(0,Yt.Z)(n,e);var t=xr(n);function n(e){var r;return(0,dt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,Qt.Z)(r),"handleEmailValidate",(function(e,t){r.props.onValidate(e,t),t||r.props.validateEmail()})),(0,s.Z)((0,Qt.Z)(r),"handleEmailFocus",(function(){r.props.onInteraction("signup","click","input-email",null,r.props.actionHash)})),(0,s.Z)((0,Qt.Z)(r),"handlePasswordValidate",(function(e,t){r.props.onValidate(e,t),t||r.props.validatePassword()})),(0,s.Z)((0,Qt.Z)(r),"handlePasswordFocus",(function(){r.props.onInteraction("signup","click","input-password",null,r.props.actionHash)})),(0,s.Z)((0,Qt.Z)(r),"handleNameFocus",(function(){r.props.onInteraction("signup","click","input-name",null,r.props.actionHash)})),(0,s.Z)((0,Qt.Z)(r),"handleGenderOptionFocus",(function(e){r.props.onInteraction("signup","click","input-gender-".concat(e),null,r.props.actionHash)})),(0,s.Z)((0,Qt.Z)(r),"handleInputChange",(function(e){var t=e.target,n=t.name,o=t.value;r.props.updateData((0,s.Z)({},n,o)),r.setState({isEditing:!0})})),(0,s.Z)((0,Qt.Z)(r),"handleBirthDateChange",(function(e){r.props.updateData({birthDate:e})})),(0,s.Z)((0,Qt.Z)(r),"handleSendEmailChange",(function(e){r.props.updateData({sendEmail:e})})),(0,s.Z)((0,Qt.Z)(r),"handleShareDataChange",(function(e){r.props.updateData({shareData:e})})),(0,s.Z)((0,Qt.Z)(r),"handleAgreeEulaChange",(function(e){r.props.updateData({agreeEula:e})})),(0,s.Z)((0,Qt.Z)(r),"handleSubmit",(function(e){e&&e.preventDefault();var t=r.props,n=t.step,o=t.actionHash;r.props.onInteraction("signup","click",0===n?"continue":"create-account",null,o),r.setState({isEditing:!1});var i=!0,a={0:["email","password","name"],1:["birthDate","gender","agreeEula"]};!!r.props.errors&&Object.keys(r.props.errors).filter((function(e){return-1!==a[n].indexOf(e)})).some((function(e){return r.props.errors[e]&&r.props.errors[e].message}))&&(i=!1);var s=function(e){return function(t){r.props.data[t]||(r.props.onValidate(t,{code:e}),i=!1)}};switch(n){case 0:["email","password","name"].forEach(s("valueMissing"));break;case 1:var u=r.props.data.birthDate,c=u.day,l=u.month,p=u.year;p||r.props.onInteraction("signup","view","show-error-empty-year",null,o),l||r.props.onInteraction("signup","view","show-error-empty-month",null,o),c||r.props.onInteraction("signup","view","show-error-empty-date",null,o);var d=Qn(c,l,p,r.props.restrictions.minimum_age);d&&(r.props.onValidate("birthDate",{code:d}),i=!1),s("valueMissing")("gender"),s("notAccepted")("agreeEula")}if(i)switch(n){case 0:r.setStep(n+1);break;case 1:r.props.signup(o)}})),(0,s.Z)((0,Qt.Z)(r),"handleBack",(function(){var e=r.props.step;r.props.onInteraction("signup","click","back-step-".concat(e+1),null,r.props.actionHash),r.props.clearAllErrors(),e<=0?r.props.enterWelcomeMode():r.setStep(e-1)})),(0,s.Z)((0,Qt.Z)(r),"handleLogin",(function(){var e=nn();r.props.onInteraction("signup","click","open-page-login",null,e),r.props.enterLoginMode(e)})),(0,s.Z)((0,Qt.Z)(r),"setStep",(function(e){switch(e){case 0:r.props.enterSignupModeStep0();break;case 1:r.props.enterSignupModeStep1()}})),r.state={isEditing:!0},r}return(0,ft.Z)(n,[{key:"renderErrorMsg",value:function(){var e=this,t=Object.keys(this.props.errors).filter((function(t){return e.props.errors[t]&&e.props.errors[t].message}));return(0,Jt.jsx)("div",{className:"glue-hidden-visually",role:"alert","aria-live":this.state.isEditing?"off":"assertive",children:t.length>0?(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)("p",{children:wt.get("desktop.login.email.errorMessageA11y",t.length)}),(0,Jt.jsx)("ul",{children:t.map((function(t){return(0,Jt.jsx)("li",{children:e.props.errors[t].message},t)}))})]}):null})}},{key:"renderStep0",value:function(){var e=this,t=this.props,n=t.data,r=t.errors,o=t.isDisabled,i=t.onValidate;return(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)(Kn,{name:"email",type:"email",label:wt.get("desktop.login.SignupEmail"),value:n.email,onChange:this.handleInputChange,isDisabled:o,error:r.email,onValidate:this.handleEmailValidate,onFocus:this.handleEmailFocus,isRequired:!0,autoFocus:!0,rightIcon:Tn.B}),(0,Jt.jsx)(Kn,{name:"password",type:"password",label:wt.get("desktop.login.CreateAPassword"),value:n.password,onChange:this.handleInputChange,minLength:8,isRequired:!0,isDisabled:o,error:r.password,onValidate:this.handlePasswordValidate,onFocus:this.handlePasswordFocus,onTogglePasswordVisibility:function(t){e.props.onInteraction("signup","click",t?"toggle-password-visibility-show":"toggle-password-visibility-hide",null,e.props.actionHash)}}),(0,Jt.jsx)(Kn,{name:"name",label:wt.get("desktop.login.SignupName"),value:n.name,onChange:this.handleInputChange,isRequired:!0,isDisabled:o,error:r.name,onValidate:i,rightIcon:In.W,onFocus:this.handleNameFocus})]})}},{key:"renderStep1",value:function(){var e=this,t=this.props,n=t.data,r=t.errors,o=t.restrictions,i=t.isDisabled,a=t.onValidate,s=null;o.requires_marketing_opt_in_text?s=(0,Jt.jsx)("div",{className:"SignupForm__send-email-implicit",children:wt.get("desktop.login.SendEmailImplicitLabel")}):o.requires_marketing_opt_in&&(s=(0,Jt.jsx)("div",{className:"SignupForm__checkbox-container",children:(0,Jt.jsx)(fr,{name:"send-email",label:wt.get("desktop.login.SendEmailLabel"),onChange:this.handleSendEmailChange,isChecked:n.sendEmail,isDisabled:i})}));var u=[{label:wt.get("desktop.login.Female"),value:"female"},{label:wt.get("desktop.login.Male"),value:"male"}];return o.use_all_genders&&u.push({label:wt.get("desktop.login.NonBinary"),value:"neutral"}),o.use_other_gender&&u.push({label:wt.get("desktop.login.gender.Other"),value:"other"}),o.use_prefer_not_to_say_gender&&u.push({label:wt.get("desktop.login.gender.PreferNotToSay"),value:"prefer_not_to_say"}),(0,Jt.jsxs)("div",{children:[(0,Jt.jsx)(ir,{name:"birth-date",label:wt.get("desktop.login.WhatsYourSignupBirthDate"),value:n.birthDate,onChange:this.handleBirthDateChange,disabled:i,error:r.birthDate,onValidate:a,dateEndianness:o.date_endianness,minAge:o.minimum_age,autoFocus:!0,onFocus:function(){e.props.onInteraction("signup","click","input-birth-date",null,e.props.actionHash)}}),(0,Jt.jsx)(pr,{showTitle:!0,name:"gender",label:wt.get("desktop.login.WhatsYourSignupGender"),options:u,value:n.gender,onChange:this.handleInputChange,disabled:i,error:r.gender,onValidate:a,onOptionFocus:this.handleGenderOptionFocus}),s,(0,Jt.jsx)(br,{restrictions:o,error:r.agreeEula,disabled:i,onChange:this.handleAgreeEulaChange})]})}},{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.step;return(0,Jt.jsxs)("form",{onSubmit:this.handleSubmit,className:"SignupForm",children:[this.renderErrorMsg(),(0,Jt.jsx)(vr,{}),0===n?this.renderStep0():"",1===n?this.renderStep1():"",(0,Jt.jsx)(on.D,{type:"submit",disabled:t,id:"signup-button",onClick:this.handleSubmit,"data-ta-id":"signup-submit",fullWidth:!0,children:0===n?wt.get("desktop.login.Continue"):wt.get("desktop.login.SignupButton")}),0===n&&(0,Jt.jsxs)(ht.Fragment,{children:[(0,Jt.jsx)(Fr,{title:wt.get("desktop.login.SignupOr")}),(0,Jt.jsx)(Or,{})]}),(0,Jt.jsx)(Nn.o,{onClick:this.handleBack,children:wt.get("desktop.login.Back")}),0===n&&(0,Jt.jsx)("h3",{className:"FooterFormText",children:(0,Jt.jsx)("a",{className:"FooterFormText__NoUnderline",href:"#",id:"login-link",onClick:this.handleLogin,dangerouslySetInnerHTML:{__html:wt.get("desktop.login.AlreadyOnSpotifyLogin")}})})]})}}]),n}(ht.PureComponent);(0,s.Z)(Ar,"defaultProps",{errors:{},data:{},step:0});const Pr=(0,f.$j)((function(e){var t;return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions,email:e.signup.email,errors:e.signup.errors,data:e.signup.formData,actionHash:null!==(t=e.app.currentActionHash)&&void 0!==t?t:nn()}}),(function(e){return{signup:function(t){return e(Kt.signup(t))},enterLoginMode:function(t){return e(Kt.enterLoginMode(t))},enterSignupModeStep0:function(){return e(Kt.enterSignupModeStep0())},enterSignupModeStep1:function(){return e(Kt.enterSignupModeStep1())},updateData:function(t){return e(Kt.updateSignupData(t))},validateEmail:function(){return e(Kt.validateField("email"))},validatePassword:function(){return e(Kt.validateField("password"))},enterWelcomeMode:function(){return e(Kt.enterWelcomeMode())},clearAllErrors:function(){return e(Kt.clearAllErrors())},onValidate:function(t,n){if(n){var r=n.code||n,o={birthDate:{incomplete:wt.get("desktop.login.birthDate.incomplete"),invalid:wt.get("desktop.login.birthDate.invalid")},password:{valueMissing:wt.get("desktop.login.password.valueMissing"),tooShort:wt.get("desktop.login.password.tooShort")},email:{valueMissing:wt.get("desktop.login.email.valueMissing"),typeMismatch:wt.get("desktop.login.email.typeMismatch")},name:{valueMissing:wt.get("desktop.login.name.valueMissing")},gender:{valueMissing:wt.get("desktop.login.gender.valueMissing")},agreeEula:{notAccepted:wt.get("desktop.login.agreeEula.notAccepted")}};e(Kt.validateFieldFailure(t,{code:r,message:o[t]&&o[t][r]||""}))}else e(Kt.validateFieldSuccess(t))},onInteraction:function(t,n,r,o,i){return e(Kt.interaction(t,n,r,o,i))}}}))(Ar);function jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var Tr=function(e){(0,Yt.Z)(n,e);var t=jr(n);function n(){return(0,dt.Z)(this,n),t.apply(this,arguments)}return(0,ft.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.step;if(!e.restrictions)return(0,Jt.jsx)($t,{delay:2e3});var n=0===t?wt.get("desktop.login.SignupHeroText"):wt.get("desktop.login.SignupAlmostDone");return(0,Jt.jsxs)("main",{className:"Signup","data-testid":"signup","aria-labelledby":"signup-form-title",id:"signup","data-ta-id":"signup-form",children:[(0,Jt.jsx)("h1",{className:"HeroText",id:"signup-form-title",children:n}),(0,Jt.jsx)(Pr,{step:t})]})}}]),n}(ht.PureComponent);const Ir=(0,f.$j)((function(e){return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions}}))(Tr);n(71541);function Nr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var Rr=function(e){(0,Yt.Z)(n,e);var t=Nr(n);function n(){var e;(0,dt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleChange=e.handleChange.bind((0,Qt.Z)(e)),e}return(0,ft.Z)(n,[{key:"handleChange",value:function(){this.props.isDisabled||this.props.onChange(!this.props.isActive)}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.isDisabled,r=e.labelId,o=e.taId;return(0,Jt.jsxs)("div",{className:Mn()("GlueToggle",{"GlueToggle--is-active":t,"GlueToggle--is-disabled":n}),children:[(0,Jt.jsx)("input",{type:"checkbox",name:r,id:r,className:"glue-hidden-visually",onChange:this.handleChange,checked:t,disabled:n,"data-ta-id":o}),(0,Jt.jsx)("div",{className:"GlueToggle__toggle",onClick:this.handleChange,"aria-hidden":"true",children:(0,Jt.jsx)("div",{className:"GlueToggle__toggle-inner"})})]})}}]),n}(ht.PureComponent);function Mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}Rr.defaultProps={isActive:!1,isDisabled:!1,onChange:function(){}};var Zr=function(e){(0,Yt.Z)(n,e);var t=Mr(n);function n(){return(0,dt.Z)(this,n),t.apply(this,arguments)}return(0,ft.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.label,r=e.checked,o=e.disabled,i=e.onChange,a="".concat(t,"-field");return(0,Jt.jsxs)("div",{className:"FormToggle",children:[(0,Jt.jsx)("label",{htmlFor:a,"data-ta-id":"remember-me-label",children:n}),(0,Jt.jsx)(Rr,{labelId:a,isActive:r,onChange:i,taId:"remember-me-slider",isDisabled:o})]})}}]),n}(ht.PureComponent);function Lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var Ur=function(e){(0,Yt.Z)(n,e);var t=Lr(n);function n(e){var r;return(0,dt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,Qt.Z)(r),"handleForgotPasswordLinkClick",(function(){r.props.onInteraction("login","click","reset-password",null,r.props.actionHash)})),r.state={username:r.props.username,password:"",rememberMe:!0},["handleSubmit","handleUsernameChange","handleUsernameFocus","handlePasswordChange","handlePasswordFocus","handleRememberMeChange"].forEach((function(e){r[e]=r[e].bind((0,Qt.Z)(r))})),r}return(0,ft.Z)(n,[{key:"handleUsernameChange",value:function(e){var t=e.target;this.setState({username:t.value})}},{key:"handleUsernameFocus",value:function(){this.props.onInteraction("login","click","input-email",null,this.props.actionHash)}},{key:"handlePasswordChange",value:function(e){var t=e.target;this.setState({password:t.value})}},{key:"handlePasswordFocus",value:function(){this.props.onInteraction("login","click","input-password",null,this.props.actionHash)}},{key:"handleRememberMeChange",value:function(){this.setState({rememberMe:!this.state.rememberMe})}},{key:"handleSubmit",value:function(e){e&&e.preventDefault();var t=this.state.username?this.state.username.trim():null,n=this.state,r=n.password,o=n.rememberMe,i=this.props.actionHash;this.props.onInteraction("login","click","login-email",null,i),t&&r?this.props.login({username:t,password:r,rememberMe:o},!1,i):t?r||this.props.onInteraction("login","view","show-error-empty-password",null,i):this.props.onInteraction("login","view","show-error-empty-email",null,i)}},{key:"render",value:function(){var e=this.props.isDisabled;return(0,Jt.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,Jt.jsx)("h3",{className:"glue-hidden-visually",children:wt.get("desktop.login.LoginWithEmailTitle")}),(0,Jt.jsx)(vr,{}),(0,Jt.jsx)(Kn,{name:"username",label:wt.get("desktop.login.LoginUsernameOrEmail"),value:this.state.username||"",onChange:this.handleUsernameChange,onFocus:this.handleUsernameFocus,isDisabled:e,autoFocus:!0,noValidate:!0,rightIcon:Tn.B}),(0,Jt.jsx)(Kn,{name:"password",type:"password",label:wt.get("desktop.login.LoginPassword"),value:this.state.password,onChange:this.handlePasswordChange,onFocus:this.handlePasswordFocus,isDisabled:e,noValidate:!0}),(0,Jt.jsx)("a",{className:"LoginForm__reset-password",href:"https://www.spotify.com/redirect/password-reset",target:"_new",onClick:this.handleForgotPasswordLinkClick,children:wt.get("desktop.login.forgotPassLink")}),(0,Jt.jsx)(Zr,{name:"remember-me",label:wt.get("desktop.login.RememberMeLabel"),checked:this.state.rememberMe,onChange:this.handleRememberMeChange,disabled:e}),(0,Jt.jsx)("button",{type:"submit",className:"button button-white LoginForm__login-button",disabled:e,id:"login-button","data-ta-id":"login-button",children:wt.get("desktop.login.LoginButton")})]})}}]),n}(ht.PureComponent);const Br=(0,f.$j)((function(e){var t;return{isDisabled:!!e.login.loginInProgress,username:e.login.username,actionHash:null!==(t=e.app.currentActionHash)&&void 0!==t?t:nn()}}),(function(e){return{login:function(t,n,r){return e(Kt.login(t,n,r))},onInteraction:function(t,n,r,o,i){return e(Kt.interaction(t,n,r,o,i))}}}))(Ur);function Gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var Vr=function(e){(0,Yt.Z)(n,e);var t=Wr(n);function n(){return(0,dt.Z)(this,n),t.apply(this,arguments)}return(0,ft.Z)(n,[{key:"componentWillUnmount",value:function(){this.props.clearErrors()}},{key:"handleSignup",value:function(){var e=nn();this.props.enterSignupMode(e),this.props.onInteraction("login","click","open-page-signup",null,e)}},{key:"getSignupLink",value:function(){var e=this;return(0,Jt.jsx)("a",{className:"FooterFormText__NoUnderline",href:"#",id:"signup-link",onClick:function(){return e.handleSignup()},"data-ta-id":"signup-link",dangerouslySetInnerHTML:{__html:wt.get("desktop.login.DontHaveAnAccountSignup")}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isDisabled,r=t.actionHash;return(0,Jt.jsxs)("main",{className:"Login","data-testid":"login","aria-labelledby":"login-form-title",id:"login","data-ta-id":"login-form",children:[(0,Jt.jsx)("h1",{className:"HeroText",id:"login-form-title",children:wt.get("desktop.login.LoginHeroText")}),(0,Jt.jsx)(Br,{}),(0,Jt.jsx)(Fr,{title:wt.get("desktop.login.SignupOr")}),(0,Jt.jsx)(Er,{method:"facebook",isDisabled:n,onClick:function(t){return e.props.onSocialButtonClick(t,r)},type:"login",label:wt.get("desktop.login.ContinueWithFacebook")}),(0,Jt.jsx)(Er,{method:"google",isDisabled:n,onClick:function(t){return e.props.onSocialButtonClick(t,r)},type:"login",label:wt.get("desktop.login.ContinueWithGoogle")}),(0,Jt.jsx)(Er,{method:"apple",isDisabled:n,onClick:function(t){return e.props.onSocialButtonClick(t,r)},type:"login",label:wt.get("desktop.login.ContinueWithApple")}),(0,Jt.jsx)("h3",{className:"FooterFormText",children:this.getSignupLink()})]})}}]),n}(ht.PureComponent);const Kr=(0,f.$j)((function(e){var t;return{isDisabled:!!e.login.loginInProgress,actionHash:null!==(t=e.app.currentActionHash)&&void 0!==t?t:nn()}}),(function(e){return{enterSignupMode:function(t){return e(Kt.enterSignupMode(t))},onInteraction:function(t,n,r,o,i){return e(Kt.interaction(t,n,r,o,i))},onSocialButtonClick:function(t,n){e(Kt.loginWithAccounts(t,n)),e(Kt.interaction("login","click","login-".concat(t),null,n))},clearErrors:function(){return e(Kt.loginClearErrors())}}}),(function(e,t){return Hr(Hr(Hr({},e),t),{},{onSocialButtonClick:function(e,n){t.onSocialButtonClick(e,n)}})}))(Vr);function Yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var qr=function(e){(0,Yt.Z)(n,e);var t=Yr(n);function n(){return(0,dt.Z)(this,n),t.apply(this,arguments)}return(0,ft.Z)(n,[{key:"render",value:function(){var e="signup"===this.props.operationUsed?wt.get("desktop-auth.login.redirecting-to-browser-signup"):wt.get("desktop-auth.login.redirecting-to-browser-login");return(0,Jt.jsx)("main",{children:(0,Jt.jsx)("h1",{className:"HeroText __redirect",children:e})})}}]),n}(ht.PureComponent);const zr=(0,f.$j)((function(e){return{operationUsed:e.experimentWebAuthReducer.operationUsed}}))(qr);var Jr=n(24543);const Xr="mpdBa62OP4Fr5wvCsa89",$r="acVhMt5pELcXQyLaaPuV",Qr="AavUTirpKSAHapguSAy0",eo="SkbGMKYv49KtJNB5XxdX",to="qfjicQPaTTPrLWJWRxMQ";var no=function(e){var t=e.id,n=e.type,r=e.placeHolder,o=e.inputRef,i=e.handleOnChange;return(0,Jt.jsx)("input",{type:n||"text",id:t,"data-testid":t,className:eo,placeholder:r,ref:o,onChange:i})},ro=function(e){var t=e.children,n=e.label;return(0,Jt.jsx)(Jr.c,{label:n,className:to,children:t})},oo=n(19496),io=n.n(oo);const ao="zrvvPyoxE6wQNqnu0yWA",so="jmu6DFPvhxRl0wSfmv2O";var uo=function(e){var t=e.value,n=e.id,r=e.children,o=e.disabled,i=e.onSelect,a=e.className,u=e.dir;return(0,Jt.jsx)("span",{className:a,children:(0,Jt.jsx)("select",{className:Mn()(ao,(0,s.Z)({},so,"Safari"===io().parse(window.navigator.userAgent).browser.name)),value:null==t?void 0:t.toString(),id:n,disabled:o,onBlur:function(){},onChange:function(e){i(e.target.value)},dir:u,children:r})})},co=(n(82),(0,ht.createContext)(void 0)),lo=function(e){var t=e.children,n=(0,ht.useState)(!1),r=(0,lt.Z)(n,2),o=r[0],i=r[1],a=(0,ht.useState)(new Set),s=(0,lt.Z)(a,2),u=s[0],c=s[1],l=(0,ht.useCallback)((function(e,t){c((function(n){if(n.has(e)===t)return n;var r=new Set(n);return t?r.add(e):r.delete(e),r}))}),[]),p=u.size>0;return(0,Jt.jsx)(co.Provider,{value:{sectionMatch:o,setSectionMatch:i,sectionContainsMatch:p,setSectionFilterMatchQueryValue:l},children:t})},po=function(){var e=(0,ht.useContext)(co);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e},fo=((0,n(68267).Ue)((function(e){return{lastFilterState:"",lastFilteredUri:"",setLastState:function(t,n){e({lastFilterState:t,lastFilteredUri:n})}}})),(0,ht.createContext)({setFilter:function(){throw new Error("setFilter must be used within a FilterProvider")},filter:""}));n(74772);n(96807);function ho(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return go(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return go(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function go(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vo=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),mo=/[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,yo=/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])/,bo=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/;function _o(e){return null!==e&&mo.test(e)}function Eo(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||_o(e))}function ko(e){return null!==e&&yo.test(e)}function So(e){return null!==e&&bo.test(e)}var Do=function(){function e(t,n,r){if((0,dt.Z)(this,e),n<0||r<0||n+r>t.length)throw new RangeError;this.data=t,this.offset=n,this.length=r,this.position=0}return(0,ft.Z)(e,[{key:"toString",value:function(){return this.data.slice(this.offset,this.offset+this.length).join("")}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t<0||n>this.length)throw new RangeError;var r=this.offset+t,o=n-t;return new e(this.data,r,o)}},{key:"nextCodePoint",value:function(){return this.position===this.length?null:this.data[this.offset+this.position++]}}],[{key:"from",value:function(t){var n=Array.from(t.normalize("NFC"));return new e(n,0,n.length)}}]),e}();function wo(e){var t;do{t=e.nextCodePoint()}while(null!==t&&_o(t)||ko(t));return t}function Oo(e,t){var n=wo(e),r=wo(t);if(null===r)return{offset:0,length:0};for(var o=e.offset+e.position-1,i=e.offset+e.position;;){if(null===n&&null===r)return{offset:o,length:i-o};if(null===r)return{offset:o,length:i-o};if(null===n)return null;if(0!==vo.compare(n,r))return null;i=e.offset+e.position,n=wo(e),r=wo(t)}}function Co(e,t){var n,r,o;do{r=e.position,n=e.nextCodePoint()}while(null!==n&&_o(n));if(null!=t&&t.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){var i=n;r=e.position;do{o=e.position,n=e.nextCodePoint()}while(null!==n&&n!==i);return null===n&&r===o?null:e.slice(r,o)}do{if(o=e.position,null!=t&&t.segmentCJKUnifieIdeographs&&So(n))break;n=e.nextCodePoint()}while(null!==n&&!Eo(n));return null===n&&r===o?null:e.slice(r,o)}function Fo(e){return Co(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function xo(e){return Co(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Ao(e,t){for(var n=[],r=xo(e);null!==r;r=xo(e)){var o=Oo(r,t.slice());null===o?null===(o=Oo(e.slice(r.offset),t.slice()))||n.push(o):n.push(o)}return n}function Po(e,t){return e.offset===t.offset&&e.length===t.length}var jo=function(e,t){return"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e){for(var t=Do.from(e),n=[],r=Fo(t);null!==r;r=Fo(t)){for(var o=[],i=0;i<(arguments.length<=1?0:arguments.length-1);++i){var a,s=i+1<1||arguments.length<=i+1?void 0:arguments[i+1],u=ho(Ao(Do.from(s),r));try{for(u.s();!(a=u.n()).done;){var c=a.value;o.push({text:s,range:c})}}catch(e){u.e(e)}finally{u.f()}}if(0===o.length)return null;n.push.apply(n,(0,he.Z)(o.filter((function(e,t,n){return e.range.length>0&&n.findIndex((function(t){return Po(e.range,t.range)}))===t}))))}return n.length>0?n:null}(e,t):"boolean"!=typeof e||e};const To={section:"c6TyNYOUJRIsjYZJZofy",hidden:"V4Bh2Ch7KvYUdn2s9ZdX"};function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ro(e){var t=e.children,n=e.filterMatchQuery,r=(0,ht.useContext)(fo).filter,o=po(),i=o.setSectionMatch,a=o.sectionContainsMatch,u=jo(r,n);(0,ht.useEffect)((function(){i(u)}),[u,i]);var c=!u&&!a;return(0,Jt.jsx)("div",{className:Mn()(To.section,(0,s.Z)({},To.hidden,c)),children:t})}function Mo(e){return(0,Jt.jsx)(lo,{children:(0,Jt.jsx)(Ro,No({},e))})}n(50103);var Zo=n(9237),Lo=n.n(Zo);const Uo={highlightedText:"M0E2Al6URHV3iyoDbvi_"};var Bo=["searchWords","textToHighlight"];function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ho(e){var t=e.searchWords,n=e.textToHighlight,r=(0,fe.Z)(e,Bo);return 0===t.length||t.every((function(e){return!e}))?(0,Jt.jsx)(Jt.Fragment,{children:n}):(0,Jt.jsx)(Lo(),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({highlightClassName:Uo.highlightedText,searchWords:t,textToHighlight:n,autoEscape:!0},r))}function Wo(e){var t=e.children,n=(0,ht.useContext)(fo).filter;return(0,Jt.jsx)(cn.D,{as:"h2",variant:"cello",semanticColor:"textBase",children:(0,Jt.jsx)(Ho,{searchWords:[n],textToHighlight:t})})}var Vo=n(94320);const Ko="gvcgOXnAiNKEe_z92_lw";function Yo(e){var t=e.onClick;return(0,Jt.jsx)(Vo.P,{className:Ko,onClick:t,children:wt.get("settings.restartApp")})}var qo=function(e,t,n){var r="".concat(e,":").concat(t);switch(n){case Ot:r+="@http";break;case Ct:r+="@socks4";break;case Ft:r+="@socks5"}return r},zo=function(e){var t=e.addr,n=e.mode,r=e.pass,o=e.user,i=e.setValue,a=e.restartContainer,s=e.fullWidth,u=(0,ht.useRef)(null),c=(0,ht.useRef)(null),l=(0,ht.useRef)(null),p=(0,ht.useRef)(null),d=(0,ht.useState)(""),f=(0,lt.Z)(d,2),h=f[0],g=f[1],v=(0,ht.useState)(""),m=(0,lt.Z)(v,2),y=m[0],b=m[1],_=(0,ht.useState)(!1),E=(0,lt.Z)(_,2),k=E[0],S=E[1];(0,ht.useEffect)((function(){var e=(null==t?void 0:t.split(/[:@]+/))||["",""],n=(0,lt.Z)(e,2),r=n[0],o=n[1];g(r),b(o),u.current&&(u.current.value=r),c.current&&(c.current.value=o)}),[t]),(0,ht.useEffect)((function(){p.current&&r&&(p.current.value=r.toString())}),[r]),(0,ht.useEffect)((function(){l.current&&o&&(l.current.value=o.toString())}),[o]);var D=(0,ht.useCallback)((function(e){var t=e.target,r=qo(t.value,y,n||0);g(t.value),i("network.proxy.addr",r),S(!0)}),[n,y,i]),w=(0,ht.useCallback)((function(e){var t=e.target,r=qo(h,t.value,n||0);b(t.value),i("network.proxy.addr",r),S(!0)}),[n,h,i]),O=(0,ht.useCallback)((function(e){var t=e.target;i("network.proxy.user",t.value),S(!0)}),[i]),C=(0,ht.useCallback)((function(e){var t=e.target;i("network.proxy.pass",t.value),S(!0)}),[i]),F=0!==n&&1!==n,x=n!==Ct;return(0,Jt.jsxs)(Mo,{filterMatchQuery:wt.get("desktop.settings.proxy.title"),children:[(0,Jt.jsx)(Wo,{children:wt.get("desktop.settings.proxy.title")}),(0,Jt.jsxs)("div",{className:Mn()($r,s?Qr:null),children:[(0,Jt.jsx)(ro,{label:wt.get("desktop.settings.proxy.type"),children:(0,Jt.jsx)(uo,{id:"network.proxy.mode",value:n,onSelect:function(e){var t=parseInt(e,10);i("network.proxy.mode",t),S(!0)},children:At.map((function(e){var t=e.enumKey,n=e.enumValue;return(0,Jt.jsx)("option",{value:n,"data-testid":t,children:xt[t]?xt[t].label():""},t)}))})}),F?(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsxs)("div",{className:Xr,children:[(0,Jt.jsx)(ro,{label:wt.get("desktop.settings.proxy.host"),children:(0,Jt.jsx)(no,{id:"network.proxy.host",handleOnChange:D,placeHolder:wt.get("desktop.settings.proxy.host"),inputRef:u})}),(0,Jt.jsx)(ro,{label:wt.get("desktop.settings.proxy.port"),children:(0,Jt.jsx)(no,{id:"network.proxy.port",type:"number",handleOnChange:w,placeHolder:wt.get("desktop.settings.proxy.port"),inputRef:c})})]}),(0,Jt.jsxs)("div",{className:x?Xr:void 0,children:[(0,Jt.jsx)(ro,{label:wt.get("desktop.settings.proxy.user"),children:(0,Jt.jsx)(no,{id:"network.proxy.user",handleOnChange:O,placeHolder:wt.get("desktop.settings.proxy.user"),inputRef:l})}),x?(0,Jt.jsx)(ro,{label:wt.get("desktop.settings.proxy.pass"),children:(0,Jt.jsx)(no,{id:"network.proxy.pass",handleOnChange:C,placeHolder:wt.get("desktop.settings.proxy.pass"),type:"password",inputRef:p})}):null]})]}):null,k&&(0,Jt.jsx)("div",{children:(0,Jt.jsx)(Yo,{onClick:a})})]})]})};function Jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Xo=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const $o=(0,f.$j)((function(e){return{settings:{proxy:e.settings.proxy}}}),(function(e){return{fetchProxySettings:function(){e(Kt.fetchProxySettings())},updateProxySettings:function(t){e(Kt.updateProxySettings(t))},restartClient:function(){e(Kt.restartClient())}}}))((function(e){var t=e.settings,n=void 0===t?{proxy:{mode:0,address:"",username:"",password:""}}:t,r=e.fetchProxySettings,o=void 0===r?function(){}:r,i=e.updateProxySettings,a=void 0===i?function(){}:i,u=e.restartClient,c=void 0===u?function(){}:u;(0,ht.useEffect)((function(){o()}),[o]);var l=(0,ht.useCallback)((function(e,t){if(function(e){return!!Xo.includes(e)}(e)){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.proxy);switch(e){case"network.proxy.mode":r.mode=t;break;case"network.proxy.addr":r.address=t;break;case"network.proxy.user":r.username=t;break;case"network.proxy.pass":r.password=t}a(r)}return Promise.resolve()}),[n,a]);return(0,Jt.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,Jt.jsx)("h1",{className:"HeroText",id:"settings-form-title",children:wt.get("desktop.login.PreferencesLink")}),(0,Jt.jsx)(zo,{mode:n.proxy.mode,addr:n.proxy.address,user:n.proxy.username,pass:n.proxy.password,setValue:l,restartContainer:c,fullWidth:!0})]})}));function Qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var ei=function(e){(0,Yt.Z)(n,e);var t=Qo(n);function n(e){var r;return(0,dt.Z)(this,n),(r=t.call(this,e)).handleSettingsClick=r.goToSettingsPage.bind((0,Qt.Z)(r)),r.handleBackToLoginClick=r.handleBackToLoginClick.bind((0,Qt.Z)(r)),r}return(0,ft.Z)(n,[{key:"handleSignupClick",value:function(){var e=this.props,t=e.openSignupPage,n=e.onInteraction,r=nn();t(r),n("login/welcome","click","open-page-signup",null,r)}},{key:"handleBackToLoginClick",value:function(e){e.preventDefault(),this.props.openLoginPage(),this.props.onInteraction(this.props.mode,"click","back-to-login")}},{key:"goToSettingsPage",value:function(e){e.preventDefault(),this.props.openSettingsPage(),this.props.onInteraction(this.props.mode,"click","open-page-settings")}},{key:"renderPreferencesLink",value:function(){return(0,Jt.jsx)("a",{className:"Footer__link",href:"#",onClick:this.handleSettingsClick,"data-ta-id":"login-footer-settings",children:wt.get("desktop.login.PreferencesLink")})}},{key:"renderBackToLoginLink",value:function(){return(0,Jt.jsx)("a",{className:"Footer__link",href:"#",onClick:this.handleBackToLoginClick,"data-ta-id":"login-footer-settings-back-to-login",children:wt.get("desktop.login.Back")})}},{key:"renderTryAgain",value:function(){var e=this;return(0,Jt.jsxs)(Jt.Fragment,{children:[(0,Jt.jsx)("span",{children:wt.get("desktop-auth.login.not-seeing-browser")})," ",(0,Jt.jsx)("a",{href:"#",onClick:function(){return e.props.tryAgainHandler()},children:wt.get("desktop-auth.login.try-again")})]})}},{key:"renderSignupLink",value:function(){var e=this;return(0,Jt.jsx)("a",{className:"Footer__NoUnderline",href:"#",id:"signup-link",onClick:function(){return e.handleSignupClick()},"data-ta-id":"welcome-signup-link",dangerouslySetInnerHTML:{__html:wt.get("desktop.login.DontHaveAnAccountSignup")}})}},{key:"renderRussiaLegalFormLink",value:function(){return(0,Jt.jsx)("div",{children:(0,Jt.jsx)("a",{className:"Footer__link",href:"https://support.spotify.com/ru-ru/contact-spotify-legal-form/",target:"_blank",rel:"noopener",children:"Форма для Ваших обращений"})})}},{key:"renderMode",value:function(e,t){return"login"===e||"welcome"===e&&t?this.renderPreferencesLink():"settings"===e?this.renderBackToLoginLink():"open-browser"===e?this.renderTryAgain():"welcome"===e?this.renderSignupLink():null}},{key:"render",value:function(){var e=this.props,t=e.mode,n=e.country,r=e.isAuthOnWebEnabled;return(0,Jt.jsxs)("footer",{className:"Footer",role:"contentinfo",children:[this.renderMode(t,r),"RU"===n&&this.renderRussiaLegalFormLink()]})}}]),n}(ht.PureComponent);const ti=(0,f.$j)((function(e){var t;return{country:null===(t=e.signup.restrictions)||void 0===t?void 0:t.country}}),(function(e){return{tryAgainHandler:function(){e(Kt.abortLoginWithAccounts()),e(Kt.enterWelcomeMode())},openLoginPage:function(){e(Kt.enterLoginMode())},openSignupPage:function(t){return e(Kt.enterSignupMode(t))},openSettingsPage:function(){return e(Kt.enterSettingsMode())},onInteraction:function(t,n,r,o,i){return e(Kt.interaction(t,n,r,o,i))}}}))(ei);function ni(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var ri=function(e){(0,Yt.Z)(n,e);var t=ni(n);function n(){return(0,dt.Z)(this,n),t.apply(this,arguments)}return(0,ft.Z)(n,[{key:"render",value:function(){return(0,Jt.jsxs)("header",{className:"Header",children:[(0,Jt.jsx)("h1",{className:"glue-hidden-visually",children:"Spotify"}),(0,Jt.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""})]})}}]),n}(ht.PureComponent),oi=n(49823),ii=n(46994),ai=n(38674),si=n(65481),ui=(0,si.JP)({name:"enableAuthOnWeb",description:"Property to enable experiment to use the web authentication flow for Desktop application.",default:!1}),ci=(0,si.JP)({name:"enableAuthOnWebLogin",description:"Property to enable experiment to use the web authentication flow for Desktop application for login.",default:!1});function li(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,zt.Z)(e);if(t){var o=(0,zt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,qt.Z)(this,n)}}var pi=function(e){(0,Yt.Z)(n,e);var t=li(n);function n(){return(0,dt.Z)(this,n),t.apply(this,arguments)}return(0,ft.Z)(n,[{key:"renderFakeWebPlayer",value:function(){return(0,Jt.jsxs)("div",{className:"fakeWebPlayer",children:[(0,Jt.jsx)("aside",{}),(0,Jt.jsxs)("footer",{children:[(0,Jt.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,Jt.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,Jt.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,Jt.jsx)("main",{children:(0,Jt.jsx)("div",{className:"fakeWebPlayer__content"})})]})}},{key:"renderMode",value:function(e,t,n,r,o){return"settings"===e?(0,Jt.jsx)($o,{}):n?(0,Jt.jsx)(jn,{eventSender:o}):"signup"===e?(0,Jt.jsx)(Ir,{step:t}):r?(0,Jt.jsx)(jn,{eventSender:o,loginOnly:!0}):"welcome"===e?(0,Jt.jsx)(un,{}):"login"===e?(0,Jt.jsx)(Kr,{}):"open-browser"===e?(0,Jt.jsx)(zr,{}):null}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.mode,r=e.loggedIn,o=e.previousMode,i=e.throbberDelay,a=e.signupStep,s=e.previousSignupStep,u=e.isAuthOnWebEnabled,c=e.isAuthOnWebLoginEnabled,l=e.eventSender;if(t||!n)return(0,Jt.jsx)($t,{delay:i});if(r)return null;var p=o?"__".concat(n," __").concat(o,"-to-").concat(n):"";return"signup"===n&&Number.isInteger(s)&&(p+=" __signup_step_".concat(s,"_to_").concat(a)),(0,Jt.jsxs)("main",{className:"App","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":n,children:[this.renderFakeWebPlayer(),(0,Jt.jsx)("div",{className:"App__content ".concat(p),children:(0,Jt.jsx)(ii.Z,{mode:"in-out",children:(0,Jt.jsx)(oi.Z,{timeout:{appear:0,enter:0,exit:650},children:(0,Jt.jsxs)("div",{className:"App__modal ".concat(p),children:[(0,Jt.jsx)(ri,{}),this.renderMode(n,a,u,c,l),(0,Jt.jsx)(ti,{mode:n,isAuthOnWebEnabled:u||c})]})},p)})})]},"main1")}}]),n}(ht.Component);(0,s.Z)(pi,"defaultProps",{throbberDelay:0,transitionLeaveTimeout:0});var di=(0,ai.yS)({isAuthOnWebEnabled:ui,isAuthOnWebLoginEnabled:ci});const fi=(0,f.$j)((function(e){return{mode:e.app.mode,previousMode:e.app.previousMode,signupStep:e.signup.step,previousSignupStep:e.signup.previousStep,loading:!!e.login.loading,loggedIn:!!e.login.loggedIn,throbberDelay:e.login.throbberDelay,transitionLeaveTimeout:e.login.redirectDelay}}))(di(pi));var hi=n(39366),gi=n(60874);function vi(){return(vi=(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://messages/v1/container/control",body:'{"type":"view_loaded", "name":"/loginUI"}'}),persistent:!1,onSuccess:function(){e()},onFailure:function(e,n){t(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const mi=function(e){return function(t){return function(n){var r=t(n);switch(n.type){case Kt.START_APP:!function(){vi.apply(this,arguments)}(),e.dispatch(Kt.getSignupRestrictions()),!m.getItem("lastUsername")?e.dispatch(Kt.enterWelcomeMode()):e.dispatch(Kt.enterLoginMode());break;case Kt.LOGIN_FAIL:var o=e.getState();if(n.loginType===Kt.LOGIN_TYPE_AUTOLOGIN){var i=o.app.mode;"welcome"===i?e.dispatch(Kt.enterWelcomeMode()):"login"===i?e.dispatch(Kt.enterLoginMode()):"signup"===i&&e.dispatch(Kt.enterSignupMode())}else{if("open-browser"===o.app.mode){var a=n.errorData,s=yn(a.errorCategory,a.errorCode,a.errorReference);"desktop_login_accounts"===a.errorCategory&&4===a.errorCode&&(s="signup"===o.experimentWebAuthReducer.operationUsed?wt.get("desktop-auth.login.signup-time-out"):wt.get("desktop-auth.login.login-time-out")),s?e.dispatch(Kt.enterWelcomeMode(s)):e.dispatch(Kt.enterWelcomeMode())}}break;case Kt.ENTER_SIGNUP_MODE:var u=e.getState().signup.restrictions;u?!1===u.is_country_launched&&e.dispatch(Kt.countryNotLaunched()):e.dispatch(Kt.getSignupRestrictions());break;case Kt.SIGNUP_RESTRICTIONS_SUCCESS:!1===n.restrictions.is_country_launched&&e.dispatch(Kt.countryNotLaunched());break;case Kt.SIGNUP_FAILURE:(n.errors.email||n.errors.password||n.errors.displayname)&&e.dispatch(Kt.enterSignupModeStep0());break;case Kt.COUNTRY_NOT_LAUNCHED:e.dispatch(Kt.openSignupPage(!0))}return r}}};function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const bi=function(e){var t=new An(e);return function(){return function(e){return function(n){var r=e(n);switch(n.type){case Kt.ENTER_LOGIN_MODE:t.logPageView({page:"login"});break;case Kt.LOGIN_SUCCESS:n.loginType===Kt.LOGIN_TYPE_EMAIL&&t.logAction({page:"login",action_type:"view",action_intent:"show-success-login-email"});break;case Kt.LOGIN_FAIL:n.loginType===Kt.LOGIN_TYPE_EMAIL&&n.errorData&&3===n.errorData.errorCode&&t.logAction({page:"login",action_type:"view",action_intent:"show-error-invalid-credential"});break;case Kt.ENTER_SIGNUP_MODE:t.logPageView({page:"signup"});break;case Kt.ENTER_SIGNUP_MODE_STEP_0:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-one"});break;case Kt.ENTER_SIGNUP_MODE_STEP_1:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-two"});break;case Kt.SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-signup-email"});break;case Kt.SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-signup-email",item_id:n.errors&&Object.keys(n.errors).join("|")});break;case Kt.FACEBOOK_SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-authentication-facebook"});break;case Kt.FACEBOOK_SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-authentication-facebook",item_id:n.errorData&&"".concat(n.errorData.errorCode," - ").concat(n.errorData.errorDescription)});break;case Kt.ENTER_WELCOME_MODE:t.logPageView({page:"login/welcome"});break;case Kt.ENTER_SETTINGS_MODE:t.logPageView({page:"login/settings"});break;case Kt.INTERACTION:t.logAction({page:n.page,action_type:n.interactionType,action_intent:n.intent,item_id:n.itemId,action_hash:n.actionHash});break;case Kt.VALIDATE_FIELD_FAILURE:if(n.error){var o=n.field,i=n.error.code,a=null,u=null;"valueMissing"===i?a="show-error-empty-".concat(o):["incomplete","invalid","typeMismatch","tooShort"].includes(i)?a="show-error-format-".concat(o):(a="show-error-".concat(o),u=n.error.message||""),null!==a&&t.logAction(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({page:"signup",action_type:"view",action_intent:a},u?{item_id:u}:{}))}}return r}}}},_i=function(e){window.location.href=e},Ei=function(){return function(e){return function(t){var n,r=e(t);return t.redirectTo?("xpui"!==t.redirectTo||(n="spotify:app:xpui",t.redirectDelay?setTimeout((function(){_i(n)}),t.redirectDelay):_i(n)),r):r}}};function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Di={errorMessage:null,currentActionHash:null};const wi=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Di,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Kt.ENTER_SIGNUP_MODE:return Si(Si({},t),{},{previousMode:t.mode,mode:"signup",currentActionHash:n.actionHash});case Kt.ENTER_LOGIN_MODE:return Si(Si({},t),{},{previousMode:t.mode,mode:"login",currentActionHash:n.actionHash});case Kt.LOGIN_BEFORE:case Kt.SIGNUP_ATTEMPT:case Kt.FACEBOOK_SIGNUP_ATTEMPT:return Si(Si({},t),{},{currentActionHash:null});case Kt.COUNTRY_NOT_LAUNCHED:return Si(Si({},t),{},{previousMode:t.mode,mode:"login"});case Kt.ENTER_WELCOME_MODE:return Si(Si({},t),{},{previousMode:t.mode,mode:"welcome",errorMessage:null!==(e=n.errorMessage)&&void 0!==e?e:null});case Kt.ENTER_SETTINGS_MODE:return Si(Si({},t),{},{previousMode:t.mode,mode:"settings"});default:return t}};function Oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fi={proxy:{mode:0,address:"",username:"",password:""}};const xi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fi,t=arguments.length>1?arguments[1]:void 0;return function(e){return e.type===Kt.SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS}(t)?Ci(Ci({},e),{},{proxy:{mode:t.data.mode,address:t.data.address,username:t.data.username,password:t.data.password}}):e};function Ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ji={step:0,isAttempting:!1,isSuccessful:void 0,errors:{},errorData:{},validated:{},formData:{name:"",email:"",password:"",birthDate:{day:void 0,month:void 0,year:void 0},gender:void 0,sendEmail:void 0,shareData:void 0,agreeEula:!1},restrictions:void 0};const Ti=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Kt.ENTER_SIGNUP_MODE_STEP_0:return Pi(Pi({},e),{},{previousStep:e.step,step:0});case Kt.ENTER_SIGNUP_MODE_STEP_1:return Pi(Pi({},e),{},{previousStep:e.step,step:1});case Kt.SIGNUP_RESTRICTIONS_SUCCESS:return Pi(Pi({},e),{},{formData:Pi(Pi({},e.formData),{},{sendEmail:!!t.restrictions.requires_marketing_opt_in_text||void 0,agreeEula:!!t.restrictions.pretick_eula}),restrictions:t.restrictions});case Kt.SIGNUP_RESTRICTIONS_FAILURE:return Pi(Pi({},e),{},{errorData:t.error});case Kt.SIGNUP_ATTEMPT:return Pi(Pi({},e),{},{isAttempting:!0,errorData:null});case Kt.SIGNUP_SUCCESS:return Pi(Pi({},e),{},{isAttempting:!0,isSuccessful:!0,errorData:null});case Kt.SIGNUP_FAILURE:return Pi(Pi({},e),{},{isAttempting:!1,isSuccessful:!1,errors:t.errors,errorData:null});case Kt.FACEBOOK_SIGNUP_ATTEMPT:return Pi(Pi({},e),{},{errorData:null,errors:{}});case Kt.FACEBOOK_SIGNUP_FAILURE:return Pi(Pi({},e),{},{errorData:t.errorData});case Kt.VALIDATE_FIELD_ATTEMPT:return Pi(Pi({},e),{},{errors:Pi(Pi({},e.errors),{},(0,s.Z)({},t.field,void 0))});case Kt.VALIDATE_FIELD_FAILURE:return Pi(Pi({},e),{},{errors:Pi(Pi({},e.errors),{},(0,s.Z)({},t.field,t.error)),validated:Pi(Pi({},e.validated),{},(0,s.Z)({},t.field,!1))});case Kt.VALIDATE_FIELD_SUCCESS:return Pi(Pi({},e),{},{errors:Pi(Pi({},e.errors),{},(0,s.Z)({},t.field,void 0)),validated:Pi(Pi({},e.validated),{},(0,s.Z)({},t.field,!0))});case Kt.UPDATE_SIGNUP_DATA:for(var n={},r=0,o=Object.keys(t.data);r<o.length;r++){n[o[r]]=void 0}return Pi(Pi({},e),{},{errors:Pi(Pi({},e.errors),n),formData:Pi(Pi({},e.formData),t.data)});case Kt.CLEAR_ALL_ERRORS:return Pi(Pi({},e),{},{errors:{}});default:return e}};function Ii(e){var t=(0,hi.MT)((0,hi.UY)({app:wi,login:O,settings:xi,signup:Ti}),void 0,(0,hi.md)(gi.Z,mi,bi(e),Ei));return t.subscribe((function(){var e=t.getState();e.login.username&&localStorage.setItem(_,e.login.username),e.login.utmParameters&&localStorage.setItem(k,JSON.stringify(e.login.utmParameters))})),t}var Ni=n(21729),Ri=n(29992);function Mi(){var e=(0,Ri.qy)({providers:{endpoints:(0,Ri.uG)(),token:function(){return null}}});return e.connect(),e}var Zi=n(56989),Li=function(e,t){var n=e.event_sender_context_information;return[(0,Zi.UY)({version_code:n.client_version_int,version_string:n.client_version_string}),(0,Zi.jx)(t),(0,Zi.IE)(n.installation_id),(0,Zi.CF)({device_id:n.device_id,device_manufacturer:n.device_manufacturer,device_model:n.device_model,os_version:n.os_version,platform_type:n.platform_type})]},Ui=function(e,t,n,r,o,i){return(0,Zi.mi)({transport:t,suppressPersist:false,context:Li(e,n),storagePrefix:o,ownerProvider:r,useOptimizedESS2NA:i})},Bi=(n(99024),n(63481),n(49892),n(52260));function Gi(){Gi=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var i=new RegExp(e,r);return t.set(i,o||t.get(e)),(0,Bi.Z)(i,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[n]=e[o[i]]}return t}),Object.create(null))}return(0,Yt.Z)(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=i[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=(0,pt.Z)(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},Gi.apply(this,arguments)}var Hi=Gi(/Spotify\/(.+)\s/,{version:1});var Wi=n(12162),Vi=n(37633),Ki=n(6266);function Yi(){return(Yi=(0,u.Z)(l().mark((function e(){var t,n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=[window.__spotify.locale,bt.en];case 1:if(!(t<n.length)){e.next=18;break}return r=n[t],e.prev=3,e.next=6,fetch("i18n/".concat(r,".json")).then((function(e){return e.json()}));case 6:return o=e.sent,wt.setLocale(r),wt.setDictionary(o),e.abrupt("return");case 12:e.prev=12,e.t0=e.catch(3);case 15:t++,e.next=1;break;case 18:throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.");case 19:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}function qi(){return(qi=(0,u.Z)(l().mark((function e(){var t,n,r,o,i,a,u,c,v,m,y,b,_,E;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Mi(),o="65b708073fc0480ea92a077233ca87bd",i=Ui(window.__spotify,r,o,(function(){return null}),"".concat(o,"-loginui"),!1),a=Ii(i),g.attach(),g.update(),h.attach(),u=document.location.search,c=new RegExp("\\?param=error-code\\".concat(encodeURIComponent("="),"([0-9]+)"),"i"),window.addEventListener("message",(function(e){"critical-update-error"===e.data&&a.dispatch(Kt.loginFailed({errorCode:e.data}))})),v=u.match(c),u&&v&&(m=+v[1],a.dispatch(Kt.loginFailed({errorCode:m}))),y="linux",window.navigator.platform.startsWith("Mac")&&(y="mac"),window.navigator.platform.startsWith("Win")&&(y="windows"),document.body.classList.add("body-container--".concat(y)),b=Vi.L.addMiddleware(Ki._),p.render((0,Jt.jsx)(d.zj,{children:(0,Jt.jsx)(f.zt,{store:a,children:(0,Jt.jsx)(ai.nD,{resolver:b,context:{username:null},options:{clientId:"client-desktop-ui-app-login",timeout:5e3,transport:r,eventSender:i,version:window.navigator.userAgent.match(Hi).groups.version,installationId:null===(t=window.__spotify.event_sender_context_information)||void 0===t?void 0:t.installation_id},children:(0,Jt.jsx)(ht.Suspense,{fallback:null,children:(0,Jt.jsx)(fi,{eventSender:i})})})})}),document.getElementById("main")),a.dispatch(Kt.startApp()),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),n={},(0,s.Z)(n,Ni.PLATFORM_UNKNOWN,"body-container--unknown-os"),(0,s.Z)(n,Ni.PLATFORM_MAC,"body-container--mac"),(0,s.Z)(n,Ni.PLATFORM_WINDOWS,"body-container--windows"),_=n,E=(0,Ni.getPlatform)(),document.body.classList.add(_[E]),(0,Wi.wm)("UI init phase is done for login");case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,Wi.hb)(),function(){return Yi.apply(this,arguments)}().then((function(){return qi.apply(this,arguments)}))},21729:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PLATFORM_MAC:()=>o,PLATFORM_UNKNOWN:()=>r,PLATFORM_WINDOWS:()=>i,getPlatform:()=>u,isMac:()=>a,isWindows:()=>s});n(61235),n(69724),n(22369),n(47921);var r=Symbol("PLATFORM_UNKNOWN"),o=Symbol("PLATFORM_MAC"),i=Symbol("PLATFORM_WINDOWS");function a(){return window.navigator.platform.startsWith("Mac")}function s(){return window.navigator.platform.startsWith("Win")}function u(){return a()?o:s()?i:r}},82990:(e,t)=>{var n=!1;t.update=function(){},t.attach=function(){if(!n){n=!0;var e=window.__spotify&&window.__spotify.locale;e&&document.documentElement.setAttribute("lang",e)}},t.detach=function(){n&&(n=!1,document.documentElement.removeAttribute("lang"))}},1744:(e,t,n)=>{var r,o=n(4831),i=n(51020);n(29543),n(22369),n(70969),n(4302),n(52398),n(69109),n(94562),n(30246);var a=n(21729),s=a.getPlatform,u=a.PLATFORM_UNKNOWN,c=a.PLATFORM_MAC,l=a.PLATFORM_WINDOWS,p=!1,d="always-visible",f=0,h=(i(r={},u,"linux"),i(r,c,"mac"),i(r,l,"windows"),r),g=h[u];function v(){var e=o(document.querySelectorAll("*")),t=[],n=["scroll","auto","overlay"];e.forEach((function(e){var r=window.getComputedStyle(e),o=r.overflowX,i=r.overflowY;n.includes(o)&&t.push({node:e,property:"overflow-x"}),n.includes(i)&&t.push({node:e,property:"overflow-y"})}));var r=document.createElement("style");r.innerHTML="\n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar {\n      background-color: rgba(1, 2, 3, 0) !important;\n    }\n  ".trimRight();var i="data-scrollbar-fix-".concat(++f,"-id"),a=0;t.forEach((function(e){var t=e.node,n=e.property;if(t!==document.body){var o=++a;t.setAttribute(i,o),r.innerHTML+="\n    [".concat(i,'="').concat(o,'"] { ').concat(n,": hidden !important; }")}})),document.head.appendChild(r),setTimeout((function(){document.head.removeChild(r),t.forEach((function(e){e.node.removeAttribute(i)}))}),0)}t.performScrollBarFix=v,t.update=function(){},t.attach=function(){if(!p){p=!0;var e=window.__spotify&&window.__spotify.scroller_style;d="overlay"===e?"overlay":"always-visible";var t=s();g=h[t],"always-visible"===d||"mac"!==g?(document.body.classList.remove("scrollbar-style-when-scrolling-mac"),document.body.classList.add("scrollbar-style-visible-".concat(g))):(document.body.classList.remove("scrollbar-style-visible-".concat(g)),document.body.classList.add("scrollbar-style-when-scrolling-mac")),window.addEventListener("message",(function(e){"set_active"===e.data.name&&e.data.active&&v()}))}},t.detach=function(){p&&(p=!1,f=0)}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,r.amdO={},e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,o,i]=e[l],s=!0,u=0;u<n.length;u++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={535:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,s,u]=n,c=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(u)var l=u(r)}for(t&&t(n);c<a.length;c++)i=a[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0;var o=r.O(void 0,[569],(()=>r(51703)));o=r.O(o)})();
//# sourceMappingURL=login.js.map