"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5713],{83916:(e,t,n)=>{n.d(t,{V:()=>F,e:()=>R});var i=n(45389),a=n(39130),r=(n(30246),n(69109),n(61235),n(69724),n(95675),n(62780),n(22369),n(7845),n(29543),n(70969),n(66715),n(30479),n(75341),n(59496)),o=n(61740),s=n(56827),l=n(59272),c=n(4783),u=n(80082),d=n(22355),p=n(47924),g=n(35589),m=n(9424),f=n(97427),v=n(96692),h=n(90775),y=n(6034),x=n(28990),b=n(54691),j=n(6336),k=n(90902),P=n(78142),C=n(45883),w=n(68975),S=n(20188),O=n(24511),I=n(1962),N=n(8990),D=n(4637);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}var U=function(e){return"activation-trigger-mme-".concat(e)},F=r.memo((function(e){var t,n,i,E,F,B,T,L=e.index,M=void 0===L?-1:L,Z=e.showMetadata,_=e.episode,z=e.usePlayContextItem,W=e.status,G=e.variant,H=(0,N.E)(),K=_.playedState.playPositionMilliseconds,V=_.uri,Y=(0,r.useRef)(null),X=(0,r.useState)(_.playedState.state===O.sY.Completed),q=(0,a.Z)(X,2),J=q[0],Q=q[1],$=(0,v.O)(),ee=(0,y.g)(),te=(0,C.jh)(),ne=(0,h.o)(),ie=(0,o.I0)(),ae=(0,S.fU)(s.createDesktopEpisodeBlockEventFactory,{data:{uri:V,reason:_.requestId||"",position:M}}),re=ae.UBIFragment,oe=ae.spec,se=ae.logger,le=(0,S.Wi)(oe),ce=z({uri:V}),ue=ce.isActive,de=ce.isPlaying,pe=ce.togglePlay,ge=(0,w.z)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===V})),me=(0,a.Z)(ge,1)[0];(0,r.useEffect)((function(){de&&(Y.current=me)}),[de,me]),(0,r.useEffect)((function(){!de&&Y.current&&_.duration.milliseconds<=Y.current&&Q(!0)}),[de,_.duration.milliseconds]);var fe=(0,r.useCallback)((function(e){e||(Y.current=0),Q(e)}),[]),ve=R(Z),he=(0,x.s)(A(A({},_),{},{coverArt:{sources:_.coverArt}}),ve),ye=(0,r.useCallback)((function(){if(_.episodeType===O.Wf.Episode&&H)m.y.set((function(){return{triggerId:U(_.uri),triggerAction:null}}));else if(ee)he();else{var e;e=de?oe.playButtonFactory().hitPause({itemToBePaused:V}):ue?oe.playButtonFactory().hitResume({itemToBeResumed:V}):oe.playButtonFactory().hitPlay({itemToBePlayed:V});var t=se.logInteraction(e);ne({targetUri:V,intent:de?"pause":"play",type:"click"}),pe({loggingParams:t})}}),[ue,he,ne,pe,V,de,ee,_,H,se,oe]),xe=(0,r.useCallback)((function(){se.logInteraction(oe.hitUiNavigate({destination:V})),ne({type:"click",targetUri:V,intent:"navigate"})}),[V,ne,se,oe]),be=null!==(t=null===(n=_.podcastSubscription)||void 0===n?void 0:n.isPaywalled)&&void 0!==t&&t,je=null!==(i=null===(E=_.podcastSubscription)||void 0===E?void 0:E.isUserSubscribed)&&void 0!==i&&i,ke=be&&!je,Pe=be&&ee,Ce=(0,I.r)({contentRating:null===(F=_.contentRating)||void 0===F?void 0:F.label,isPaywalled:be}).badges,we=(0,r.useCallback)((function(){return ie((0,c.RM)(Z.uri))}),[Z.uri,ie]),Se=(0,r.useCallback)((function(e){var t=e;return(ke||Pe)&&(t=(0,D.jsx)(g.l,{enabled:!0,showUri:Z.uri,children:t})),!_.playability.playable&&Ce.nineteen&&(t=(0,D.jsx)("div",{onClick:function(e){e.stopPropagation(),we()},children:e})),t=(0,D.jsx)(u.D,{id:U(V),targetURI:(0,l.EC)(V),children:t})}),[V,ke,Pe,Z.uri,Ce.nineteen,_.playability.playable,we]);return(0,D.jsx)(re,{spec:oe,children:(0,D.jsx)(P.ZP,{value:"row",index:M,children:(0,D.jsx)(b._,{onShow:function(){se.logInteraction(oe.secondaryHitUiReveal())},menu:(0,D.jsx)(d.k,{uri:V,showUri:Z.uri,sharingInfo:_.sharingInfo,isPlayed:J,onMarkAsPlayed:fe}),children:(0,D.jsx)(p.X,{ref:le,requestId:_.requestId,index:M,uri:V,size:te,images:_.coverArt||[],name:_.name,showName:Z.name,description:_.description,isPlayable:_.playability.playable||ke,fullyPlayed:J,durationMs:_.duration.milliseconds,releaseDate:(null===(B=_.releaseDate)||void 0===B?void 0:B.isoString)||"",resumePositionMs:null!==(T=Y.current)&&void 0!==T?T:K,handleDragStart:function(e){if(e.target===e.currentTarget){var t="".concat(_.name," • ").concat(Z.name);$(e,[V],t,Z.uri)}},handlePlaybackClick:ye,handleClick:xe,isCurrentlyPlaying:ue,isPaywalled:be,isUserSubscribed:je,isPlaying:de,position:de?me:void 0,episodeSharingInfo:_.sharingInfo,onMarkAsPlayed:fe,contentInformation:_.contentInformation,badges:(0,D.jsxs)(D.Fragment,{children:[Ce.explicit&&(0,D.jsx)(j.N,{}),Ce.paid&&(0,D.jsx)(f.g,{}),Ce.nineteen&&(0,D.jsx)(k.X,{size:16})]}),playButtonWrapper:Se,onMoreButtonClick:function(){se.logInteraction(oe.moreButtonFactory().hitUiReveal())},status:W,variant:G})})})})}))},62805:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Jn});var i=n(45389),a=(n(30246),n(59496)),r=n(61740),o=n(41177),s=n(32291),l=n(53361),c=n(17249),u=n(60817),d=n(68833),p=n(8850),g=n(39130),m=n(10995),f=n.n(m),v=(n(16366),n(70785),n(83001),n(22369),n(27639),n(71756),n(45880),n(69109),n(84875)),h=n.n(v),y=n(10506),x=n(38674),b=n(45409),j=n(94537),k=n(56075),P=n(9408),C=n(90775),w=n(17295),S=n(92722),O=n(58069),I=n(6336),N=(n(72649),n(38049)),D=n(72580);const E="_yl4tOZxcpoUt28k6B8I",A="lcJflizNrSwDM9yPNk6h",R="ret7iHkCxcJvsZU14oPY";var U=n(4637),F=function(e){var t,n,i,a=e.rating,r=e.className,o=e.onClick;if(!a)return null;var s=Boolean(null===(t=a.rating)||void 0===t?void 0:t.rating);return(0,U.jsxs)("button",{className:h()(E,r),onClick:o,children:[(0,U.jsx)(y.D,{dir:"auto",variant:"mestoBold",children:null!==(n=a.averageRating)&&void 0!==n&&n.showAverage?c.ag.formatNumber(a.averageRating.average,{maximumFractionDigits:1}):c.ag.get("web-player.audiobooks.noRating")}),s?(0,U.jsx)(N.u,{iconSize:16,className:h()(A)}):(0,U.jsx)(D.G,{iconSize:16,className:h()(A)}),(null===(i=a.averageRating)||void 0===i?void 0:i.showAverage)&&(0,U.jsxs)(y.D,{variant:"mesto",className:h()(R),children:["(",c.ag.formatNumberCompact(Number(a.averageRating.totalRatings)),")"]})]})},B=n(20872),T=n(34229),L=n(90321),M=n(83474);const Z="SpVoh9vvBN0kIwzfCiBh",_="nsGHaEmn310z9W4RMbb8",z="PfYVlZzroXSurDmS_kxY",W="kCT99_BcJQtW47mEfVF6",G="gmDgEbPyRXNixmjYAT9f",H="XlZGcb86bItwlMPQ2jOf",K="VGTtqfOlX2jIbpff6mPP",V="aexqooSgfdW95poEaxjH",Y="Fui2wGupk4F1Khigbrhj",X="jWcvSz47NFpbLjnkFT1O",q="Oo6MP8F01W5uGlnw8dag";var J=n(56143),Q=n(90902),$=n(53111),ee=n(1962),te=n(76490),ne=function(e){return e.SMALL="small",e.LARGE="large",e}({}),ie=function(e){var t,n=e.images,a=e.title,r=e.contentRating,o=e.duration,s=e.moreButton,l=e.onClick,c=e.onContextMenu,u=e.onTouchStart,d=e.onTouchEnd,p=e.isPlaying,g=e.isActive,m=e.size,f=e.className,v=e.label,x=e.isPlayable,b=void 0===x||x,j=m===ne.LARGE?"md":"sm",k=(0,ee.r)({contentRating:r}).badges;return(0,U.jsxs)("div",{"data-testid":"trailer-component",className:h()(Z,f,(0,i.Z)({},_,g)),onContextMenu:c,onTouchStart:u,onTouchEnd:d,children:[(0,U.jsxs)("div",{className:W,children:[(0,U.jsxs)("div",{className:V,children:[(0,U.jsx)(T.O,{type:M.p.EPISODE,title:a,className:h()(K,(t={},(0,i.Z)(t,q,m===ne.SMALL),(0,i.Z)(t,X,m===ne.LARGE),t)),size:L.m$.SIZE_56,images:n,shape:T.K.ROUNDED_CORNERS}),(0,U.jsx)("div",{className:Y,children:(0,U.jsx)(te.f,{"data-testid":"trailer-play-button",version:J.ul.transparent,size:j,isPlaying:p,onClick:l,disabled:!b})})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)("div",{className:G,children:(0,U.jsx)(y.D,{dir:"auto",className:z,variant:"balladBold",children:a})}),(0,U.jsxs)("div",{className:H,children:[(0,U.jsx)($.V,{text:v}),k.explicit&&(0,U.jsx)(I.N,{}),k.nineteen&&(0,U.jsx)(Q.X,{}),(0,U.jsx)(y.D,{dir:"auto",variant:"mesto",children:(0,U.jsx)(B.nL,{durationMs:o})})]})]})]}),s]})},ae=n(45883),re=n(52956),oe=n(1003),se=n(8632),le=n(20188),ce=(n(90511),n(45034)),ue=function(e){var t=e.htmlDescription,n=e.narrators,i=e.spec,r=(0,C.o)(),o=(0,le.$P)(),s=(0,a.useCallback)((function(e){r({intent:"expand-description",type:"click"});var t=i.seeMoreButtonFactory();o.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[o,r,i]);return(0,U.jsxs)(U.Fragment,{children:[n.length?(0,U.jsx)(y.D,{as:"p",variant:"ballad",children:c.ag.get("web-player.audiobooks.narratedByX",n.join(c.ag.getSeparator()))}):null,t&&(0,U.jsx)(ce.o,{maxLines:4,content:t,htmlContent:t,onExpanded:s})]})},de=n(84737),pe=n(71767),ge=n(19873),me=n(54669),fe=a.memo((function(e){var t=e.uri,n=e.size,i=void 0===n?me.q.md:n,r=e.className,o=e.onClick,s=(0,ge.Z)(t),l=(0,g.Z)(s,2),c=l[0],u=l[1],d=(0,C.o)(),p=(0,a.useCallback)((function(){d({targetUri:t,intent:c?"unsave":"save",type:"click"}),u(!c)}),[d,t,c,u]);return(0,U.jsx)(me.o,{className:r,isFollowing:c,onFollow:p,onClick:o,uri:t,size:i})})),ve=n(77812);const he="8px";var ye=n(47982),xe=n(48850),be=n(64371),je=n(85830),ke=n(63892),Pe=n(48007),Ce=n(6034),we=n(85358);const Se="iZut9Dh2KEjNVhDUxzWw";function Oe(e){var t,n=e.uri,i=e.price,a=e.size,r=e.spec,o=e.logger,s=e.onPlayback,l=(0,we.k)(),u=(0,Ce.g)(),d=0===(null==i||null===(t=i.finalPrice)||void 0===t?void 0:t.amount),g=d?r.getButtonFactory({uri:n}):r.buyButtonFactory({uri:n}),m=(0,je.y1)((0,p.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.logInteraction(g.hitShowPaywall({paywalledItem:n})),!u){e.next=4;break}return s(),e.abrupt("return");case 4:if(e.prev=4,null==i||!i.finalPrice){e.next=10;break}return e.next=8,(0,Pe.Q)({show_uri:n,currency:i.finalPrice.currency,price:i.finalPrice.amount});case 8:e.next=11;break;case 10:l(c.ag.get("error.generic"));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),l(c.ag.get("error.generic"));case 16:s();case 17:case"end":return e.stop()}}),e,null,[[4,13]])}))),2e3,{leading:!0,trailing:!1});return(0,U.jsx)(ke.D,{buttonSize:a,className:Se,style:{flexShrink:0},onClick:m,children:d?c.ag.get("web-player.audiobooks.buyFree"):c.ag.get("web-player.audiobooks.buy")})}var Ie=function(e){var t=e.uri,n=e.isLocked,i=e.price,a=e.isPlaying,r=e.isConsumptionCapped,o=e.onPlayback,s=e.logger,l=e.spec,c=e.size,u=void 0===c?"lg":c;return n&&!r?(0,U.jsx)(Oe,{size:u,uri:t,price:i,logger:s,spec:l,onPlayback:o}):(0,U.jsx)(be.$,{size:u,isPlaying:a,uri:t,onClick:o})},Ne=n(14706),De=n(76956),Ee=a.memo((function(e){var t=e.backgroundColor,n=e.uri,i=e.name,r=e.isPlaying,o=e.togglePlay,s=e.isLocked,l=e.price,u=e.isConsumptionCapped,d=e.spec,p=(0,ge.Z)(n),m=(0,g.Z)(p,2),f=m[0],v=m[1],h=!(0,De.k)(),y=(0,C.o)(),x=(0,le.$P)(),b=(0,a.useCallback)((function(){y({targetUri:n,intent:f?"unsave":"save",type:"click"});var e=d.saveToLibraryButtonFactory();f?x.logInteraction(e.hitUnfollow({itemToBeUnfollowed:n})):x.logInteraction(e.hitFollow({itemToBeFollowed:n})),v(!f)}),[y,n,f,d,v,x]),j=(0,a.useCallback)((function(e,t){var i=d.downloadButtonFactory();t===xe.mc.ADD?x.logInteraction(i.hitDownload({itemToDownload:n})):t===xe.mc.REMOVE?x.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:n})):t===xe.mc.NO_PERMISSION&&x.logInteraction(i.hitUiReveal())}),[x,d,n]),P=(0,a.useCallback)((function(){var e=d.contextButtonFactory().hitUiReveal();x.logInteraction(e)}),[x,d]);return(0,U.jsx)(de.o,{backgroundColor:t,style:{"--action-bar-padding-bottom":he},children:(0,U.jsxs)(de.F,{children:[(0,U.jsx)(Ie,{uri:n,isLocked:s,price:l,isPlaying:r,isConsumptionCapped:u,onPlayback:o,logger:x,spec:d}),(0,U.jsx)(Ne.r,{children:(0,U.jsx)(pe.H,{isAdded:f,onClick:b,disabled:h,size:pe.q.md,isAudiobook:!0})},"follow-button"),!s&&(0,U.jsx)(fe,{uri:n,onClick:j}),(0,U.jsx)(ye.yj,{menu:(0,U.jsx)(ve.X,{uri:n}),children:(0,U.jsx)(k.z,{label:c.ag.get("more.label.context",i),onClick:P})})]})})})),Ae=n(23006),Re=n(35833),Ue=n(61996),Fe=a.memo((function(e){var t=e.coverArt,n=e.name,i=e.authorName,a=e.uri,r=e.backgroundColor,o=e.isPlaying,s=e.togglePlay,l=e.isLocked,u=e.price,d=e.isConsumptionCapped,p=e.logger,g=e.spec;return(0,U.jsxs)(Ae.gF,{backgroundColor:r,children:[(0,U.jsxs)(Re.W,{children:[(0,U.jsx)(Ie,{uri:a,isLocked:l,price:u,isPlaying:o,isConsumptionCapped:d,onPlayback:s,logger:p,spec:g,size:"md"}),(0,U.jsx)(Ue.i,{text:n,dragUri:a,dragLabel:n})]}),(0,U.jsx)(ye._P,{menu:(0,U.jsx)(ve.X,{uri:a}),children:(0,U.jsx)(Ae.Oz,{images:t,name:n,shape:T.K.ROUNDED_CORNERS})}),(0,U.jsxs)(Ae.sP,{children:[(0,U.jsx)(y.D,{variant:"mestoBold",children:c.ag.get("web-player.audiobooks.audiobook")}),(0,U.jsx)(Ae.xd,{canEdit:!1,onClick:function(){},children:n}),(0,U.jsx)(Ae.QS,{author:i})]})]})}));const Be="HvVxzh4ZoggYAhgSxSth";var Te=a.memo((function(e){var t=e.price;return t.finalPrice&&t.finalListPrice?0===t.finalPrice.amount&&0===t.finalListPrice.amount?(0,U.jsxs)("div",{className:Be,children:[(0,U.jsx)(y.D,{variant:"cello",semanticColor:"textBase",children:c.ag.get("audiobook.freePriceDescription")}),(0,U.jsx)(y.D,{variant:"mesto",children:c.ag.get("audiobook.freePriceExplanation")})]}):(0,U.jsxs)("div",{className:Be,children:[(0,U.jsx)(y.D,{variant:"canon",semanticColor:"textBase",children:t.finalPrice.formattedPrice}),t.finalPrice.amount<t.finalListPrice.amount&&(0,U.jsx)(y.D,{variant:"ballad",semanticColor:"textSubdued",children:c.ag.get("web-player.audiobooks.retailPrice",(0,U.jsx)("span",{style:{textDecoration:"line-through"},children:t.finalListPrice.formattedPrice}))})]}):null})),Le=(n(62780),n(162),n(67262)),Me=n(10655);var Ze=n(18255);function _e(e){var t,n,i;return!(null!==(t=e.playability)&&void 0!==t&&t.playable||(null===(n=e.playability)||void 0===n?void 0:n.reason)!==Ze.WY.PaymentRequired&&(null===(i=e.playability)||void 0===i?void 0:i.reason)!==Ze.WY.Anonymous)}var ze=n(97427),We=n(42033),Ge=n(71163),He=n(9271),Ke=n(19968),Ve=n(14227);n(95675),n(61235),n(7845),n(29543),n(70969),n(66715),n(30479),n(75341);function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Xe=a.memo((function(e){var t=e.uri,n=e.bookUri,i=e.size,r=void 0===i?me.q.md:i,o=e.className,s=e.onClick,l=void 0===s?function(){}:s,c=e.isLocked,u=void 0===c||c,d=(0,ge.Z)(n),p=(0,g.Z)(d,2),m=p[0],f=p[1],v=(0,C.o)(),h=(0,a.useCallback)((function(){v({targetUri:n,intent:"add-to-library",type:"click"}),f(!0)}),[v,n,f]);return(0,U.jsx)(me.o,{className:o,isFollowing:m,canDownload:!u,onFollow:h,uri:t,size:r,onClick:l})})),qe=a.memo((function(e){return(0,U.jsx)(Xe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))})),Je=n(73691),Qe=n(58162),$e=n(10785);const et="b0Vng72SrQiFroJKXfk2",tt="FfeP3XKSZcAdfviyk8fv",nt="eWxDd0LanTnTlSl8SOHX",it="eAOkseqV13_CAmzuDJpa",at="fovofKIYdEIURgIYoKm2",rt="we_1b4qCQBaFPT12eUXp",ot="NXXFrQO7npgPCRuSKaAA",st="ekkhhuxKVGAzkEmuh9kE",lt="zd6xqobF255bxHFtCmXy";var ct=a.memo((function(e){var t=e.name,n=e.duration,o=e.uri,s=e.bookUri,l=e.bookName,u=e.usePlayContextItem,d=e.isLocked,p=e.isPlayable,g=e.resumePositionMs,m=e.isFullyPlayed,f=e.isExplicit,v=e.is19PlusOnly,b=e.spec,j=e.index,w=e.consumptionCapExplanation,S=(0,a.useRef)(g),O=u({uri:o}),N=O.isPlaying,D=O.togglePlay,E=O.isActive,A=(0,le.$P)(),R=(0,Ce.g)(),F=(0,r.I0)(),B=(0,x.W6)($e.vW,{loadingValue:!1}),T=(0,He.Y)((function(e){var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===o){var n,i=null!==(n=(0,Ke.k)(e))&&void 0!==n?n:0;return S.current=i,i}return 0})),L=(0,Ge._)(o),M=(0,a.useCallback)((function(e){e.stopPropagation(),e.preventDefault()}),[]),Z=(0,C.o)(),_=(0,a.useCallback)((function(e){if(M(e),w&&!R&&B)F((0,Je.S3)(w));else{var t=b.chapterBlockFactory({position:j,uri:o}).playButtonFactory();if(d)Z({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),A.logInteraction(t.hitShowPaywall({paywalledItem:o}));else{var n=(0,Qe.aK)({isPlaying:N,isActive:E,spec:t,logger:A,uri:o});D({loggingParams:n})}}}),[w,F,j,B,E,R,d,N,A,Z,b,M,D,o]),z=(0,a.useCallback)((function(e,t){M(e);var n=b.chapterBlockFactory({position:j,uri:o}).downloadButtonFactory();t===xe.mc.ADD?A.logInteraction(n.hitDownload({itemToDownload:o})):t===xe.mc.REMOVE?A.logInteraction(n.hitRemoveDownload({itemToRemoveFromDownloads:o})):t===xe.mc.NO_PERMISSION&&A.logInteraction(n.hitUiReveal())}),[j,A,b,M,o]),W=(0,a.useCallback)((function(){var e=b.chapterBlockFactory({position:j,uri:o}).secondaryHitUiReveal();A.logInteraction(e)}),[j,A,b,o]),G=(0,a.useCallback)((function(e){M(e);var t=b.chapterBlockFactory({position:j,uri:o}).contextMenuFactory().hitUiReveal();A.logInteraction(t)}),[j,A,b,M,o]),H=!d,K=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("hr",{className:nt,"aria-hidden":!0}),(0,U.jsxs)("div",{className:et,onDoubleClick:function(e){Z({targetUri:o,intent:"play",type:"double-click"}),_(e)},children:[(0,U.jsx)(y.D,{as:"h2",variant:"balladBold",className:h()(ot,(0,i.Z)({},tt,E)),semanticColor:"textBase",children:t}),(0,U.jsxs)("div",{className:st,children:[(0,U.jsx)(te.f,{size:"sm",version:te.u.secondary,onClick:_,isPlaying:N,ariaPlayLabel:c.ag.get("tracklist.a11y.play",t,l),ariaPauseLabel:c.ag.get("tracklist.a11y.pause",t,l),locked:d,disabled:!p&&!d}),d?(0,U.jsx)(ze.g,{}):null,f&&(0,U.jsx)(I.N,{fullText:!0}),v&&(0,U.jsx)(Q.X,{size:16}),(0,U.jsx)("div",{className:lt,children:(0,U.jsx)(Ve.E,{isPlaying:N,fullyPlayed:m,durationMs:n.milliseconds,resumePositionMs:S.current,position:N?T:void 0})})]}),H?(0,U.jsx)(ye.yj,{menu:(0,U.jsx)(P.r,{uri:o,showUri:s,isLocked:d}),children:(0,U.jsx)(k.z,{className:at,size:me.q.sm,label:c.ag.get("more.label.context",t),onClick:G})}):null,(0,U.jsx)(qe,{uri:o,bookUri:s,className:h()((0,i.Z)({},rt,!(0,We.y)(L))),onClick:z,size:me.q.sm,isLocked:d})]})]});return H?(0,U.jsx)(ye._P,{menu:(0,U.jsx)(P.r,{uri:o,showUri:s,isLocked:d}),onShow:W,children:(0,U.jsx)("div",{className:it,children:K})}):(0,U.jsx)("div",{className:it,children:K})})),ut=function(e){var t=e.bookUri,n=e.bookName,i=e.sampleUri,r=e.isFinishedUnlockingJourney,o=e.usePlayContextItem,s=e.spec,l=e.consumptionCapExplanation,c=function(e,t){var n=(0,Me.z)(),i=(0,a.useCallback)(function(){var i=(0,p.Z)(f().mark((function i(a,r){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",n.getBookContents(e,{offset:a,limit:r,doRefreshSubscription:t}));case 1:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}(),[t,n,e]);return i}(t,r),u=(0,a.useRef)(!1),d=(0,a.useRef)(0),m=(0,a.useState)([]),v=(0,g.Z)(m,2),h=v[0],y=v[1],x=(0,a.useCallback)((function(e){return(null==e?void 0:e.uri)===i}),[i]),b=(0,a.useCallback)((function(e){return function(e){return null!==e}(e)&&!x(e)}),[x]),j=(0,a.useCallback)((function(){c&&(u.current||null===d.current||(u.current=!0,c(d.current,50).then((function(e){u.current=!1,d.current=e.nextOffset,e.items.length>0&&y((function(t){return t.concat(e.items.filter(b))}))}))))}),[c,b]);return(0,a.useEffect)((function(){d.current=0,y([])}),[t]),(0,U.jsx)("ul",{children:(0,U.jsx)(Le.C,{onReachBottom:j,triggerOnInitialLoad:!0,children:h.map((function(e,i){var a=e.name,r=e.duration,c=e.uri,u=e.playability.playable,d=e.playedState,p=d.playPositionMilliseconds,g=d.state,m=e.isExplicit,f=e.is19PlusOnly;return(0,U.jsx)(ct,{name:a,duration:r,uri:c,bookUri:t,bookName:n,usePlayContextItem:o,isLocked:_e(e),isPlayable:u,resumePositionMs:p,isFullyPlayed:g===Ze.sY.Completed,isExplicit:m,is19PlusOnly:f,spec:s,index:i,consumptionCapExplanation:l},c)}))})})},dt=n(14268),pt=n(80263),gt=n(97422),mt=n(12033),ft=n(63461);const vt="QEd1L2SSRW1ol_sQQN6m",ht="ENuWK8u3C9kmadnqkErf",yt="i0gSVhns0PjhiUKm4OG1",xt="jKVb6K0dga3SfW1dp2Pg",bt="MOpV0_YizQER2NksxLju",jt="vrR8bh9DvivyDfUrh1vD",kt="_toO3CqMPAPTbny7Rh8R",Pt="Iudw61HRePwOAJpbDRvA",Ct="GWaz1n1SADn9enzKdi_Z";var wt=a.memo((function(e){var t=e.coverArt,n=e.toggleModal,i=e.uri,a=e.isBook,r=(0,mt.X)(t,{desiredSize:320}),o=(0,le.fU)(pt.createDesktopPodcastRatingEventFactory,{data:{identifier:a?l.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK:l.Wg.RATINGS_AND_REVIEWS_RATINGS,uri:i}}),s=o.spec,u=o.logger;return(0,U.jsx)(ft.Z,{contentLabel:"podcast-rating-modal",isOpen:!0,onRequestClose:n,children:(0,U.jsxs)("div",{className:vt,children:[(0,U.jsxs)("div",{className:yt,children:[(0,U.jsx)(y.D,{as:"h1",variant:"canon",className:kt,children:c.ag.get("web-player.audiobooks.rating.rateAudiobook")}),(0,U.jsxs)("button",{className:xt,onClick:function(){var e=s.closeButtonFactory().hitUiNavigateBack();u.logInteraction(e),n()},children:[(0,U.jsx)(dt.k,{role:"presentation"}),(0,U.jsx)("span",{className:"hidden-visually",children:c.ag.get("web-player.audiobooks.rating.closeModal")})]})]}),(0,U.jsxs)("div",{className:bt,children:[(0,U.jsx)(gt.Ee,{loading:"eager",src:null==r?void 0:r.url,className:ht}),(0,U.jsxs)("div",{className:jt,children:[(0,U.jsx)(y.D,{as:"p",variant:"cello",className:Pt,children:c.ag.get("web-player.audiobooks.rating.wantToRate")}),(0,U.jsx)(y.D,{as:"p",className:Ct,children:c.ag.get("web-player.audiobooks.rating.goToApp")}),(0,U.jsx)(ke.D,{colorSet:"invertedLight",onClick:function(){var e=s.okButtonFactory().hitUiNavigateBack();u.logInteraction(e),n()},children:c.ag.get("web-player.audiobooks.rating.ok")})]})]})]})})})),St=n(20126);const Ot="mmCZ5VczybT9VqKB5wFU",It="At_ihDspJfh1yw3Cn2cq",Nt="u3LLJx1KnMchfNCzi6k5",Dt="Yqz1Nv6wj1n3HmXL_qji",Et="qRqn3JrWLPbGW9k2a63n",At="HAah1_lK_dHgyyE71I8Z",Rt="eiC4nh70nb5UHZBYMgNA",Ut="hl2eRCaYcZ1Jm1bgNYlU",Ft="eYtmwXEvi1UdCevg8WoK",Bt="QOp2aYTYmZHZ6DFFHuYE";var Tt=a.memo((function(e){var t,n,s,d,m=e.metadata,v=m.uri,N=m.coverArt,D=m.name,E=m.htmlDescriptionPlain,A=m.authorName,R=m.sample,T=m.narrators,L=m.rating,M=m.isExplicit,Z=m.duration,_=m.copyrights,z=m.publishDate,W=m.price,G=m.isLocked,H=m.consumptionCapExplanation,K=m.gatedContentAccessReason,V=(0,o.TH)().search,Y=!!new URLSearchParams(V).get("isUnlockingAudiobook"),X=!(!(0,re.D)(Y)||Y),q=(0,Ce.g)(),J=(0,w.Z)(null===(t=N[0])||void 0===t?void 0:t.url),Q=(0,r.I0)(),$=(0,a.useState)(!1),ee=(0,g.Z)($,2),te=ee[0],ce=ee[1],de=(0,C.o)(),pe=(0,x.W6)($e.vW,{loadingValue:!1}),ge=(0,le.fU)(b.createDesktopAudiobookEventFactory,{data:{uri:v,identifier:l.Wg.PODCAST_SHOW_AUDIOBOOK}}),me=ge.spec,fe=ge.logger,ve=(0,le.fU)(b.createDesktopAudiobookEventFactory,{data:{uri:v,identifier:l.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),he=ve.spec,ye=ve.logger,xe=(0,le.fU)(j.createDesktopLockedAudiobookEventFactory,{data:{uri:v,identifier:l.Wg.PODCAST_SHOW_AUDIOBOOK}}),be=xe.spec,je=xe.logger,ke=(0,a.useMemo)((function(){return me.actionBarFactory()}),[me]),Pe=(0,a.useMemo)((function(){return he.aboutSectionFactory()}),[he]),we=(0,a.useMemo)((function(){return me.chapterListFactory()}),[me]);(0,a.useEffect)((function(){de({type:"view",intent:"audiobook"})}),[de]),(0,a.useEffect)((function(){G&&je.logImpression(be.impression())}),[be,je,G]);var Se=(0,oe.n)({uri:v},{featureIdentifier:"audiobook"}),Oe=Se.isPlaying,Ie=Se.togglePlay,Ne=Se.usePlayContextItem,De=Se.isActive,Ae=Se.triggerPlay,Re=(0,oe.n)({uri:null!==(n=null==R?void 0:R.uri)&&void 0!==n?n:""},{featureIdentifier:"audiobook"}),Ue=Re.togglePlay,Be=Re.isPlaying,Le=Re.isActive,Me=Oe&&!Be,Ze=De&&!Le,_e=(0,a.useCallback)((0,p.Z)(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=me.actionBarFactory().playButtonFactory(),!H||q||!pe){e.next=5;break}return fe.logInteraction(t.hitShowPaywall({paywalledItem:v})),Q((0,Je.S3)(H)),e.abrupt("return");case 5:if(!G||q){e.next=7;break}return e.abrupt("return");case 7:q?Ie():(n=(0,Qe.aK)({isPlaying:Me,isActive:Ze,spec:t,logger:fe,uri:v}),Ze?Ie({loggingParams:n}):Ae({loggingParams:n}));case 8:case"end":return e.stop()}}),e)}))),[me,H,q,pe,G,fe,v,Q,Ie,Me,Ze,Ae]),ze=(0,a.useCallback)((function(){null!=R&&R.uri&&(de({targetUri:R.uri,intent:Be?"play":"pause",type:"click"}),Ue())}),[Be,de,Ue,null==R?void 0:R.uri]),We=(0,a.useCallback)((function(){var e=Pe.ratingButtonFactory().hitUiReveal();ye.logInteraction(e),ce((function(e){return!e}))}),[Pe,ye]),Ge=(0,ae.Db)((s={},(0,i.Z)(s,ae.Uo.MEDIUM,600),(0,i.Z)(s,ae.Uo.LARGE,1024),s)),He=Ge.ref,Ke=Ge.breakpoint,Ve=null!=H,Ye=G&&W;return(0,U.jsxs)("section",{ref:He,className:Ot,children:[(0,U.jsx)(u.$,{children:(0,se.Od)({showOrAudiobookName:D,type:"Audiobook"})}),(0,U.jsx)(Fe,{name:D,authorName:A,uri:v,coverArt:N,backgroundColor:J,togglePlay:_e,isPlaying:Me,isLocked:G,price:W,isConsumptionCapped:Ve,logger:fe,spec:me.actionBarFactory()}),(0,U.jsx)(Ee,{name:D,backgroundColor:J,uri:v,togglePlay:_e,isPlaying:Me,isLocked:G,isExplicit:M,duration:Z,publishDate:z,price:W,isConsumptionCapped:Ve,spec:ke}),(0,U.jsxs)("div",{className:h()(It,"contentSpacing",(0,i.Z)({},Nt,Ke===ae.Uo.LARGE)),children:[(0,U.jsxs)("div",{className:Dt,children:[(0,U.jsxs)("div",{className:Ut,children:[(0,U.jsxs)("div",{className:Ft,children:[M&&(0,U.jsx)(I.N,{fullText:!0}),(0,U.jsxs)("div",{children:[z&&(0,U.jsx)(y.D,{variant:"mesto",className:Bt,children:c.ag.formatDate(z)}),(0,U.jsx)(y.D,{variant:"mesto",children:(0,U.jsx)(B.nL,{durationMs:Z})})]})]}),(0,St.c)(K)&&(0,U.jsx)(y.D,{variant:"ballad",as:"p",semanticColor:"textBrightAccent",children:c.ag.get("audiobook.page.available.premium")}),!(0,St.c)(K)&&Ye&&(0,U.jsx)(Te,{price:W})]}),(0,U.jsx)(ue,{htmlDescription:E,narrators:T,spec:Pe})]}),(0,U.jsxs)("div",{className:Et,children:[R&&(0,U.jsx)(ie,{label:c.ag.get("audiobook.page.sample"),images:R.coverArt||[],title:R.name,duration:R.duration.milliseconds,moreButton:G?null:(0,U.jsx)(S.y,{menu:(0,U.jsx)(P.r,{uri:R.uri,showUri:v,isLocked:G}),children:(0,U.jsx)(k.z,{})}),onClick:ze,isPlaying:Be,isActive:Le,size:ne.LARGE,contentRating:null===(d=R.contentRating)||void 0===d?void 0:d.label,isPlayable:R.isPlayable}),(0,U.jsx)("div",{className:At,children:(0,U.jsx)(F,{rating:L,onClick:We})})]}),(0,U.jsxs)("div",{className:Rt,children:[(0,U.jsx)(ut,{bookUri:v,bookName:D,sampleUri:null==R?void 0:R.uri,isFinishedUnlockingJourney:X,usePlayContextItem:Ne,spec:we,consumptionCapExplanation:null!=H?H:void 0},"".concat(v,"-").concat(G)),(0,U.jsx)(O.k,{copyrights:_})]})]}),te&&(0,U.jsx)(wt,{toggleModal:function(){return ce(!1)},coverArt:N,uri:v,isBook:!0})]})})),Lt=n(8701),Mt=n(20463),Zt=n(81711),_t=n(44888),zt=n(32563),Wt=n(44594),Gt=function(e){var t=e.uri,n=e.name,i=e.backgroundColor,r=e.spec,o=(0,le.$P)(),s=(0,C.o)(),l=!(0,De.k)(),u=(0,ge.Z)(t),d=(0,g.Z)(u,2),p=d[0],m=d[1],f=(0,a.useCallback)((function(){s({targetUri:t,intent:p?"unsave":"save",type:"click"});var e=r.followButtonFactory();o.logInteraction(p?e.hitUnfollow({itemToBeUnfollowed:t}):e.hitFollow({itemToBeFollowed:t})),m(!p)}),[s,t,p,r,o,m]),v=(0,a.useCallback)((function(){o.logInteraction(r.contextButtonFactory().hitUiReveal())}),[o,r]);return(0,U.jsx)(de.o,{backgroundColor:i,children:(0,U.jsxs)(de.F,{children:[(0,U.jsx)(Ne.r,{children:(0,U.jsx)(Wt.e,{isFollowing:p,onClick:f,disabled:l})},"follow-button"),(0,U.jsx)(S.y,{menu:(0,U.jsx)(zt.M,{uri:t}),onShow:v,children:(0,U.jsx)(k.z,{label:c.ag.get("more.label.context",n)})})]})})};n(69724),n(71541),n(8760);function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt=(0,a.lazy)((function(){return n.e(4909).then(n.bind(n,4909))}));function Yt(e){return(0,x.W6)($e.$f)?(0,U.jsx)(a.Suspense,{fallback:!0,children:(0,U.jsx)(Vt,Kt({},e))}):null}var Xt=n(22355),qt=n(82526),Jt=n(28990),Qt=n(54691),$t=n(24122),en=n(56406),tn=n(83916),nn=n(83014),an=(n(27535),n(78142)),rn=(n(59538),n(79611),n(11880)),on=(0,a.createContext)({setSortState:function(){throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),sn=a.memo((function(e){var t=e.uri,n=e.children;return(0,U.jsx)(rn.r,{uri:t,defaultState:[],sortContext:on,localStorageKey:"showFilterParams-v2",children:n})})),ln=(n(72304),n(43125),n(42617),n(78113)),cn={field:ln.ay.PUBLISH_DATE,order:ln.i5.DESC},un={field:ln.ay.PUBLISH_DATE,order:ln.i5.ASC},dn={episodic:cn,sequential:un,recent:cn};function pn(){return new Map([[cn,{key:"newest-to-oldest",value:c.ag.get("shows.sort.newest-to-oldest")}],[un,{key:"oldest-to-newest",value:c.ag.get("shows.sort.oldest-to-newest")}]])}function gn(e){return dn[e]}var mn=(0,a.createContext)({setSortState:function(){throw new Error("setSortState must be used within a ShowSortProvider")},sortState:gn("recent")}),fn=function(e){var t=pn();return Array.from(t.keys()).some((function(t){return t.field===(null==e?void 0:e.field)}))},vn=a.memo((function(e){var t=e.uri,n=e.children,i=e.defaultSortParam;return(0,U.jsx)(rn.r,{uri:t,defaultState:i,sortContext:mn,localStorageKey:"showSortParam",validator:fn,children:n})}));const hn="cJJXVm4gQW6AdfCQRhpX",yn="hTRqaN61SDG95erQGMmx";function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jn={totalCount:0,nextOffset:0,items:[]},kn=a.memo((function(e){var t=e.showMetadata,n=e.usePlayContextItem,i=(0,a.useContext)(mn).sortState,r=(0,a.useContext)(on).sortState,o=(0,en.ZM)(t.uri,i,r),s=(0,a.useState)(jn),l=(0,g.Z)(s,2),c=l[0],u=l[1],d=(0,a.useRef)(!1),p=(0,a.useRef)(0),m=(0,a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o){var t=p.current;null!==t&&(d.current||(d.current=!0,o(t,50).then((function(n){u((function(i){var a=e?[]:(0,nn.Z)(i.items);return a.splice.apply(a,[t,n.items.length].concat((0,nn.Z)(n.items))),p.current=n.nextOffset,bn(bn({},n),{},{items:a})})),d.current=!1}))))}}),[o]);return(0,a.useEffect)((function(){u(jn)}),[t.uri]),(0,a.useEffect)((function(){p.current=0,m(!0)}),[m]),(0,U.jsx)(an.ZP,{value:"track-list",children:(0,U.jsx)(Le.C,{onReachBottom:m,triggerOnInitialLoad:!0,children:c.items.map((function(e,i){return e&&(0,U.jsxs)("div",{className:yn,children:[(0,U.jsx)("hr",{className:hn,"aria-hidden":!0}),(0,U.jsx)(tn.V,{index:i,episode:e,showMetadata:t,usePlayContextItem:n},"".concat(e.uri,"/").concat(i))]},"".concat(i).concat(e.uri))}))})})})),Pn=(n(40274),n(4159)),Cn={field:ln.YG.ISPLAYED,operator:ln.NK.EQUALS,value:!1},wn={field:ln.YG.STARTEDPLAYING,operator:ln.NK.GREATER_THAN,value:0};var Sn="all-episodes",On=function(e){var t=e.onFilter,n=(0,a.useContext)(on),i=n.sortState,r=n.setSortState,o=new Map([[Cn,{key:"is-played",value:c.ag.get("shows.filter.unplayed")}],[wn,{key:"started-playing",value:c.ag.get("shows.filter.in-progress")}]]),s=Array.from(o.values());s.unshift({key:Sn,value:c.ag.get("mwp.podcast.all.episodes")});var l=Array.from(o.keys()),u=(0,a.useCallback)((function(e){if(e===Sn)r([]);else{var n=l.find((function(t){var n;return(null===(n=o.get(t))||void 0===n?void 0:n.key)===e}));n&&r([n])}t()}),[t,r,l,o]);if(!o.size||!l)return null;var d=s[0],p=Array.from(o.entries()).filter((function(e){return null==i?void 0:i.some((function(t){return t.field===e[0].field&&t.operator===e[0].operator}))}));return p.length>0&&(d=p[0][1]),(0,U.jsx)(Pn.A,{options:s,onSelect:function(e){return u(e)},selected:d,variant:"balladBold",semanticColor:"textBase",heading:c.ag.get("drop_down.filter_by")})},In=function(e){var t=e.onSort,n=(0,a.useContext)(mn),i=n.sortState,r=n.setSortState,o=pn(),s=Array.from(o.values()),l=Array.from(o.keys()),u=(0,a.useCallback)((function(e){var n=l.find((function(t){var n;return(null===(n=o.get(t))||void 0===n?void 0:n.key)===e}));n&&r(n),t()}),[l,t,o,r]);if(!o.size||!i)return null;var d=Array.from(o.keys()).find((function(e){return e.field===i.field&&e.order===i.order}));if(!d)return null;var p=o.get(d);return p?(0,U.jsx)(Pn.A,{options:s,onSelect:function(e){return u(e)},selected:p,heading:c.ag.get("drop_down.sort_by")}):null};const Nn="show-showPage-sectionWrapper",Dn="TYB4Y2xQujO7cifhHush",En="sSXKiPRvp2AHmwfHoCCS",An="YJlizbhw6DBPHT9OYbdj",Rn="klz_XuZpllvTMzpJF1gw",Un="TfjbWiK8hca4HHEBnonP",Fn="kR0M2WSYVUj4cohADSFM",Bn="ghfuv80I8uW_ymG_jfx9",Tn="jtfSxoRam9rzTtdXIjzc",Ln="fejGrhq7pxGC99cUdyVw",Mn="T0OjvsNXAJJGd23eBG2m",Zn="Ppm5YkDdE5ktTPwZC1Dw";var _n=function(e){var t=e.spec,n=(0,le.$P)(),i=(0,en.zZ)().capabilities,r=i.canSort,o=i.canFilter,s=(0,a.useCallback)((function(){n.logInteraction(t.episodeListFactory().filterButtonFactory().hitFilter())}),[n,t]),l=(0,a.useCallback)((function(){n.logInteraction(t.episodeListFactory().sortButtonFactory().hitSort())}),[n,t]);return(0,U.jsxs)("div",{className:Fn,children:[o&&(0,U.jsx)("div",{className:Tn,children:(0,U.jsx)(On,{onFilter:s})}),!o&&(0,U.jsx)(y.D,{as:"h3",variant:"canon",semanticColor:"textBase",className:Ln,children:c.ag.get("mwp.podcast.all.episodes")}),r&&(0,U.jsx)("div",{className:Bn,children:(0,U.jsx)(In,{onSort:l})})]})},zn=function(e){switch(e){case Ze.it.TRAILER:return c.ag.get("podcasts.next-episode.trailer");case Ze.it.UP_NEXT:return c.ag.get("podcasts.next-episode.up-next");case Ze.it.CONTINUE_LISTENING:return c.ag.get("podcasts.next-episode.continue-listening");case Ze.it.FIRST_PUBLISHED:return c.ag.get("podcasts.next-episode.first-published");case Ze.it.LATEST_PUBLISHED:return c.ag.get("podcasts.next-episode.latest-published");default:return}},Wn=function(e){var t,n,r,o=e.breakpoint,s=e.metadata,l=e.showId,u=e.spec,d=s.uri,p=s.trailer,g=s.topics,m=s.description,f=s.htmlDescription,v=(0,le.$P)(),b=(0,a.useMemo)((function(){return u.episodeListFactory()}),[u]),j=(0,x.W6)($e.Vz),P=(0,C.o)(),w=(0,x.W6)($e.Cz),I=(0,Ce.g)(),N=(0,a.useContext)(mn).sortState,D=(0,a.useContext)(on).sortState,E=(0,en.zZ)(),A=(0,oe.n)({uri:d,metadata:(t={},(0,i.Z)(t,$t.sb.SORTING_CRITERIA,E.getPlayerSort(N)),(0,i.Z)(t,$t.sb.FILTERING_PREDICATE,E.getPlayerFilter(D)),t)},{featureIdentifier:"show"}).usePlayContextItem,R=A({uri:(null==p?void 0:p.uri)||""}),F=R.isActive,B=R.isPlaying,T=R.togglePlay,L=(0,a.useCallback)((function(e){P({intent:"expand-description",type:"click"});var t=u.aboutSectionFactory().seeMoreButtonFactory(),n=e?t.hitUiReveal():t.hitUiHide();v.logInteraction(n)}),[v,P,u]),M=(0,a.useCallback)((function(e,t){var n=u.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});v.logInteraction(n)}),[v,u]),Z=p?{name:p.name,uri:p.uri,audio:{items:p.audio.items.map((function(e){return{url:e.url}}))}}:null,_=(0,tn.e)(s),z=(0,Jt.s)(Z,_),W=(0,a.useCallback)((function(){null!=p&&p.uri&&(I?z():(P({targetUri:p.uri,intent:B?"play":"pause",type:"click"}),T()))}),[z,I,B,P,T,null==p?void 0:p.uri]),G=(0,ae.Db)((n={},(0,i.Z)(n,ae.Uo.MEDIUM,0),(0,i.Z)(n,ae.Uo.LARGE,600),n)),H=G.ref,K=G.breakpoint,V=g.length>0,Y=m||w&&f,X=Y||V;return(0,U.jsxs)("div",{className:h()(Dn,"contentSpacing",(0,i.Z)({},En,o===ae.Uo.LARGE)),children:[(0,U.jsxs)("div",{className:An,children:[X&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(y.D,{as:"h3",variant:"canon",semanticColor:"textBase",className:Ln,children:c.ag.get("artist.about")}),Y&&(0,U.jsx)(ce.o,{maxLines:4,content:(m||"").trim(),onExpanded:L,htmlContent:w&&f?f:void 0}),V&&(0,U.jsx)(qt.v,{topics:g,onClick:M})]}),(0,U.jsx)(Yt,{showId:l,uri:d}),p&&!j&&(0,U.jsx)(Qt._,{menu:(0,U.jsx)(Xt.k,{uri:p.uri,showUri:d,sharingInfo:p.sharingInfo}),children:(0,U.jsx)(ie,{label:c.ag.get("track-trailer"),className:Mn,images:p.coverArt||[],title:p.name,duration:p.duration.milliseconds,moreButton:(0,U.jsx)(S.y,{menu:(0,U.jsx)(Xt.k,{uri:p.uri,sharingInfo:p.sharingInfo,showUri:d}),children:(0,U.jsx)(k.z,{})}),onClick:W,isPlaying:B,isActive:F,size:ne.LARGE,contentRating:null===(r=p.contentRating)||void 0===r?void 0:r.label})})]}),(0,U.jsx)(ae.ZU.Provider,{value:K,children:(0,U.jsxs)("div",{className:Un,"data-testid":"show-all-episode-list",ref:H,children:[j&&s.nextBestEpisode&&(0,U.jsx)(tn.V,{showMetadata:s,episode:s.nextBestEpisode.data,usePlayContextItem:A,status:zn(s.nextBestEpisode.type),variant:"next-best-episode"}),(0,U.jsx)(_n,{spec:u}),(0,U.jsx)(le.Nh,{spec:b,children:(0,U.jsx)(kn,{showMetadata:s,usePlayContextItem:A})})]})}),(0,U.jsx)(O.k,{copyrights:[]})]})},Gn=a.memo(Wn),Hn=n(25310),Kn=function(e){var t=e.reason,n=(0,x.W6)($e.AL),i=function(e){switch(e){case"OTP":return c.ag.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return c.ag.get("podcasts.subscriber-indicator.subscription");default:return""}}(t);return n&&i?(0,U.jsx)(y.D,{className:Zn,children:i}):null};var Vn=function(e){var t=e.metadata,n=e.backgroundColor,i=t.uri,a=t.coverArt,r=t.name,o=t.podcastType,s=t.publisherName,l=t.gatedContentAccessReason,u=(0,Hn.e)(),d=u.isXSOnly,p=u.isSMOnly,g=d||p;return(0,U.jsxs)(Ae.gF,{backgroundColor:n,children:[(0,U.jsx)(Re.W,{children:(0,U.jsx)(Ue.i,{text:r,dragUri:i,dragLabel:r})}),(0,U.jsx)("div",{className:Rn,children:(0,U.jsx)(Qt._,{menu:(0,U.jsx)(zt.M,{uri:i}),children:(0,U.jsx)(Ae.Oe,{loading:"eager",name:r,images:a,placeholderType:"show",shape:Ae.Kc.ROUNDED_CORNERS})})}),(0,U.jsxs)(Ae.sP,{children:[(0,U.jsxs)(y.D,{variant:"mestoBold",children:["SHOW"===o?c.ag.get("type.show"):c.ag.get("type.podcast"),l&&(0,U.jsx)(Kn,{reason:l})]}),(0,U.jsx)(Qt._,{menu:(0,U.jsx)(zt.M,{uri:i}),children:(0,U.jsx)(Ae.xd,{dragUri:i,dragLabel:r,children:(0,U.jsx)("span",{"data-testid":"show-title",children:r})})}),(0,U.jsx)(y.D,{variant:g?"cello":"canon",children:s})]})]})},Yn=n(71700),Xn=n(59344),qn=function(e){var t,n,l=e.metadata,c=e.showId,d=l.coverArt,p=l.name,g=l.uri,m=(0,le.fU)(s.createDesktopPodcastEventFactory,{data:{uri:g}}).spec,f=(0,a.useMemo)((function(){return m.actionBarFactory()}),[m]),v=(0,w.Z)((null===(t=d[0])||void 0===t?void 0:t.url)||null),h=(0,ae.Db)((n={},(0,i.Z)(n,ae.Uo.MEDIUM,600),(0,i.Z)(n,ae.Uo.LARGE,1024),n)),y=h.ref,x=h.breakpoint,b=(0,r.v9)(Yn.v),j=(0,_t.l)(b,c),k=(0,o.TH)(),P=(0,Lt.vI)(Zt.k.VideoPodcastShowTitleTag,k),C=j||P;return(0,U.jsxs)("section",{ref:y,className:Nn,children:[(0,U.jsx)(u.$,{children:(0,se.Od)({showOrAudiobookName:p,type:"Podcast",isVideoPodcastShowTitleTagEnabled:C})}),(0,U.jsx)(Vn,{metadata:l,backgroundColor:v}),(0,U.jsx)(Gt,{uri:g,name:p,backgroundColor:v,spec:f}),(0,U.jsx)(Gn,{breakpoint:x,metadata:l,showId:c,spec:m})]})};const Jn=(0,a.memo)((function(){var e=(0,o.UO)().showId,t=void 0===e?"":e,n="spotify:show:".concat(t),i=(0,Mt.l)(n),r=i.data,s=i.error;return!r||s?(0,U.jsx)(d.h,{hasError:!!s,errorMessage:c.ag.get("error.not_found.title.page")}):(0,Ze.l6)(r)?(0,U.jsx)(a.Suspense,{fallback:null,children:(0,U.jsx)(Xn.C,{pageId:l.Wg.PODCAST_SHOW_AUDIOBOOK,uri:n,children:(0,U.jsx)(Tt,{metadata:r})})}):(0,U.jsx)(a.Suspense,{fallback:null,children:(0,U.jsx)(Xn.C,{pageId:l.Wg.PODCAST,uri:n,children:(0,U.jsx)(sn,{uri:r.uri,children:(0,U.jsx)(vn,{uri:r.uri,defaultSortParam:gn(r.consumptionOrder),children:(0,U.jsx)(qn,{showId:t,metadata:r})})})})})}))},58069:(e,t,n)=>{n.d(t,{k:()=>o});n(162),n(16366),n(31781),n(69109);var i=n(10506);const a="rTMkDBDp47Eo12ZEQv4U";var r=n(4637),o=function(e){var t=e.copyrights,n=e.courtesyLine,o=(t||[]).map((function(e,t){var n,a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");return n="C"===e.type?"©":"P"===e.type?"℗":"(".concat(e.type,")"),(0,r.jsx)(i.D,{as:"p",variant:"finale",dir:"auto",children:"".concat(n," ").concat(a)},t)}));return n&&o.unshift((0,r.jsx)(i.D,{as:"p",variant:"finale",dir:"auto",children:n},o.length)),(0,r.jsx)("div",{className:a,children:o})}},8701:(e,t,n)=>{n.d(t,{vI:()=>i});n(83001),n(22369),n(27639),n(71756),n(45880),n(16366),n(70785),n(162);var i=function(e,t){var n=t?new URLSearchParams(t.search):void 0;return"1"===(null==n?void 0:n.get(e))}},81711:(e,t,n)=>{n.d(t,{k:()=>i});var i=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.BlendParty="bp",e.BlendPartyV2="bpv2",e.VideoPodcastShowTitleTag="vidpodshow",e.I18nAdditionalPages="i18nap",e.IlrTrackCanonicalTop="ilr-track-canonical-top",e.IlrTrackCanonicalBottom="ilr-track-canonical-bottom",e.IlrTrackOrganicTop="ilr-track-organic-top",e.IlrTrackOrganicBottom="ilr-track-organic-bottom",e}({})}}]);
//# sourceMappingURL=xpui-routes-show.js.map