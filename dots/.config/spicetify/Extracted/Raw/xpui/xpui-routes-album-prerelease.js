"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[9540],{7115:(e,n,a)=>{a.r(n),a.d(n,{AlbumPrerelease:()=>ue});a(30246);var i=a(17249),t=(a(37193),a(40265),a(94320)),r=a(63892),l=a(59496),o=(a(82088),a(22369),a(43125),a(27639),a(16366),a(96669),a(61235),a(69724),a(39965),a(83001),a(71756),a(39975),a(59538),a(79611),3e5),d=36e5,s=a(83014),u=(a(69109),a(9294)),m=[{kind:"FragmentDefinition",name:{kind:"Name",value:"preReleaseMutationPayload"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleasePayload"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preRelease"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preSaved"}}]}}]}}]}}],c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AlbumPrereleasePreSavedState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lookup"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"uri"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"preSaved"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}}]}}]}}]},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PreSaveAlbumPrerelease"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preSavePreReleaseToLibrary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"preReleaseMutationPayload"}}]}}]}}].concat((0,s.Z)(m))},v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RemovePreSaveAlbumPrerelease"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removePreReleaseFromLibrary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"preReleaseMutationPayload"}}]}}]}}].concat((0,s.Z)(m))};function p(e,n){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return S(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){o=!0,r=e},f:function(){try{l||null==a.return||a.return()}finally{if(o)throw r}}}}function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var a=0,i=new Array(n);a<n;a++)i[a]=e[a];return i}var f=function(e){var n,a,i=(n={uri:e},a={staleTime:o,cacheTime:d},(0,u.a)(c,n,a)),t=i.data,r=i.invalidate,s=i.loading;return{isPreSaved:(0,l.useMemo)((function(){if(!t)return!1;var n,a=p(t.lookup);try{for(a.s();!(n=a.n()).done;){var i=n.value;if("PreReleaseResponseWrapper"===i.__typename&&"PreRelease"===i.data.__typename&&i.data.uri===e)return i.data.preSaved}}catch(e){a.e(e)}finally{a.f()}return!1}),[t,e]),isLoading:s,invalidate:r}},y=a(8850),N=a(10995),b=a.n(N),g=a(9102),F=a(26352),h=a(31636),P=a(55590);function D(e){var n=void 0;if("preSavePreReleaseToLibrary"in e&&"PreReleasePayload"===e.preSavePreReleaseToLibrary.__typename)n=e.preSavePreReleaseToLibrary.preRelease;else{if(!("removePreReleaseFromLibrary"in e)||"PreReleasePayload"!==e.removePreReleaseFromLibrary.__typename)return;n=e.removePreReleaseFromLibrary.preRelease}switch(n.__typename){case"PreRelease":return n.preSaved;case"NotFound":return!1;case"GenericError":return;default:return void(0,P._)(n)}}var x=function(e){var n=f(e),a=n.isPreSaved,i=n.invalidate,t=n.isLoading,r=function(e,n){var a=(0,l.useContext)(F.Ax).request;return(0,g.useMutation)(function(){var n=(0,y.Z)(b().mark((function n(i){var t,r,l;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=i?k:v,n.next=3,(0,h.J)(a,t,{uri:e});case 3:if(r=n.sent,l=null==r?void 0:r.data){n.next=7;break}return n.abrupt("return",void 0);case 7:return n.abrupt("return",D(l));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),{onSuccess:function(e){"boolean"==typeof e&&n(e)}})}(e,i),o=r.mutate,d=r.isLoading;return{isPreSaved:a,isLoading:t||d,addPresave:(0,l.useCallback)((function(){return o(!0)}),[o]),removePresave:(0,l.useCallback)((function(){return o(!1)}),[o])}},R=a(4637),A=function(e){var n=e.uri,a=x(n),l=a.isPreSaved,o=a.isLoading,d=a.addPresave,s=a.removePresave;return l?(0,R.jsx)(t.P,{disabled:o,onClick:s,children:i.ag.get("web-player.album-prerelease.presaved")}):(0,R.jsx)(r.D,{disabled:o,onClick:d,children:i.ag.get("web-player.album-prerelease.presave")})},C=a(84737),_=function(e){var n=e.prerelease,a=e.backgroundColor,i=!1;n.releaseDate&&(i=Date.now()>new Date(n.releaseDate).getTime());return(0,R.jsx)(C.o,{backgroundColor:a,children:(0,R.jsx)(C.F,{children:i?null:(0,R.jsx)(A,{uri:n.uri})})})},j=a(10506),T=a(62823),w=a(84875),I=a.n(w),L=a(45389);const M="J9GZWbcqWAQBbj0mGgBp",V="HBgE42egR1M0MoBZt7MA",Z="g0_tYvLXcZhPQLQuecrg";var O=function(e){var n=e.value,a=e.label,i=e.hasDivider,t=void 0!==i&&i;return(0,R.jsxs)("div",{className:V,children:[(0,R.jsx)(j.D,{variant:"canon",className:I()((0,L.Z)({},Z,t)),children:n}),(0,R.jsx)(j.D,{variant:"finale",semanticColor:"textSubdued",children:a})]})},W=a(39130),B=a(41583),E=1e3,Q=60*E,q=60*Q,G=24*q;var J={days:0,hours:0,minutes:0,seconds:0};function U(e){var n,a,i=function(e){return e.getTime()-(new Date).getTime()}(e);return i>0?(n=i,a=Math.abs(n),{days:Math.floor(a/G),hours:Math.floor(a%G/q),minutes:Math.floor(a%q/Q),seconds:Math.floor(a%Q/E)}):J}var Y=function(e){var n=e.targetDate,a=e.className,t=function(e){var n=(0,l.useState)((function(){return U(e)})),a=(0,W.Z)(n,2),i=a[0],t=a[1];return(0,B.Y)((function(n){var a=U(e);t(a),a===J&&n()}),1e3),i}(n),r=t.days,o=t.hours,d=t.minutes,s=t.seconds;return(0,R.jsxs)("div",{className:I()(M,a),children:[(0,R.jsx)(O,{value:r,label:i.ag.get("web-player.album-prerelease.days",r),hasDivider:!0}),(0,R.jsx)(O,{value:o,label:i.ag.get("web-player.album-prerelease.hours",o),hasDivider:!0}),(0,R.jsx)(O,{value:d,label:i.ag.get("web-player.album-prerelease.minutes",d),hasDivider:!0}),(0,R.jsx)(O,{value:s,label:i.ag.get("web-player.album-prerelease.seconds",s)})]})},$=a(23006),H=a(35833),z=a(61996);const X="xjbmV4vvBCu7c5U6nAgL";var K=function(e){var n,a=e.prerelease,i=e.backgroundColor,t=a.content,r=a.releaseDate,o=t,d=(0,l.useMemo)((function(){return r?new Date(r):void 0}),[r]);return(0,R.jsxs)($.gF,{backgroundColor:i,children:[(0,R.jsx)(H.W,{children:o.name?(0,R.jsx)(z.i,{text:o.name}):null}),(0,R.jsx)($.Oz,{images:o.coverArt.sources,name:null!==(n=o.name)&&void 0!==n?n:"",placeholderType:"album"}),(0,R.jsxs)($.sP,{children:[(0,R.jsx)(j.D,{variant:"mestoBold",children:(0,T.R)(o.type)}),(0,R.jsx)($.xd,{children:o.name}),(0,R.jsx)($.QS,{creators:o.artists,releaseDate:r}),d?(0,R.jsx)(Y,{targetDate:d,className:X}):null]})]})},ee=a(62599),ne=a(68833),ae={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"albumPreRelease"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lookup"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"uri"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseData"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}}]}}]}}].concat((0,s.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"preReleaseContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseArtistItem"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorRaw"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}},{kind:"Field",name:{kind:"Name",value:"isFallback"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}}]}}]),(0,s.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseArtistItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}}]}}]}}]}}]}}]}}]}}]))},ie=function(e,n){return(0,u.a)(ae,e,n)};function te(e,n){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return re(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return re(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){o=!0,r=e},f:function(){try{l||null==a.return||a.return()}finally{if(o)throw r}}}}function re(e,n){(null==n||n>e.length)&&(n=e.length);for(var a=0,i=new Array(n);a<n;a++)i[a]=e[a];return i}function le(e){var n,a,i,t,r,l,o=e.preReleaseContent,d=void 0;o&&(d={artists:oe(o.artists.items),name:null!==(a=o.name)&&void 0!==a?a:void 0,uri:o.uri,coverArt:{extractedColors:null===(i=o.coverArt)||void 0===i||null===(t=i.extractedColors)||void 0===t?void 0:t.colorRaw,sources:null!==(r=null===(l=o.coverArt)||void 0===l?void 0:l.sources)&&void 0!==r?r:[]},type:o.type,tracks:o.tracks});return{uri:e.uri,releaseDate:null===(n=e.releaseDate)||void 0===n?void 0:n.isoString,content:d}}function oe(e){var n,a,i,t=[],r=te(e);try{for(r.s();!(i=r.n()).done;){var l=i.value;if("Artist"===l.data.__typename)t.push({name:l.data.profile.name,id:l.data.id,uri:l.data.uri,images:null!==(n=null===(a=l.data.visuals.avatarImage)||void 0===a?void 0:a.sources)&&void 0!==n?n:[]})}}catch(e){r.e(e)}finally{r.f()}return t}var de=a(8161);const se="H2kQJCtEGTjIDaPPniwb";var ue=function(e){var n,a,t=function(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie)({uri:e},{staleTime:o,cacheTime:d}),a=n.data;return{loading:n.loading,error:!!n.error,prerelease:(0,l.useMemo)((function(){if(!a)return null;var n,i=te(a.lookup);try{for(i.s();!(n=i.n()).done;){var t=n.value;if("PreReleaseResponseWrapper"===t.__typename&&"PreRelease"===t.data.__typename&&t.data.uri===e)return le(t.data)}}catch(e){i.e(e)}finally{i.f()}return null}),[a,e])}}(e.uri),r=t.prerelease,s=t.loading,u=t.error,m=function(e){var n,a=void 0;return null!=e&&null!==(n=e.content)&&void 0!==n&&n.coverArt.extractedColors&&(a=e.content.coverArt.extractedColors.isFallback?void 0:e.content.coverArt.extractedColors.hex),(0,de.Y)(a),a}(r);return s||u||!r?(0,R.jsx)(ne.h,{hasError:!!u,errorMessage:i.ag.get("error.not_found.title.album")}):(0,R.jsxs)("section",{className:se,children:[(0,R.jsx)(ee.$,{children:i.ag.get("album.page-title",null!==(n=null===(a=r.content)||void 0===a?void 0:a.name)&&void 0!==n?n:"")}),(0,R.jsx)(K,{prerelease:r,backgroundColor:m}),(0,R.jsx)(_,{prerelease:r,backgroundColor:m})]})}}}]);
//# sourceMappingURL=xpui-routes-album-prerelease.js.map