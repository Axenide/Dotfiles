"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7553],{11425:(e,t,r)=>{r.r(t),r.d(t,{default:()=>J});var a=r(45389),n=(r(83001),r(22369),r(8760),r(27639),r(71756),r(30246),r(62780),r(45880),r(16366),r(70785),r(95675),r(61235),r(7845),r(29543),r(70969),r(66715),r(30479),r(75341),r(59496)),o=r(61740),i=r(41177),l=r(69413),s=r(44652),c=r(59272),u=r(17249),d=r(84737),f=r(54669),g=r(60817),p=r(77999),m=r(68833),y=r(64371),h=r(69770),b=r(50200),j=r(11794),x=r(56394),k=r(60847),v=r(58460),D=r(39547),P=r(79105),O=r(11379),w=r(62179),F=r(48850),C=r(1003),E=r(20188),S=r(58643),I=r(92885),T=r(24898),L=r(19382),A=r(4637),R=n.memo((function(e){var t=e.tracklistDomRef,r=(0,E.fU)(I.createDesktopSearchBarEventFactory,{}),a=r.spec,o=r.logger,i=(0,n.useCallback)((function(){o.logInteraction(a.filterFieldFactory().keyStrokeFilter())}),[o,a]),l=(0,n.useCallback)((function(){o.logInteraction(a.filterFieldFactory().hitClearFilter())}),[o,a]),s=(0,n.useCallback)((function(){o.logInteraction(a.sortButtonFactory().hitSort())}),[o,a]);return(0,A.jsxs)("div",{className:h.Z.searchBoxContainer,children:[(0,A.jsx)(n.Suspense,{fallback:null,children:(0,A.jsx)(T.K,{placeholder:u.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:t,onFilter:i,onClear:l})}),(0,A.jsx)(L.l,{columns:x.P0,onSort:s})]})})),U=r(93089),_=r(58162),B=r(29893),N=r(73949),Q=r(9102),M=r(72102),z=r(23213),G=r(4954),H=r(834),Z=r(59672);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V=n.lazy((function(){return Promise.all([r.e(1814),r.e(9805),r.e(682)]).then(r.bind(r,49805))})),W=[j.QD.INDEX,j.QD.TITLE,j.QD.ALBUM,j.QD.ADDED_AT,j.QD.DURATION],$="your_library",X=function(e){var t=e.data,r=e.canFilter,a=e.canSort,o=t.metadata,c=o.uri,v=o.name,w=o.totalLength,I=(0,n.useRef)(null),T=w>0,L=w>0,B=(0,P.Y5)("#5038a0"),Q=(0,n.useContext)(b.fo).filter,M=(0,n.useContext)(x.Gb),z=M.sortState,G=M.setSortState,H=(0,E.fU)(s.createDesktopLikedSongsEventFactory,{data:{uri:c}}),Z=H.spec,q=H.logger,K=n.useMemo((function(){return Z.headerFactory()}),[Z]),V=n.useMemo((function(){return Z.tracklistFactory()}),[Z]);(0,n.useEffect)((function(){null===z.column&&G({column:j.QD.ADDED_AT,order:j.kn.DESC})}),[z,G]);var X=(0,i.ur)(),Y=(0,i.TH)(),J="POP"!==X?new URLSearchParams(Y.search).get("uri"):null,ee=(0,C.n)((0,O.I)(c,(0,S.w)(z),Q),{featureIdentifier:$,referrerIdentifier:"your_library"}),te=ee.isPlaying,re=ee.togglePlay,ae=ee.usePlayContextItem,ne=ee.isActive,oe=function(){var e=(0,_.aK)({isPlaying:te,isActive:ne,spec:Z.actionBarFactory().playButtonFactory(),logger:q,uri:c});re({loggingParams:e})},ie=(0,n.useCallback)((function(e,t){var r=Z.actionBarFactory().downloadButtonFactory();t===F.mc.ADD?q.logInteraction(r.hitDownload({itemToDownload:c})):t===F.mc.REMOVE?q.logInteraction(r.hitRemoveDownload({itemToRemoveFromDownloads:c})):t===F.mc.NO_PERMISSION&&q.logInteraction(r.hitUiReveal())}),[q,Z,c]);return(0,A.jsxs)("section",{role:"presentation",className:h.Z.playlist,"data-testid":"playlist-page",children:[(0,A.jsx)(g.$,{children:u.ag.get("playlist.page-title",v)}),(0,A.jsx)(D.s,{metadata:t.metadata,isPlaying:te,togglePlay:oe,backgroundColor:B,specLikedSongs:K}),(0,A.jsx)(d.o,{backgroundColor:B,children:(0,A.jsxs)(d.F,{children:[L?(0,A.jsx)(y.$,{onClick:oe,isPlaying:te,size:"lg",uri:c,ariaPauseLabel:u.ag.get("playlist.a11y.pause",v),ariaPlayLabel:u.ag.get("playlist.a11y.play",v)}):null,t.metadata.totalLength>0&&(0,A.jsx)(N.v,{uri:c,renderEnabled:function(){return(0,A.jsx)(k.v,{uri:c})}}),(0,A.jsx)(f.o,{uri:c,canDownload:T,isFollowing:!0,onFollow:function(){},size:f.q.md,onClick:ie}),r&&a&&(0,A.jsx)(E.Nh,{spec:Z.actionBarFactory(),children:(0,A.jsx)(R,{tracklistDomRef:I})})]})}),(0,A.jsx)("div",{className:"contentSpacing",children:w>0?(0,A.jsx)(n.Suspense,{fallback:(0,A.jsx)(m.h,{hasError:!1,errorMessage:u.ag.get("error.request-collection-tracks-failure")}),children:(0,A.jsx)(E.Nh,{spec:V,children:(0,A.jsx)(U.p,{nrTracks:w,columns:W,collectionUri:c,scrollToUri:J,usePlayContextItem:ae,outerDomRef:I,spec:V,initialItems:t.contents.items})})}):(0,A.jsx)(p.u,{message:u.ag.get("collection.empty-page.songs-subtitle"),title:u.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:u.ag.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,A.jsx)(l.F,{"aria-hidden":"true"})})})]})},Y=n.memo((function(e){var t=e.user,r=e.uri,a=(0,n.useContext)(b.fo).filter,i=(0,n.useContext)(x.Gb).sortState,l=function(e,t,r){var a=(0,n.useContext)(w.H),o=(0,Q.useQueryClient)(),i=(0,M.jP)((function(){return["useLikedSongs",e,r]}),[e,r]),l=(0,Q.useQuery)(i(),(function(){return a.getTracks(r)}),{cacheTime:18e5,keepPreviousData:!0,refetchOnWindowFocus:!1}).data,s=(0,n.useCallback)((function(){o.invalidateQueries(i())}),[o,i]);(0,G.b)(z.EW.UPDATE,s);var c=(0,Z.I2)(t.id);return c&&l?{metadata:{uri:e,name:c.name,images:c.images,totalLength:null==l?void 0:l.totalLength,unfilteredTotalLength:l.unfilteredTotalLength,owner:(0,H.V)(t)},contents:l}:null}(r,t,{offset:0,limit:25,sort:(0,S.w)(i),filter:a}),s=(0,n.useContext)(w.H).getCapabilities(),c=(0,o.v9)(B.n5),d=(0,v.U)("spotify:user:".concat(c,":collection")).isEnhanced;if(l){var f=(0,A.jsx)(X,{data:l,canFilter:s.canFilterTracksAndEpisodes&&l.metadata.unfilteredTotalLength>0,canSort:s.canSortTracksAndEpisodes&&l.metadata.unfilteredTotalLength>0});return(0,A.jsx)(N.v,{uri:l.metadata.uri,renderEnabled:function(){return d?(0,A.jsx)(n.Suspense,{fallback:null,children:(0,A.jsx)(x.kz,{uri:l.metadata.uri,children:(0,A.jsx)(V,{metadata:K(K({},l.metadata),{},{collaborators:{count:1,items:[{isOwner:!0,user:l.metadata.owner,tracksAdded:l.metadata.totalLength}]}}),capabilities:s,featureIdentifier:$})})}):f},renderDisabled:function(){return f}})}return(0,A.jsx)(m.h,{hasError:!1,errorMessage:u.ag.get("error.not_found.title.playlist"),loadOffline:s.canModifyOffline})}));const J=function(){var e=(0,o.v9)(B.Gg).user;if(null===e)return null;var t=(0,c.wG)(e.id).toURI();return(0,A.jsx)(x.kz,{uri:t,children:(0,A.jsx)(b.hz,{uri:t,children:(0,A.jsx)(Y,{uri:t,user:e})})})}},39547:(e,t,r)=>{r.d(t,{s:()=>a.s});var a=r(42645)}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map