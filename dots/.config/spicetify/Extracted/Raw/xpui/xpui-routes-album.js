"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[2342],{45286:(e,n,i)=>{i.r(n),i.d(n,{default:()=>$e});var t=i(45389),r=i(8850),a=i(39130),l=i(10995),o=i.n(l),s=(i(83001),i(22369),i(8760),i(27639),i(71756),i(5538),i(45880),i(16366),i(70785),i(82088),i(30246),i(90511),i(162),i(31781),i(95675),i(61235),i(62780),i(7845),i(29543),i(70969),i(66715),i(30479),i(75341),i(59496)),c=i(61740),u=i(41177),d=i(10506),m=i(70802),g=i(94782),p=i(38674),h=i(17920),v=i(17249),f=i(84737),b=i(71767),j=i(54669),k=i(56075),y=i(52300),x=i(76561),O=i(60817),w=i(23006),N=i(35833),S=i(61996),P=i(68833),C=i(980),D=i(41860),F=i(45327),I=i(23213),U=i(27021),T=i(6034),M=i(4637),A=function(e){var n,i=e.children,t=e.content,r=e.onIntercept,a=void 0===r?function(){}:r,l=(0,T.g)();try{n=s.Children.only(i)}catch(e){return(0,M.jsx)(M.Fragment,{children:i})}return l?(0,M.jsx)(U.Nt,{trigger:"click",action:"open",placement:"bottom",offset:[0,20],content:t,children:s.cloneElement(n,{onClick:a})}):(0,M.jsx)(M.Fragment,{children:i})},L=(i(69724),i(98148)),E=i(63892),V=i(88652),Z=i(78142),B=i(26482),z=i(90775);const q="WHINADihyTCx2VFxwY8X";function R(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Q(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?R(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):R(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var _=function(e){var n=e.title,i=e.description,t=(0,c.I0)(),r=(0,V.qT)(),a=(0,z.o)();return(0,s.useEffect)((function(){a({intent:"open-upsell",type:"view"})}),[a]),(0,M.jsx)(U.yv,{children:(0,M.jsxs)("div",{className:q,children:[(0,M.jsx)(d.D,{as:"p",variant:"cello",children:n}),(0,M.jsx)(d.D,{as:"p",variant:"mesto",children:i}),(0,M.jsxs)("div",{children:[(0,M.jsx)(L.o,{onClick:function(){a({intent:"close-upsell",type:"click"}),r({type:"close"})},children:v.ag.get("action-trigger.button.not-now")}),(0,M.jsx)(E.D,{onClick:function(){a({intent:"login",type:"click"}),t((0,B.sX)())},children:v.ag.get("login")})]})]})})},H=function(e){return(0,M.jsx)(Z.ZP,{value:"tooltip-with-cta",children:(0,M.jsx)(_,Q({},e))})},X=["uri"];function Y(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function W(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var G=function(e){var n=e.uri,i=(0,C.Z)(e,X),t=(0,F.j)();return(0,M.jsx)(A,{content:(0,M.jsx)(H,{title:v.ag.get("action-trigger.save-library"),description:v.ag.get("action-trigger.save-album")}),onIntercept:function(){return t.storeAction(D.wH,{operation:I.pT.ADD,uris:[n]})},children:(0,M.jsx)(b.H,W({},i))})},J=i(64371),K=i(83014),$=(i(69109),i(9294)),ee={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryAlbumMerch"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albumUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"merch"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"20"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumMerchItem"}}]}}]}}]}}]}}]}}].concat((0,K.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"albumMerchItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Merch"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"image"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"price"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]))},ne=i(86120);const ie="iEG0moJ3mt1_j9Lho7MA";var te=function(e){var n,i,t,r,a=e.albumName,l=e.albumURI,o=(t={uri:l},r={cacheTime:5*$.y},(0,$.a)(ee,t,r)).data,s=null!=o&&o.albumUnion&&"merch"in o.albumUnion?null==o||null===(n=o.albumUnion)||void 0===n||null===(i=n.merch)||void 0===i?void 0:i.items:[];return s&&(null==s?void 0:s.length)>0?(0,M.jsx)("div",{className:"contentSpacing",children:(0,M.jsx)("div",{className:ie,children:(0,M.jsx)(ne.s,{id:a,uri:l,merchItems:s,merchVariant:"Album page merch items"})})}):null},re=i(59927),ae=i(76956),le=i(79105),oe=i(58162),se=i(47982),ce=i(92722),ue=i(58069),de=i(710),me=i(19873),ge=i(1003),pe=i(8632),he=i(20188),ve=i(32572),fe=i(31193),be=(i(40265),864e5),je=365.25*be;var ke=i(3594),ye=i(98335),xe=i(10785),Oe=i(29893),we=i(63461),Ne=i(75897),Se=i(12033);const Pe="TCmZzqInstJMZjkHgnw3",Ce="PeNI572tTpqsN23o3QhJ",De="oUsSfFiifMPXqW0kHjR6",Fe="XKvEMQZlPfPncTqiitM5",Ie="GdbPVlmUCW0Q6ZZ0z0wh",Ue="Hu7O5y7x5c7wUYFbnIoS";var Te=s.memo((function(e){var n=e.images,i=e.title,t=e.isOpen,r=e.onClose,a=(0,s.useMemo)((function(){return(0,Se.X)(n,{desiredSize:1e4})}),[n]);return a?(0,M.jsx)(we.Z,{className:Pe,isOpen:t,onRequestClose:r,animation:{modal:{base:Fe,afterOpen:Ie,beforeClose:Ue}},animated:!0,children:(0,M.jsxs)("div",{style:{"--image-width":"".concat(a.width,"px"),"--image-height":"".concat(a.height,"px")},className:Ce,children:[(0,M.jsx)(Ne.E,{loading:"eager",alt:i,src:a.url,className:De}),(0,M.jsx)(L.o,{onClick:r,semanticColor:"textBase",children:v.ag.get("web-player.cover-art-modal.close")})]})}):null})),Me=i(59272),Ae=i(14255),Le=i(19224),Ee=function(e){var n=e.releases;return(0,M.jsx)(Ae.v,{children:n.map((function(e){return(0,M.jsx)(Le.s,{role:"menuitem",to:(0,Me.EC)(e.uri).toURLPath(!0),children:e.name},e.uri)}))})},Ve=i(73923),Ze=i(17452),Be=i(31675);const ze="album-albumPage-sectionWrapper",qe="zddjxV2lX9ukNM5QXloA",Re="lVqlPjQLuQhK2flsxB78",Qe="O_EguRjsZ4uI1hHamkOA",_e="jcaQQxoVnuuhtVwDJU1R",He="x-album-releasesDropdown",Xe="in4OjUTflcsoj9RUpf05";function Ye(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function We(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ye(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ye(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Ge=s.lazy((function(){return i.e(1159).then(i.bind(i,61159))}));function Je(e){switch(e){case Ze.V.Single:return v.ag.get("single");case Ze.V.Ep:return v.ag.get("ep");case Ze.V.Compilation:return v.ag.get("compilation");case Ze.V.Album:default:return v.ag.get("album")}}var Ke=function(e){var n,i,t,l,P,C,D,F,I,U,T,A=e.uri,L=e.album,E=(0,u.TH)(),V=(0,z.o)(),Z=(0,ae.k)(),B=(0,me.y)(),q=(0,he.fU)(h.createDesktopAlbumEventFactory,{data:{uri:A}}),R=q.spec,Q=q.logger,_=q.UBIFragment,H=(0,s.useMemo)((function(){return R.trackListFactory()}),[R]),X=(0,s.useMemo)((function(){return R.moreByArtistShelfFactory()}),[R]),Y=s.useMemo((function(){return R.actionBarFactory()}),[R]),W=L.moreAlbumsByArtist,K=(0,me.Z)(A),$=(0,a.Z)(K,2),ee=$[0],ne=$[1],ie=parseInt(new URLSearchParams((0,u.TH)().search).get("index")||"0",10),de=(0,re.Y)(A),we=(0,ge.n)({uri:de},{featureIdentifier:"album"}),Ne=we.usePlayContextItem,Se=we.togglePlay,Pe=we.isPlaying,Ce=we.isActive,De=(0,s.useCallback)((function(){var e=(0,oe.aK)({isPlaying:Pe,isActive:Ce,spec:Y.playButtonFactory(),logger:Q,uri:A});Se({loggingParams:e})}),[Pe,Ce,Se,Y,Q,A]),Fe=(0,s.useCallback)((0,r.Z)(o().mark((function e(){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Y.saveButtonFactory(),n=ee?i.hitDislike({itemToBeDisliked:A}):i.hitLike({itemToBeLiked:A}),Q.logInteraction(n),V({targetUri:A,intent:ee?"unsave":"save",type:"click"}),e.prev=4,e.next=7,ne(!ee);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:case"end":return e.stop()}}),e,null,[[4,9]])}))),[V,A,ee,ne,Y,Q]),Ie=(0,s.useCallback)((function(e,n){if(R){var i=R.headerFactory().artistNameFactory().hitUiNavigate({destination:n.creator.uri});Q.logInteraction(i)}}),[Q,R]),Ue=function(){var e=(0,s.useState)(!1),n=(0,a.Z)(e,2),i=n[0],t=n[1];return{isOpen:i,openModal:(0,s.useCallback)((function(){return t(!0)}),[]),closeModal:(0,s.useCallback)((function(){return t(!1)}),[])}}(),Me=Ue.isOpen,Ae=Ue.openModal,Le=Ue.closeModal,Ve=(0,p.W6)(xe.DU,{loadingValue:!1})?{onClick:Ae,ariaLabel:v.ag.get("web-player.album.open_coverart_modal")}:{},Ze=(0,s.useCallback)((function(){return new URLSearchParams(E.search.slice(1)).get("highlight")||""}),[E.search]),Ye=L.uri,Ke=L.name,$e=L.albumType,en=null===(n=L.release)||void 0===n?void 0:n.date,nn=L.nrTracks,tn=L.images,rn=null===(i=L.extractedColors)||void 0===i?void 0:i.colorRaw.hex,an=L.artists,ln=L.isPlayable,on=L.isCatalogueRestricted,sn=L.copyright.items,cn=L.courtesyLine,un=L.duration.durationMs,dn=L.duration.isEstimate,mn=Ze(),gn=null!==(t=null===(l=(0,c.v9)(Oe.Gg).overrides)||void 0===l?void 0:l.locale)&&void 0!==t?t:v.ag.getLocale(),pn=(0,ye.k)({uri:A,type:"locale"}),hn=(0,pe.OT)({albumName:Ke,albumType:$e,albumArtists:an.map((function(e){return e.name})).join(v.ag.getSeparator()),shouldLocalize:pn,i18n:v.ag});(0,le.Y5)(rn||null);var vn=function(e){return(0,s.useMemo)((function(){if(null==e||!e.date)return null;if("day"===e.precision){var n=new Date(e.date),i=(new Date).getTime()-n.getTime(),t=i%je;return t<3.5*be||t>312552e5?Math.round(i/je):null}return null}),[e])}(L.release);return(0,M.jsxs)("section",{className:ze,"data-testid":"album-page",children:[(0,M.jsx)(O.$,{children:hn}),null!==vn?(0,M.jsx)(s.Suspense,{fallback:null,children:(0,M.jsx)(Ge,{colorLight:null==L||null===(P=L.extractedColors)||void 0===P?void 0:P.colorLight.hex,colorDark:null==L||null===(C=L.extractedColors)||void 0===C?void 0:C.colorDark.hex,name:Ke,years:vn})}):null,(0,M.jsxs)(w.gF,{backgroundColor:rn,children:[(0,M.jsxs)(N.W,{children:[(0,M.jsx)(J.$,{size:"md",onClick:function(){return Se()},disabled:!ln,isPlaying:Pe,uri:A}),(0,M.jsx)(S.i,{text:Ke,dragUri:A,dragLabel:Ke})]}),(0,M.jsx)(se._P,{menu:(0,M.jsx)(x.Y,{uri:L.uri,artistUri:null==an||null===(D=an[0])||void 0===D?void 0:D.uri,sharingInfo:L.sharingInfo}),children:(0,M.jsx)(w.Oz,We({dragUri:Ye,images:tn,name:Ke,placeholderType:"album"},Ve))}),(0,M.jsxs)(w.sP,{children:[(0,M.jsx)(d.D,{variant:"mestoBold",children:Je($e)}),(0,M.jsx)(se._P,{menu:(0,M.jsx)(x.Y,{uri:L.uri,artistUri:null==an||null===(F=an[0])||void 0===F?void 0:F.uri,sharingInfo:L.sharingInfo}),children:(0,M.jsx)(w.xd,{dragUri:L.uri,dragLabel:L.name,children:Ke})}),(0,M.jsx)(w.QS,{creators:an,onCreatorClick:Ie,releaseDate:en,totalTracks:nn,durationMilliseconds:un,isEstimatedDuration:dn})]})]}),(0,M.jsx)(f.o,{backgroundColor:rn,children:(0,M.jsxs)(f.F,{children:[(0,M.jsx)(J.$,{onClick:De,disabled:!ln,isPlaying:Pe,size:"lg",uri:A}),(0,M.jsx)(G,{isAdded:!!ee,onClick:Fe,disabled:!(Z||null!=B&&B.getCapabilities().canModifyOffline),size:b.q.md,uri:A}),(0,M.jsx)(j.o,{uri:A,isFollowing:!!ee,onClick:function(e,n){return(0,oe.l7)(n,Y.downloadButtonFactory(),Q,A)},onFollow:Fe,size:j.q.md}),(0,M.jsx)(ce.y,{onShow:function(){return(0,oe.qq)(Y,Q)},menu:(0,M.jsx)(x.Y,{uri:L.uri,artistUri:null==an||null===(I=an[0])||void 0===I?void 0:I.uri,sharingInfo:L.sharingInfo}),children:(0,M.jsx)(k.z,{label:v.ag.get("more.label.context",Ke)})})]})}),on?(0,M.jsxs)("div",{className:qe,children:[(0,M.jsx)(d.D,{as:"h2",variant:"cello",className:Re,children:v.ag.get("windowed.product-album-header")}),(0,M.jsx)("div",{className:Qe,children:v.ag.get("windowed.product-album-description")})]}):null,(0,M.jsxs)("div",{className:"contentSpacing",children:[(0,M.jsx)(_,{spec:H,children:(0,M.jsx)(fe.L,{ariaLabel:Ke,nrTracks:(0,Be.y)(L.discs)?L.discs.totalCount+nn:nn,discs:L.discs,albumUri:Ye,highlightUri:mn,scrollToIndex:ie,usePlayContextItem:Ne,initalTracks:L.items})}),(0,M.jsxs)("div",{className:Xe,children:[(0,M.jsxs)("div",{children:[en&&(0,M.jsx)(d.D,{as:"p",variant:"mesto",children:(0,ve.BI)((0,ve.RX)(en),gn,{year:"numeric",month:"long",day:"numeric"})}),(0,M.jsx)(ue.k,{copyrights:sn,courtesyLine:cn})]}),L.releases.items.length>0&&(0,M.jsx)(se.xV,{menu:(0,M.jsx)(Ee,{releases:L.releases.items}),children:function(e,n,i){return(0,M.jsxs)("button",{ref:i,className:He,type:"button",onClick:n,children:[(0,M.jsx)(d.D,{variant:"mesto",children:v.ag.get("album-page.more-releases",L.releases.items.length)}),e?(0,M.jsx)(m.U,{iconSize:16}):(0,M.jsx)(g.i,{iconSize:16})]})}})]})]}),(0,M.jsx)(te,{albumName:Ke,albumURI:Ye}),(0,M.jsx)(M.Fragment,{children:(null==W?void 0:W.length)>0&&(0,M.jsx)("div",{className:"contentSpacing",children:(0,M.jsx)(_,{spec:X,children:(0,M.jsx)(ke.q,{index:0,id:"more-albums",className:_e,title:v.ag.get("album-page.more-by-artist",null==an||null===(U=an[0])||void 0===U?void 0:U.name),total:W.length,seeAllUri:"".concat(null==an||null===(T=an[0])||void 0===T?void 0:T.uri.replace("artist","app:artist"),":discography"),seeAllLabel:v.ag.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:W.map((function(e,n){return(0,M.jsx)(y.i,{index:n,artists:an,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)}))})})})}),(0,M.jsx)(Te,{title:hn,isOpen:Me,onClose:Le,images:tn})]})};const $e=s.memo((function(){var e=(0,u.UO)().albumId,n="spotify:album:".concat(e),i=(0,Ve.j)(n),t=i.loading,r=i.error,a=i.data,l=i.canLoadOffline;return t||!a?(0,M.jsx)(P.h,{hasError:null!==r,loadOffline:l,errorMessage:v.ag.get("error.not_found.title.album")}):(0,M.jsx)(de.fd,{surface:de.Tg.ALBUM,uris:[n],children:(0,M.jsx)(Ke,{uri:n,album:a})})}))},58069:(e,n,i)=>{i.d(n,{k:()=>l});i(162),i(16366),i(31781),i(69109);var t=i(10506);const r="rTMkDBDp47Eo12ZEQv4U";var a=i(4637),l=function(e){var n=e.copyrights,i=e.courtesyLine,l=(n||[]).map((function(e,n){var i,r=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");return i="C"===e.type?"©":"P"===e.type?"℗":"(".concat(e.type,")"),(0,a.jsx)(t.D,{as:"p",variant:"finale",dir:"auto",children:"".concat(i," ").concat(r)},n)}));return i&&l.unshift((0,a.jsx)(t.D,{as:"p",variant:"finale",dir:"auto",children:i},l.length)),(0,a.jsx)("div",{className:r,children:l})}}}]);
//# sourceMappingURL=xpui-routes-album.js.map