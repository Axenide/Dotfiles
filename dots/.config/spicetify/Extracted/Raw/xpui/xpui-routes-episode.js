"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{23854:(e,t,n)=>{n.d(t,{o:()=>a});var i=n(38674),r=n(10785);function a(){return{version:(0,i.W6)(r.GE)?2:1}}},55220:(e,t,n)=>{n.d(t,{p:()=>y,q:()=>l.q});n(95675),n(61235),n(62780),n(22369),n(7845),n(29543),n(70969),n(66715),n(30479),n(75341);var i=n(45389),r=n(39130),a=n(59496),s=n(61740),o=n(19873),l=n(54669),c=n(48472),u=n(90775),d=n(4637);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var m=a.memo((function(e){var t=e.uri,n=e.size,i=void 0===n?l.q.md:n,p=e.className,m=e.onClick,y=e.showUpsell,f=(0,o.Z)(t),h=(0,r.Z)(f,2),g=h[0],b=h[1],v=(0,s.I0)(),x=(0,u.o)(),j=(0,a.useCallback)((function(){x({targetUri:t,intent:g?"remove-from-library":"add-to-library",type:"click"}),b(!g),v(g?(0,c.SS)():(0,c.kK)())}),[x,t,g,b,v]);return(0,d.jsx)(l.o,{className:p,isFollowing:g,onFollow:j,onClick:m,uri:t,size:i,showUpsell:y})})),y=a.memo((function(e){return(0,d.jsx)(m,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}))},45917:(e,t,n)=>{n.r(t),n.d(t,{default:()=>kt});var i=n(45389),r=n(39130),a=(n(61235),n(69724),n(30246),n(162),n(83001),n(22369),n(27639),n(71756),n(45880),n(16366),n(70785),n(5538),n(31781),n(95675),n(62780),n(7845),n(29543),n(70969),n(66715),n(30479),n(75341),n(59496)),s=n(41177),o=n(38674),l=n(22065),c=n(53361),u=n(59272),d=n(17249),p=n(60817),m=n(9424),y=n(68833),f=n(8850),h=n(10995),g=n.n(h),b=n(94320),v=(n(8760),n(23854)),x=n(44813),j=n(4637);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=(0,a.lazy)((function(){return n.e(9175).then(n.bind(n,39175))}));function O(e){var t=(0,x.m)(),n=(0,v.o)();return t?(0,j.jsx)(a.Suspense,{fallback:!0,children:(0,j.jsx)(C,k(k({reason:"Episode page"},n),e))}):null}const T="dpN5ViPOceUWNB5EQPHN",w="vBcxPq3E2okwgXOkVPEM",D="HCCBXwdFvq6omWW2hR0N",S="bJOPO5Zo7dpjSVDwEpSw",E="TXdDDpokVTyJzDEDWHHf",I="HaSbtEVJnxBsaJ5SRi0M",U="YldGldlfaI9myEGXQf9g",N="qJHVIpJn1vLPWsAKfTEZ",R="wSIzjkVlr0Zdy7di2vRm",L="hYS_K1NATGyWt6tCSRqQ",B="hVVaM4pF9arpQ8Nvn2a1",M="zf0Eac1LugsHUacz74Zf",F="TnNaqxbaI0hzhBQZ7wE0",A="zSw1lG1TNe_xm6KTqtCv",Z="MlEQDkXnjdKKJueJ9kkB",z="jg0xlyD1yjh0DPNG6eOg",H="QiHXpFb4dLZNOFe5gpp3";n(71541);var W=n(10506),_=n(45034),K=n(20188),q=n(63892),V=n(10785),J=n(12116),$=function(e){var t=e.cardHeaderText,n=e.cardBodyText,i=e.buttonText,r=e.buttonTarget;return(0,o.W6)(V.vp)?(0,j.jsxs)("div",{className:U,children:[(0,j.jsxs)("div",{className:N,children:[(0,j.jsx)(W.D,{variant:"balladBold",semanticColor:"textBase",children:t}),(0,j.jsx)(W.D,{semanticColor:"textBase",children:n})]}),(0,j.jsx)(q.D,{buttonSize:"sm",colorSet:"invertedLight",href:(0,u.EC)(r).toURLPath(!0),component:J.Z,children:i})]}):null},G=function(e){var t=e.areHTMLDescriptionsEnabled,n=e.contentInformation,i=e.description,r=e.hasDescription,s=e.htmlDescription,o=e.onExpanded,l=e.onTimeStampClick,c=e.playability,u=e.showHeader,p=void 0===u||u,m=e.spec,y=(0,K.$P)(),f=(r||n)&&p,h=(0,a.useCallback)((function(e){var t=m.readMoreButtonFactory();y.logInteraction(e?t.hitUiReveal():t.hitUiHide()),null==o||o()}),[m,y,o]);return(0,j.jsxs)(j.Fragment,{children:[f&&(0,j.jsx)(W.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:D,children:d.ag.get("episode.description-title")}),n&&(0,j.jsx)($,{cardHeaderText:n.cardHeaderText,cardBodyText:n.cardBodyText,buttonText:n.buttonText,buttonTarget:n.buttonTarget}),r&&(0,j.jsx)(_.o,{className:w,onTimeStampClick:l,maxLines:4,onExpanded:h,content:(i||"").trim(),htmlContent:t&&s?s:void 0,enableTimestamps:c.playable})]})},Q=n(84875),Y=n.n(Q),X=n(91929),ee=n(83453),te=n(60071),ne=n(70599),ie=n(10146),re=n(87164),ae=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(ae||{}),se=a.memo((function(e){var t=e.transcriptSections,n=e.descriptionContent,s=e.transcriptContent,o=e.spec,l=(0,K.$P)(),c=(0,a.useState)(ae.DESCRIPTION),u=(0,r.Z)(c,2),p=u[0],m=u[1],y=a.useContext(re.VX).scrollNodeRef,f=(0,X.YD)({threshold:[1],root:y.current,rootMargin:"-".concat(ie.K1+1,"px 100000px 0px 100000px")}),h=f.ref,g=f.inView,b=(0,a.useRef)(null),v=(0,a.useCallback)((function(e){b.current=e,h(e)}),[h]);return(0,a.useEffect)((function(){var e,t,n=null===(e=b.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.offsetTop,i=null==y?void 0:y.current;if(n&&i){var r=n-ie.K1;i.scrollTop>r&&i.scrollTo({top:r})}}),[y,p]),(0,j.jsx)(ee.l,{list:(0,j.jsxs)(te.F,{className:Y()(Z,(0,i.Z)({},z,!g)),ref:v,children:[(0,j.jsx)(ne.c,{label:d.ag.get("web-player.episode.description"),sentenceCase:!0,active:p===ae.DESCRIPTION,onClick:function(){var e=o.tabsFactory().descriptionTabButtonFactory().hitUiReveal();l.logInteraction(e),m(ae.DESCRIPTION)},className:Y()(H,(0,i.Z)({},R,p===ae.DESCRIPTION))}),(0,j.jsx)(ne.c,{label:d.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===t,active:p===ae.TRANSCRIPT,onClick:function(){var e=o.tabsFactory().transcriptTabButtonFactory().hitUiReveal();l.logInteraction(e),m(ae.TRANSCRIPT)},className:Y()(H,(0,i.Z)({},R,p===ae.TRANSCRIPT))})]}),children:null===t||p===ae.DESCRIPTION?n:s})})),oe=n(25537),le=n(80082),ce=n(1003),ue=n(39106),de=(0,a.memo)((function(e){var t=e.transcriptSections,n=e.onTimeStampClick,i=e.episodeUri,r=(0,K.fU)(oe.m,{data:{uri:i}}),a=r.spec,s=r.logger,o=(0,ce.n)({uri:i},{featureIdentifier:"episode"}).isPlaying,l=a.timestampLinkFactory();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:B,children:(0,j.jsx)(W.D,{variant:"viola",semanticColor:"textBase",children:d.ag.get("web-player.episode.transcript.disclaimer")})}),t.map((function(e,t){var r="transcript-section-".concat(t);return(0,j.jsxs)("div",{className:L,children:[(0,j.jsx)("button",{className:M,onClick:function(){n(e.startMs,r),s.logInteraction(o?l.hitSeekToTime({msToSeekTo:e.startMs}):l.hitPlay({itemToBePlayed:i}))},children:(0,j.jsx)(le.D,{id:r,targetURI:(0,u.EC)(i),fadeOut:!0,children:(0,j.jsx)(W.D,{variant:"finaleBold",semanticColor:"textSubdued",className:F,children:(0,ue.m)(e.startMs)})})}),e.content.map((function(e,t){return(0,j.jsx)(W.D,{variant:"viola",semanticColor:"textBase",className:A,dir:"auto",children:e},"transcript-text-".concat(t))}))]},r)}))]})})),pe=(n(69109),n(81289),n(17748)),me=n(11794),ye=n(61453),fe=n(55590),he=n(15206),ge=n(98235),be=n(69395),ve=n(14699),xe=n(48215),je=n(47982),Pe=n(78142);const ke="OYehkMWcGJRKPkByp46K",Ce="uc1bXkrZqrCz0CMK4lBb",Oe="qZeibBbA3SVClzEueYND";var Te=function(e){var t,n=e.episodeUri,i=e.index,r=e.duration,s=e.start,o=e.stop,l=e.name,c=e.uri,u=e.artists,p=e.album,m=e.playable,y=(0,xe.k)({episodeUri:n,start:s,stop:o}),f=y.isActive,h=y.isPlaying,g=y.onClick,b=(0,a.useCallback)((function(e,t){g(t)}),[g]),v=(0,K.fU)(he.r,{data:{position:i,reason:"",uri:c}}).spec;return(0,j.jsx)(Pe.ZP,{value:"row",index:i,children:(0,j.jsx)(je.xV,{trigger:"right-click",action:"open",menu:(0,j.jsx)(ge.$,{uri:c}),children:(0,j.jsxs)(ve.c,{uri:c,index:i,ariaRowIndex:i+1,dragMetadata:{name:l,createdBy:null!==(t=null==u?void 0:u[0].name)&&void 0!==t?t:""},onTriggerPlay:b,isActive:f,isPlayable:m,spec:v,children:[(0,j.jsxs)(be.vZ,{ariaColIndex:0,children:[(0,j.jsx)(be.Du,{uri:c,playAriaLabel:d.ag.get("tracklist.a11y.play",l,null==u?void 0:u[0].name),onClick:b,isPlaying:h,isActive:f,spec:v,children:(0,j.jsx)(be.km,{children:(0,j.jsx)("img",{className:Ce,src:p.image,alt:p.name})})}),(0,j.jsxs)(be.vm,{children:[(0,j.jsx)(be.Wh,{titleText:l,children:l}),(0,j.jsx)(be.K9,{children:(0,j.jsx)(be.T6,{artists:u,spec:v})})]})]}),(0,j.jsx)(be.UA,{ariaColIndex:1,children:(0,j.jsx)(be.BM,{uri:p.uri,name:p.name,spec:v,children:p.name})}),(0,j.jsxs)(be.mU,{ariaColIndex:2,children:[(0,j.jsx)(be.qS,{uri:c,spec:v}),(0,j.jsx)(be.A$,{duration:r}),(0,j.jsx)(be.Zv,{spec:v,menu:(0,j.jsx)(ge.$,{uri:c,artists:u}),label:d.ag.get("more.label.track",l,null==u?void 0:u[0].name)})]})]})})})};function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return e.reduce((function(e,i,r){return(r>0||t>0)&&e.push({type:"SPACER",id:"spacer-".concat(e.length)}),"MUSIC"===i.type?e.push(function(e,t,n){return{type:"MUSIC",index:t,uri:n.uri,episodeUri:e,start:n.start,stop:n.stop,duration:n.duration,name:n.track.name,artists:n.track.artists,album:n.track.album,playable:n.track.playable}}(n,r,i)):"TALK"===i.type&&e.push(function(e,t,n){return{type:"TALK",index:t,uri:e,title:n.title,subtitle:n.subtitle,start:n.start,stop:n.stop,duration:n.duration,showUri:n.show.uri,showName:n.show.name}}(n,r,i)),e}),[])}const Ee=function(e){var t=e.uri,n=e.segmentCount,i=(0,ye.G)(),r=(0,a.useCallback)(function(){var e=(0,f.Z)(g().mark((function e(r,a){var s,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Math.ceil(r/2),e.prev=1,e.next=4,i.getSegments(t,s,a);case 4:return o=e.sent,e.abrupt("return",{items:Se(o,s,t),totalLength:2*n-1});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{items:[],totalLength:0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),[n,i,t]),s=(0,a.useCallback)((function(e){switch(e.type){case"SPACER":return(0,j.jsx)("div",{className:Oe},e.id);case"MUSIC":return(0,j.jsx)(Te,De({},e),"".concat(t,"-").concat(e.index));case"TALK":return(0,j.jsx)(pe.t,De({},e),"".concat(t,"-").concat(e.index));default:return(0,fe.U)(e)}}),[t]),o=d.ag.get("music_and_talk.in_this_episode");return(0,j.jsxs)("div",{children:[(0,j.jsx)(W.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:ke,children:o}),(0,j.jsx)(me.Pv,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:me.hU,columns:[me.QD.TITLE,me.QD.ALBUM_OR_SHOW,me.QD.DURATION],renderRow:s,fetchTracks:r,resolveUri:function(e){return"MUSIC"===e.type?e.uri:""},limit:50,nrTracks:2*n-1,testID:"music-and-talk-tracklist"})]})};var Ie=n(13956),Ue=function(e){var t=e.areHTMLDescriptionsEnabled,n=e.contentInformation,i=e.description,s=e.hasDescription,o=e.hasMusicAndTalkSegements,l=e.htmlDescription,c=e.onExpanded,u=e.onDescriptionTimestampClick,p=e.onTranscriptTimestampClick,m=e.playability,y=e.segmentCount,h=e.showUrl,v=e.transcript,x=e.transcriptEnabled,P=e.uri,k=e.spec,C=(0,K.$P)(),T=(0,a.useMemo)((function(){return k.descriptionSectionFactory()}),[k]),w=(0,a.useMemo)((function(){return T.trackListFactory()}),[T]),D=(0,a.useState)(null),E=(0,r.Z)(D,2),I=E[0],U=E[1],N=(0,a.useCallback)(function(){var e=(0,f.Z)(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ie.l)(t);case 2:n=e.sent,U(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);(0,a.useEffect)((function(){v&&v.length>0&&N(v[0].cdnUrl)}),[N,v]);var R=function(e){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(G,{hasDescription:s,contentInformation:n,onTimeStampClick:u,onExpanded:c,description:i,areHTMLDescriptionsEnabled:t,htmlDescription:l,playability:m,showHeader:e,spec:T}),o&&(0,j.jsx)(K.Nh,{spec:w,children:(0,j.jsx)(Ee,{segmentCount:y,uri:P})}),h&&(0,j.jsx)(b.P,{buttonSize:"sm",className:S,href:h,component:J.Z,onClick:function(){C.logInteraction(T.allEpisodesLinkFactory().hitUiNavigate({destination:h}))},children:d.ag.get("episode.see_all_episodes")}),(0,j.jsx)(O,{uri:P})]})};return(0,j.jsx)(j.Fragment,{children:x&&v&&(null==v?void 0:v.length)>0?(0,j.jsx)(se,{transcriptSections:I,descriptionContent:R(!1),transcriptContent:(0,j.jsx)(de,{transcriptSections:I||[],onTimeStampClick:p,episodeUri:P}),spec:k}):R(!0)})},Ne=n(35589),Re=n(6034),Le=n(56143),Be=n(8990),Me="activation-trigger-mme",Fe=function(e){var t=e.episodeUri,n=e.showUri,i=e.isLocked,r=e.isPlaying,a=e.isPlayDisabled,s=e.playButtonPlayLabel,o=e.playButtonPauseLabel,l=e.onClick,c=(0,Be.E)();if((0,Re.g)())return(0,j.jsx)(Le.JM,{size:Le.qE.lg,onClick:l,isPlaying:r,disabled:a,locked:i,ariaPlayLabel:s,ariaPauseLabel:o});var d=(0,j.jsx)(Ne.l,{showUri:n,enabled:i,renderInline:!1,children:(0,j.jsx)(Le.JM,{size:Le.qE.lg,onClick:l,isPlaying:r,disabled:a,locked:i,ariaPlayLabel:s,ariaPauseLabel:o})});return c?(0,j.jsx)(le.D,{id:Me,targetURI:(0,u.EC)(t),fadeOut:!0,children:d}):d},Ae=n(90775),Ze=n(28990),ze=n(79105),He=n(78742),We=n(40787),_e=n(9271),Ke=n(81793),qe=n(18255),Ve=n(8632),Je=n(24511),$e=n(83474),Ge=n(61740),Qe=n(4783),Ye=n(84737),Xe=n(71767),et=n(55220),tt=n(56075),nt=n(824),it=n(22355),rt=n(58162),at=n(92722),st=n(90902),ot=n(68975),lt=n(14227),ct=n(1962),ut=function(e){var t,n,i,s,o=e.episode,l=e.onPlayEpisode,c=e.isPlaying,u=e.isActive,p=e.isFullyPlayed,m=e.setIsFullyPlayed,y=e.backgroundColor,f=e.isLocked,h=e.spec,g=o.uri,b=o.playedState,v=o.contentRating,x=o.playability,P=(0,K.$P)(),k=(0,Ge.I0)(),C=(0,ot.z)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===g})),O=(0,r.Z)(C,1)[0],T=(0,_e.Y)((function(e){return null==e?void 0:e.duration})),w=(0,ct.r)({contentRating:null==v?void 0:v.label}).badges,D=(0,a.useCallback)((function(e){!x.playable&&w.nineteen&&(e.stopPropagation(),k((0,Qe.RM)(g||"")))}),[g,x.playable,w.nineteen,k]),S=(0,a.useCallback)((function(){var e=h.contextMenuButtonFactory().hitUiReveal();P.logInteraction(e)}),[P,h]),I=(0,a.useCallback)((function(e,t){(0,rt.l7)(t,h.downloadButtonFactory(),P,g)}),[P,h,g]),U=(0,a.useCallback)((function(e){var t=h.saveButtonFactory();P.logInteraction(e?t.hitLike({itemToBeLiked:g}):t.hitRemoveLike({itemNoLongerLiked:g}))}),[P,h,g]),N=!f&&!o.playability.playable,R=d.ag.get("tracklist.a11y.play",o.name,null===(t=o.podcast)||void 0===t?void 0:t.name),L=d.ag.get("tracklist.a11y.pause",o.name,null===(n=o.podcast)||void 0===n?void 0:n.name),B=null===(i=o.podcast)||void 0===i?void 0:i.uri;return(0,j.jsxs)(Ye.o,{backgroundColor:y,children:[(0,j.jsxs)(Ye.F,{children:[w.nineteen&&(0,j.jsx)(st.X,{className:E,size:16}),(0,j.jsx)(lt.E,{size:lt.$.LARGE,fullyPlayed:p,durationMs:u&&T?T:o.duration.milliseconds,releaseDate:Ct(null===(s=o.releaseDate)||void 0===s?void 0:s.isoString),resumePositionMs:b.playPositionMilliseconds,isPlaying:c,position:u&&O||void 0})]}),(0,j.jsxs)(Ye.F,{children:[(0,j.jsx)("div",{onClick:D,children:(0,j.jsx)(Fe,{episodeUri:o.uri,showUri:B,isLocked:f,onClick:function(){l(b.playPositionMilliseconds)},isPlaying:c,isPlayDisabled:N,playButtonPlayLabel:R,playButtonPauseLabel:L})}),!f&&(0,j.jsx)(et.p,{uri:o.uri,onClick:I}),(0,j.jsx)(nt.w,{uri:o.uri,size:Xe.q.md,onClick:U}),(0,j.jsx)(at.y,{onShow:S,menu:(0,j.jsx)(it.k,{uri:o.uri,sharingInfo:o.sharingInfo,showUri:B,contextUri:o.uri,isPlayed:p,onMarkAsPlayed:m}),children:(0,j.jsx)(tt.z,{label:d.ag.get("more.label.context",o.name)})})]})]})},dt=n(23006),pt=n(35833),mt=n(61996),yt=n(88843),ft=n(54691),ht=n(56203);var gt=function(e){var t,n,i=e.episode,r=e.isFullyPlayed,s=e.setIsFullyPlayed,o=e.backgroundColor,l=e.spec,c=i.uri,p=i.name,m=i.sharingInfo,y=i.playedState,f=i.episodeType,h=i.releaseDate,g=(0,K.$P)(),b=function(e,t,n,i,r){var a=t===Je.Wf.Episode;return(0,ht.G3)(e,i,n,r)?(0,j.jsx)(ht.Fg,{isMusicAndTalk:a}):a?d.ag.get("type.showEpisode"):d.ag.get("type.podcastEpisode")}(c,f||Je.Wf.Unknown,y.playPositionMilliseconds,Ct(null==h?void 0:h.isoString),y.state===Je.sY.Completed),v=null===(t=i.podcast)||void 0===t?void 0:t.uri,x=function(e){var t=(0,u.EC)(e),n=(0,u.HB)((null==t?void 0:t.id)||"");return"/show/".concat(n)}(v),P=(0,a.useCallback)((function(){g.logInteraction(l.podcastLinkFactory().hitUiNavigate({destination:x}))}),[g,x,l]);return(0,j.jsxs)(dt.gF,{backgroundColor:o,children:[(0,j.jsx)(pt.W,{children:(0,j.jsx)(mt.i,{text:i.name,dragUri:c,dragLabel:i.name})}),(0,j.jsx)("div",{className:I,children:(0,j.jsx)(ft._,{menu:(0,j.jsx)(it.k,{uri:i.uri,sharingInfo:i.sharingInfo,showUri:v,contextUri:i.uri,isPlayed:r,onMarkAsPlayed:s}),children:(0,j.jsx)(dt.Oe,{loading:"eager",name:i.name,images:i.coverArt,placeholderType:"episode",shape:dt.Kc.ROUNDED_CORNERS})})}),(0,j.jsxs)(dt.sP,{children:[(0,j.jsx)(W.D,{variant:"mestoBold",children:b}),(0,j.jsx)(ft._,{menu:(0,j.jsx)(it.k,{uri:c,sharingInfo:m,showUri:v,contextUri:c,isPlayed:r,onMarkAsPlayed:s}),children:(0,j.jsx)(dt.xd,{dragUri:c,dragLabel:p,children:(0,j.jsx)("span",{"data-testid":"episodeTitle",children:p})})}),(0,j.jsx)(ft._,{menu:(0,j.jsx)(it.k,{uri:i.uri,sharingInfo:i.sharingInfo,showUri:v,contextUri:i.uri,isPlayed:r,onMarkAsPlayed:s}),children:(0,j.jsx)(W.D,{variant:"canon",children:(0,j.jsx)(yt.default,{to:x,onClick:P,children:(0,j.jsx)("span",{"data-testid":"showTitle",children:null===(n=i.podcast)||void 0===n?void 0:n.name})})})})]})]})},bt=n(76956),vt=n(78960),xt=n(59344);function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Pt=function(e){var t,n,s,c,d=e.episode,y=d.uri,f=d.episodeType,h=d.description,g=d.htmlDescription,b=d.podcastSubscription,v=d.segmentsCount,x=d.podcast,P=d.contentInformation,k=d.playedState,C=d.coverArt,O=(0,K.fU)(l.J,{data:{uri:y}}),w=O.spec,D=O.logger,S=(0,bt.k)(),E=(0,a.useMemo)((function(){return w.headerFactory()}),[w]),I=(0,a.useMemo)((function(){return w.actionBarFactory()}),[w]),U=(0,a.useState)(k.state===Je.sY.Completed),N=(0,r.Z)(U,2),R=N[0],L=N[1],B=(0,He.g)(),M=(0,Ae.o)(),F=(0,o.W6)(V.Cz),A=void 0!==v&&v>0,Z=(0,o.W6)(V.WE,{loadingValue:!1}),z=(0,Re.g)(),H=(0,ce.n)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({uri:y},S?{}:{pages:[{items:[{type:$e.p.EPISODE,uri:y,uid:null,provider:null}]}]}),{featureIdentifier:"episode"}),W=H.triggerPlay,_=H.togglePlay,q=H.isPlaying,J=H.isActive,$=(0,We.$o)(y).isActive,G=C[0].url,Q=(0,ze.Zj)(G||null),Y=(0,_e.Y)((function(e){var t;return null!==(t=null==e?void 0:e.isPaused)&&void 0!==t?t:void 0})),X=(0,Be.E)(),ee=b.isPaywalled&&!b.isUserSubscribed,te=$||J,ne=d?{name:d.name,uri:d.uri,audio:{items:d.audio.items.map((function(e){return{url:e.url}}))}}:null,ie=x?{name:x.name,uri:x.uri,trailer:x.trailer,showTypes:x.showTypes}:null,re=(0,Ze.s)(ne,ie),ae=(0,a.useCallback)((function(e,t,n,i){var r=function(){Y?(null==i||i("resume"),B.resume()):(null==i||i("pause"),B.pause())};if(!ee){var a="play";if(!q||0!==e&&t||(a="pause"),M({intent:a,targetUri:y,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),f===Je.Wf.Episode&&X)m.y.set((function(){return{triggerId:n||Me,triggerAction:null}}));else if(J&&!t)z?r():_({loggingParams:null==i?void 0:i()});else if($&&!t)r();else{var s=null==i?void 0:i("play");z?re({seekTo:e,loggingParams:s}):W({seekTo:e,loggingParams:s})}}}),[ee,q,M,y,f,X,$,J,z,Y,B,_,re,W]),se=(0,a.useCallback)((function(e){ae(e,!1,void 0,(function(e){var t,n=w.actionBarFactory().playButtonFactory();return t="pause"===e||q?n.hitPause({itemToBePaused:y}):"resume"===e||te?n.hitResume({itemToBeResumed:y}):n.hitPlay({itemToBePlayed:y}),D.logInteraction(t)}))}),[ae,te,q,D,w,y]),oe=(0,a.useCallback)((function(e){ae(e,!0,void 0,(function(){return D.logInteraction(w.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:y}))}))}),[ae,D,w,y]),le=(0,a.useCallback)((function(e,t){ae(e,!0,t)}),[ae]),ue=(0,a.useCallback)((function(){M({intent:"expand-description",type:"click"})}),[M]);(0,a.useEffect)((function(){if(d&&!te){var e=new URLSearchParams(location.search);if(e.has("t")){var t=e.get("t")||"0",n=1e3*parseInt(t,10);n<=d.duration.milliseconds&&ae(n,!0)}}}),[d,te]);var de=!!h||F&&!!g,pe=null===(t=d.podcast)||void 0===t?void 0:t.uri,me=null===(n=(0,u.EC)(pe))||void 0===n?void 0:n.toURLPath(!0);return(0,j.jsxs)("section",{"data-testid":"episode",className:T,children:[(0,j.jsx)(p.$,{children:(0,Ve.mK)({episodeOrChapterName:d.name,showOrAudiobookName:null!==(s=null===(c=d.podcast)||void 0===c?void 0:c.name)&&void 0!==s?s:"",type:"Podcast"})}),(0,j.jsx)(gt,{episode:d,isFullyPlayed:R,setIsFullyPlayed:L,backgroundColor:Q,spec:E}),(0,j.jsx)(ut,{episode:d,onPlayEpisode:se,isPlaying:q,isActive:te,isFullyPlayed:R,setIsFullyPlayed:L,backgroundColor:Q,isLocked:ee,spec:I}),(0,j.jsx)("div",{className:"contentSpacing",children:(0,j.jsx)(Ue,{transcriptEnabled:Z,transcript:d.transcript,hasDescription:de,contentInformation:P,onDescriptionTimestampClick:oe,onTranscriptTimestampClick:le,onExpanded:ue,description:d.description,areHTMLDescriptionsEnabled:F,htmlDescription:d.htmlDescription,playability:d.playability,hasMusicAndTalkSegements:A,segmentCount:v,uri:d.uri,showUrl:me,spec:w})})]})};const kt=a.memo((function(){var e,t=(0,s.UO)().episodeId,n=void 0===t?"":t,i=(0,u.YD)(n).toURI(),r=(0,Ke.I)(i);return null!=r&&r.isError||null==r||!r.episodeOrChapter?(0,j.jsx)(y.h,{hasError:(null==r?void 0:r.isError)||!1,errorMessage:d.ag.get("error.not_found.title.podcast")}):(0,qe.Ey)(r.episodeOrChapter)?(0,j.jsx)(vt.InstrumentedRedirect,{to:(0,u.EC)(null===(e=r.episodeOrChapter.book)||void 0===e?void 0:e.uri).toURLPath(!0)}):(0,j.jsx)(a.Suspense,{fallback:null,children:(0,j.jsx)(xt.C,{pageId:c.Wg.PODCAST_EPISODE,uri:i,children:(0,j.jsx)(Pt,{episode:r.episodeOrChapter})})})}));function Ct(e){return(null==e?void 0:e.replace(/T.*/,""))||""}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map