"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7704],{50968:(e,t,n)=>{n.r(t),n.d(t,{SKELETON_CARDS_COUNT:()=>Lt,SKELETON_SHELVES_COUNT:()=>Mt,SKELETON_SHORTCUTS_COUNT:()=>It,default:()=>At});var r=n(83014),o=(n(162),n(83001),n(22369),n(71756),n(59496)),i=n(84875),a=n.n(i),s=n(38674),c=n(73756),l=n(17249),u=n(60817),d=n(39130),m=(n(82088),n(45389)),f=n(96268),h=(n(30246),n(62780),n(69109),n(95675),n(61235),n(7845),n(29543),n(70969),n(66715),n(30479),n(75341),n(30406)),p=n(69912),v=n(78302),g=n(83474),j=n(82015),x=(n(40265),n(43711)),y=n(248),b=n(52008),O=n(71440),S=n(59272),C=n(87360),k=n(54691),P=n(30214),N=n(60022),w=n(48850),E=n(71163),_=n(68975),T=n(40787);const D="view-homeShortcutsGrid-shortcuts",I="view-homeShortcutsGrid-grid",M="view-homeShortcutsGrid-shortcutLink",L="view-homeShortcutsGrid-shortcut",B="view-homeShortcutsGrid-draggable",U="view-homeShortcutsGrid-imageContainer",A="view-homeShortcutsGrid-imageWrapper",H="view-homeShortcutsGrid-image",R="view-homeShortcutsGrid-main",Z="view-homeShortcutsGrid-nameWrapper",F="view-homeShortcutsGrid-name",W="EzRmGRncgnv1zFgF4dqE",J="bPmmKmSPLKMhtJSaUJRX",q="vpQWUBWS_lXRLZMRJT7w",z="GSv7K805J9Jw7LB9tn2A",Y="view-homeShortcutsGrid-PlayButtonContainer",G="s9c9x_mJq197U2hBzGtV";var K=n(4637),X=(0,o.memo)((function(e){var t,n,r,o=e.item,i=(0,E._)(o.uri),a=null!==(t=o.duration_ms)&&void 0!==t?t:0,s=(0,T.$o)(o.uri),c=s.isPlaying,l=s.isActive,u=(0,_.z)(1e4,(function(e){var t;return(null===(t=e.item)||void 0===t?void 0:t.uri)===o.uri})),m=(0,d.Z)(u,1)[0],f=null!==(n=null===(r=o.resume_point)||void 0===r?void 0:r.resume_position_ms)&&void 0!==n?n:0,h=c||l?m:f,p=Math.round(100/(a/h)),v=i===w.Om.YES,g=a&&h>0;return v||g?(0,K.jsxs)("div",{className:q,children:[v?(0,K.jsx)(P.E,{iconSize:16,semanticColor:"textSubdued"}):null,g?(0,K.jsx)(N.k,{className:z,value:p,semanticColor:"essentialBase"}):null]}):null})),V=n(41177),Q=n(10506),$=n(26611),ee=n(76490),te=n(56203),ne=n(1003),re=n(20188),oe=n(93381),ie=n(75897),ae=n(12033),se=(0,o.memo)((function(e){var t=e.images,n=void 0===t?[]:t,r=e.fallbackIcon,o=void 0===r?x.U:r,i=(0,ae.X)(n);return(0,K.jsx)("div",{className:U,children:(0,K.jsx)("div",{className:A,children:(0,K.jsx)(ie.E,{className:H,src:null==i?void 0:i.url,loading:"lazy",testid:"shortcut-image",children:(0,K.jsx)(o,{"aria-hidden":!0})})})})})),ce=n(96692),le=n(98335),ue=n(90775),de=n(88843),me=o.memo((function(e){var t,n,r=e.index,i=e.item,s=e.fallbackIcon,c=e.showPlayButton,u=e.extraContent,d=e.playInsteadOfNavigating,f=void 0!==d&&d,h=e.onContextMenu,p=void 0===h?function(){}:h,v=e.onTouchStart,g=void 0===v?function(){}:v,x=e.onTouchEnd,y=void 0===x?function(){}:x,b=(0,V.s0)(),O=(0,ue.o)(),C=(0,j.WQ)(),k=C.setColorFromUri,P=C.resetColor,N=C.clearColor,w=(0,te.G3)(i.uri,i.release_date,null===(t=i.resume_point)||void 0===t?void 0:t.resume_position_ms,null===(n=i.resume_point)||void 0===n?void 0:n.fully_played),E=(0,re.fU)($.createDesktopShortcutsPlayNavCardEventFactory,{data:{position:r,uri:i.uri}}),_=E.spec,T=E.logger,D=(0,ne.n)({uri:i.uri},{featureIdentifier:"home",referrerIdentifier:"home"}),I=D.isPlaying,U=D.isActive,A=D.togglePlay,H=(0,S.EC)(i.uri),q=l.ag.getUrlLocale(),z=(0,le.k)({type:"link",uri:i.uri}),X=(0,o.useCallback)((function(){O({targetUri:i.uri,intent:I?"pause":"play",type:"click"});var e,t=_.playButtonFactory();e=I?t.hitPause({itemToBePaused:i.uri}):U?t.hitResume({itemToBeResumed:i.uri}):t.hitPlay({itemToBePlayed:i.uri});var n=T.logInteraction(e);A({loggingParams:n})}),[U,I,i.uri,T,O,_,A]),ie=(0,o.useCallback)((function(){if(f)X();else{O({targetUri:i.uri,intent:"navigate",type:"click"});var e,t=_.hitUiNavigate({destination:i.uri});T.logInteraction(t),H&&(e=H.toURLPath(!0));var n=z?(0,oe.is)(e||"",q):e;n&&b(n)}}),[i.uri,T,b,O,_,H,z,q,f,X]),ae=(0,o.useCallback)((function(){k(i.uri)}),[i.uri,k]);(0,o.useEffect)((function(){return function(){N()}}),[N]);var me=(0,re.Wi)(_),fe=(0,ce.O)([i.uri],i.name);return(0,K.jsx)("div",{ref:me,className:L,onContextMenu:p,onTouchStart:g,onTouchEnd:y,onMouseEnter:ae,onMouseLeave:P,children:(0,K.jsxs)("div",{className:B,onDragStart:fe,children:[(0,K.jsx)(se,{images:i.images,fallbackIcon:s}),(0,K.jsxs)("div",{className:R,children:[(0,K.jsxs)("div",{className:Z,children:[(0,K.jsxs)("div",{className:F,children:[w&&(0,K.jsx)(te.Rd,{className:J}),(0,K.jsx)(de.Link,{to:i.uri,onClick:ie,title:i.name,children:(0,K.jsx)(Q.D,{as:"p",variant:"balladBold",className:W,children:i.name})})]}),u||null]}),c&&(0,K.jsx)("div",{className:a()(Y,(0,m.Z)({},G,I)),children:(0,K.jsx)(ee.f,{isPlaying:I,onClick:X})})]}),(0,K.jsx)("div",{onClick:ie,className:M})]})})})),fe=n(76561),he=n(60221),pe=n(22355),ve=n(55411),ge=n(32563);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=o.memo((function(e){return(0,S.zO)(e.item.uri)?(0,K.jsx)(me,xe(xe({},e),{},{fallbackIcon:x.U})):(0,C.MW)(e.item.uri)?(0,K.jsx)(k._,{menu:(0,K.jsx)(C.XL,{}),children:(0,K.jsx)(me,xe(xe({},e),{},{fallbackIcon:x.U,playInsteadOfNavigating:!0}))}):(0,K.jsx)(k._,{menu:(0,K.jsx)(ve.X,{uri:e.item.uri}),children:(0,K.jsx)(me,xe(xe({},e),{},{fallbackIcon:x.U}))})})),be=o.memo((function(e){return(0,K.jsx)(k._,{menu:(0,K.jsx)(fe.Y,{uri:e.item.uri}),children:(0,K.jsx)(me,xe(xe({},e),{},{fallbackIcon:y.c}))})})),Oe=o.memo((function(e){return(0,K.jsx)(k._,{menu:(0,K.jsx)(he.m,{uri:e.item.uri}),children:(0,K.jsx)(me,xe(xe({},e),{},{fallbackIcon:b.a}))})})),Se=o.memo((function(e){return(0,K.jsx)(k._,{menu:(0,K.jsx)(ge.M,{uri:e.item.uri}),children:(0,K.jsx)(me,xe(xe({},e),{},{fallbackIcon:O.J,showPlayButton:!1}))})})),Ce=o.memo((function(e){return e.item.podcast?(0,K.jsx)(Se,{index:e.index,shouldSetBackgroundColor:e.shouldSetBackgroundColor,item:e.item.podcast,showPlayButton:e.showPlayButton}):(0,K.jsx)(k._,{menu:(0,K.jsx)(pe.k,{uri:e.item.uri}),children:(0,K.jsx)(me,xe(xe({},e),{},{fallbackIcon:O.J,extraContent:(0,K.jsx)(X,xe({},e))}))})}));var ke=n(23929),Pe=n(20808);const Ne="J6UEDIqMSJhYlwGoeUZB",we="ZjFf4lVC48DSryAjP9qB";function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te=o.memo((function(e){var t=(0,Pe.x)(),n=_e(_e({},e.item),t);return(0,K.jsx)(me,_e(_e({},e),{},{item:n,fallbackIcon:function(){return(0,K.jsx)("div",{className:Ne,children:(0,K.jsx)(ke.P,{iconSize:32,className:we})})}}))})),De=n(76956),Ie=n(64038);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=24,Ue=270,Ae=200,He=600,Re=3*Ue+2*Be,Ze=80,Fe=64,We=16,Je=12;function qe(e){if(null===e)return{cssProperties:{"--min-column-width":"".concat(Ue,"px"),"--item-height":"".concat(Ze,"px"),"--column-gap":"".concat(Be,"px"),"--row-gap":"".concat(We,"px")},showPlayButton:!0};var t=e.offsetWidth,n=t<He?Ae:Ue,r=Math.min(Math.floor((t+Be)/(n+Be)),3),o=t>=Re?Ze:Fe,i=o===Fe?Je:We,a=(t-(r-1)*Be)/r>=Ue;return{cssProperties:{"--min-column-width":"".concat(n,"px"),"--item-height":"".concat(o,"px"),"--column-gap":"".concat(Be,"px"),"--row-gap":"".concat(i,"px")},showPlayButton:a}}function ze(){var e=(0,o.useRef)(null),t=(0,o.useState)(qe(null)),n=(0,d.Z)(t,2),r=n[0],i=n[1],a=(0,o.useCallback)((function(){null!==e.current&&i(qe(e.current))}),[]),s=(0,o.useCallback)((function(t){e.current=t,a()}),[a]);return(0,p.a)((function(){return a()})),[r,s]}var Ye=function(e){if(null!==e&&"object"===(0,f.Z)(e)){var t=e,n=t.type,r=t.name;return n===g.p.YOUR_EPISODES&&"string"==typeof r}return!1},Ge=o.memo((function(e){var t,n,r=e.title,i=e.tagline,a=e.items,s=(0,j.WQ)().fetchMultipleColors,c=!(0,De.k)(),u=null!=r?r:(t=(new Date).getHours(),n=l.ag.get("home.evening"),t>=5&&t<12?n=l.ag.get("home.morning"):t>=12&&t<18&&(n=l.ag.get("home.afternoon")),n),m=ze(),f=(0,d.Z)(m,2),h=f[0],p=f[1];return(0,o.useEffect)((function(){var e=(null==a?void 0:a.map(j.lh))||[];s(e)}),[a,s]),c||null==a||!a.length?null:(0,K.jsxs)("section",{className:D,"aria-label":u,ref:p,children:[(0,K.jsx)(Ie.r,{title:u,titleVariant:"alto",tagline:i}),(0,K.jsx)("div",{className:I,style:h.cssProperties,children:a.filter((function(e,t){return Ye(e)||!e.error})).filter((function(e,t){return t<6})).map((function(e,t){if(Ye(e))return(0,K.jsx)(Te,{index:t,item:e,showPlayButton:h.showPlayButton,shouldSetBackgroundColor:0===t},"".concat(t,"-").concat(e.uri));var n=function(e){var t=((0,S.EC)(e)||{}).type;switch(t){case S.JM.ARTIST:return Oe;case S.JM.ALBUM:case S.JM.COLLECTION_ALBUM:return be;case S.JM.PLAYLIST:case S.JM.PLAYLIST_V2:return ye;case S.JM.SHOW:return Se;case S.JM.EPISODE:return Ce;case S.JM.COLLECTION:return ye;default:return console.warn("Unable to resolve entity shortcut from ".concat(e,' of type "').concat(t||"unknown",'"')),Se}}(e.uri);return(0,K.jsx)(n,{index:t,item:e,showPlayButton:h.showPlayButton,shouldSetBackgroundColor:0===t},"".concat(t,"-").concat(e.uri))}))})]})})),Ke=function(e){return(0,K.jsx)(h.L,{onError:function(e){(0,v.vK)(e,"HomeShortcutsGrid")},children:(0,K.jsx)(Ge,Le({},e))})},Xe=n(96454),Ve=n(62200);const Qe="zUf7jtv9GPOKC1jYO5TO",$e="T8QLel3PoQTgJUpGYj7Q";var et=(0,o.memo)((function(e){var t=e.isLoading,n=(0,Xe.h)("shimmer");return(0,K.jsx)("div",{className:U,children:(0,K.jsx)("div",{ref:n,className:a()(A,(0,m.Z)({},$e,t))})})})),tt=(0,o.memo)((function(e){var t=e.isLoading;return(0,K.jsx)("div",{className:a()(L,Qe),"data-testid":"skeleton-shortcut",children:(0,K.jsxs)("div",{className:B,children:[(0,K.jsx)(et,{isLoading:t}),(0,K.jsx)("div",{className:R,children:(0,K.jsx)(Ve.C,{as:"p",variant:"balladBold",className:W,isLoading:t})})]})})}));const nt="v7dc5ekmeBiAYnLzV8oT";var rt=(0,o.memo)((function(e){var t=e.shortcutCount,n=ze(),o=(0,d.Z)(n,2),i=o[0],a=o[1];return(0,K.jsxs)("section",{className:D,ref:a,children:[(0,K.jsx)(Ve.C,{as:"h2",variant:"alto",className:nt,charCount:25,isLoading:!0}),(0,K.jsx)("div",{className:I,style:i.cssProperties,children:(0,r.Z)(new Array(t).keys()).slice(0,6).map((function(e,t){return(0,K.jsx)(tt,{isLoading:!0},t)}))})]})})),ot=n(68833),it=n(80487),at=n(85941),st=n(97370),ct=n(8632),lt=n(40365),ut=n(99529),dt=n(54325),mt=n(75030),ft=(n(69724),n(55590)),ht=(n(72304),n(33582)),pt=n(3594),vt=n(10785),gt=n(84689);var jt=function(e){var t,n,r=e.spec,i=e.section,a=e.index,c=(0,s.W6)(vt.ty,{loadingValue:!1})?ht.N:pt.q;return(0,o.useMemo)((function(){return i.sectionItems.items.some((function(e){return(0,gt.d)(e.content)}))}),[i.sectionItems])?(0,K.jsx)(re.Nh,{spec:r.shelvesFactory(),children:(0,K.jsx)(c,{total:i.sectionItems.totalCount,seeAllUri:i.uri,pageId:i.uri,title:null!==(t=null===(n=i.data.title)||void 0===n?void 0:n.text)&&void 0!==t?t:"",index:a,id:i.uri,children:i.sectionItems.items.map(gt.x).filter((function(e){return!!e}))})}):null},xt=n(2409),yt=function(e){var t,n,r=e.spec,o=e.section,i=e.index;return(0,K.jsx)(re.Nh,{spec:r.shelvesFactory(),children:(0,K.jsx)(xt.default,{title:null!==(t=null===(n=o.data.title)||void 0===n?void 0:n.text)&&void 0!==t?t:void 0,showAll:!1,index:i})})},bt=n(79498),Ot=function(e){var t=e.spec,n=e.greeting,r=e.section;return(0,K.jsx)(re.Nh,{spec:t.shortcutsFactory(),children:(0,K.jsx)(Ke,{items:r.sectionItems.items.map(bt.lh),title:null!=n?n:void 0})})},St=n(80977),Ct=function(e){var t,n=e.spec,r=e.greeting,o=e.section,i=e.index,a=(0,C._n)();switch(null===(t=o.data)||void 0===t?void 0:t.__typename){case"HomeGenericSectionData":return(0,K.jsx)(jt,{spec:n,section:(0,St.f)(o,o.data),index:i});case"HomeShortsSectionData":return(0,K.jsx)(Ot,{spec:n,greeting:r,section:(0,St.f)(o,o.data)});case"HomeRecentlyPlayedSectionData":return(0,K.jsx)(yt,{spec:n,section:(0,St.f)(o,o.data),index:i});case"HomeFeedBaselineSectionData":case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":case"HomeOnboardingSectionDataV2":return null;case"HomeYourDJSectionData":if(!a)return null;var s=(0,St.f)(o,o.data),c=s.data,l=s.sectionItems.items[0];if("PlaylistResponseWrapper"===l.content.__typename&&"Playlist"===l.content.data.__typename){var u,d,m,f=l.content.data;return(0,K.jsx)(C.KE,{uri:C.rv,shelfTitle:null!==(u=null===(d=c.title)||void 0===d?void 0:d.text)&&void 0!==u?u:"",title:f.name,description:null!==(m=f.description)&&void 0!==m?m:""})}return null;case"HomeFeatureActivationSectionData":case null:case void 0:return null;default:return(0,ft._)(o.data),null}},kt=function(e){var t=e.spec,n=e.greeting,r=e.container,i=(0,re.fU)(dt.createDesktopHomeFeatureActivationShelfEventFactory,{}),a=i.spec,s=i.logger;return(0,o.useEffect)((function(){(0,mt.wW)()&&s.logImpression(a.impressionElementFactory().impression())}),[a,s]),(0,K.jsx)(K.Fragment,{children:r.sections.items.map((function(e,r){return(0,K.jsx)(Ct,{spec:t,greeting:n,section:e,index:r},"".concat(r,"-").concat(e.uri))}))})},Pt=n(35051),Nt=n(65184),wt=(0,o.memo)((function(e){var t=e.cardCount;return(0,K.jsx)(Nt.X,{isLoading:!0,children:(0,r.Z)(new Array(t).keys()).map((function(e,t){return(0,K.jsx)(Pt.A,{isLoading:!0},t)}))})})),Et=n(30151),_t=n(20522),Tt=function(){return(0,s.W6)(vt.Jw)===vt.pF.ONHOME?(0,K.jsx)(_t.w,{children:(0,K.jsx)(Et.M,{onSearch:!1})}):null},Dt=n(33648),It=6,Mt=6,Lt=6,Bt=(0,o.memo)((function(e){var t=e.shortcutCount,n=e.shelfCount,o=e.cardCount;return(0,K.jsx)("section",{"data-testid":"home-page",children:(0,K.jsx)("div",{className:Dt.Z.home,children:(0,K.jsxs)("div",{className:a()(Dt.Z.content,"contentSpacing"),children:[(0,K.jsx)(rt,{shortcutCount:t}),(0,r.Z)(new Array(n).keys()).map((function(e,t){return(0,K.jsx)(wt,{cardCount:o},t)}))]})})})})),Ut=function(e){var t,n,r=e.spec;(0,it.z)("home");var o=(0,lt.b3)({timeZone:(0,ut.L7)()},{cacheTime:ut.us,staleTime:ut.fS}),i=o.data,s=o.error;if(o.loading)return(0,K.jsx)(Bt,{shortcutCount:It,shelfCount:Mt,cardCount:Lt});if(null!==s)return(0,K.jsx)(ot.h,{hasError:!0,errorMessage:l.ag.get("error.generic")});var c=null==i?void 0:i.home;return"HomeResponsePayload"!==(null==c?void 0:c.__typename)||0===c.sectionContainer.sections.totalCount||0===c.sectionContainer.sections.items.length?(0,K.jsx)(ot.h,{hasError:!0,errorMessage:l.ag.get("error.generic")}):(0,K.jsx)("section",{"data-testid":"home-page",children:(0,K.jsx)("div",{className:Dt.Z.home,children:(0,K.jsx)("div",{className:a()(Dt.Z.content,"contentSpacing"),children:(0,K.jsx)(kt,{spec:r,greeting:null!==(t=null===(n=c.greeting)||void 0===n?void 0:n.text)&&void 0!==t?t:null,container:c.sectionContainer})})})})};const At=function(){var e=(0,re.fU)(c.createDesktopHomeEventFactory,{data:{identifier:"home",uri:"spotify:home"}}).spec,t=(0,s.W6)(vt.yg),n=(0,st.S)(t),r=(0,le.k)({type:"locale",uri:"home"});return(0,K.jsx)(re.Nh,{spec:e,children:(0,K.jsxs)(at.q,{config:n,children:[(0,K.jsx)(u.$,{children:(0,ct.nW)({i18n:l.ag,shouldLocalize:r})}),(0,K.jsx)(o.Suspense,{fallback:null,children:(0,K.jsx)(Tt,{})}),(0,K.jsx)(Ut,{spec:e})]})})}},48369:(e,t,n)=>{n.d(t,{Pd:()=>a,Wm:()=>i,i9:()=>o});var r=n(17249),o=["artists","albums","episodes","genres","playlists","podcasts","audiobooks","tracks","users","topResults","podcastAndEpisodes"],i={artists:function(){return r.ag.get("search.title.artists")},albums:function(){return r.ag.get("search.title.albums")},playlists:function(){return r.ag.get("search.title.playlists")},podcasts:function(){return r.ag.get("search.title.shows")},episodes:function(){return r.ag.get("search.title.episodes")},audiobooks:function(){return r.ag.get("search.title.audiobooks")},users:function(){return r.ag.get("search.title.profiles")},genres:function(){return r.ag.get("search.title.genres-and-moods")},tracks:function(){return r.ag.get("search.title.tracks")},podcastAndEpisodes:function(){return r.ag.get("search.title.podcast-and-shows")},topResults:function(){return r.ag.get("search.row.top-results")}},a=["artists","albums","playlists","podcasts","episodes","audiobooks","users","genres"]},30151:(e,t,n)=>{n.d(t,{M:()=>I});var r=n(45389),o=n(39130),i=(n(47921),n(59496)),a=n(84875),s=n.n(a),c=n(61740),l=n(41177),u=n(85830),d=n(38185),m=n(10506),f=n(71218),h=n(14268),p=n(38674),v=n(67609),g=n(59272),j=n(17249),x=n(4626),y=n(87164),b=n(20188),O=n(51238),S=n(10785),C=n(76804);const k="main-topBar-searchBar",P="x-searchInput-searchInputSearchIcon",N="x-searchInput-searchInputInput",w="x-searchInput-searchInputOnSearch",E="x-searchInput-searchInputClearButton",_="x-searchInput-searchInputIconContainer",T="x-searchInput=searchInputClearIcon";var D=n(4637),I=i.memo((function(e){var t=e.isSearchChipsEnabled,n=void 0!==t&&t,a=e.onSearch,I=void 0===a||a,M=e.onClick,L=(0,l.TH)(),B=(0,l.s0)(),U=(0,i.useRef)(null),A=(0,i.useRef)(null),H=(0,c.I0)(),R=(0,C.l)(),Z=(0,o.Z)(R,2),F=Z[0],W=F.category,J=F.query,q=Z[1],z=(0,i.useState)(J),Y=(0,o.Z)(z,2),G=Y[0],K=Y[1],X=!!W,V=i.useContext(y.VX).scrollNodeRef,Q=L.pathname.startsWith("/recent-searches"),$=X||Q,ee=(0,b.fU)(v.createDesktopSearchInputEventFactory,{}),te=ee.spec,ne=ee.logger,re=(0,p.W6)(S.yA),oe=(0,u.y1)((function(e,t,r){var o;r&&(o=ne.logInteraction(r).interactionId);n?q(e,W,!1,o):q(e,null,t,o),V.current&&(V.current.scrollTop=0)}),200),ie=(0,i.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(U.current!==document.activeElement&&(A.current=document.activeElement,U.current&&U.current.focus()),t)&&(null===(e=U.current)||void 0===e||e.select())}),[]);(0,x.eY)(x.O4.SHOW_SEARCH,(function(){return ie(!0)}));var ae=L.pathname.startsWith("/search");(0,i.useEffect)((function(){!$&&I&&ae&&(n&&J||ie())}),[J,ie,L.key,I,ae,$,n]),(0,i.useEffect)((function(){K(ae?J:"")}),[ae,J]);return(0,D.jsxs)("div",{className:s()(k,(0,r.Z)({},w,!I)),children:[(0,D.jsx)("form",{onSubmit:function(e){e.preventDefault(),G&&ne.logInteraction(te.keyStrokeSearch());var t,n,r=(0,g.EC)(G);if((null==r?void 0:r.type)===g.JM.AD){var o=(0,g.HB)(r.id);if(r.id===o)return;H((0,O.HI)(r.id))}else r?B(r.toURLPath(!0),{state:{preventMoveFocus:!0}}):G||B("/search",{state:{preventMoveFocus:!0}});G&&(null===(t=V.current)||void 0===t||null===(n=t.querySelector("h1, h2, h3, h4"))||void 0===n||n.focus())},role:"search",children:(0,D.jsx)(m.D,{variant:"mesto",as:"input",style:{color:d.Snx},ref:U,className:s()(N),value:G,maxLength:800,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onChange:function(e){var t=e.currentTarget.value,n=te.keyStrokeChangeSearchQuery({searchQueryString:t});K(t),oe(t,$,n)},onKeyDown:function(e){if("Escape"===e.key)if(G){var t=te.hitTextClear();K(""),oe("",$,t)}else U.current&&U.current.blur(),A.current instanceof HTMLElement&&A.current.focus()},placeholder:I?j.ag.get("search.search-for-label"):j.ag.get("navbar.search"),onFocus:function(){n||!$&&I||oe(G,$,null)},"data-testid":"search-input",onClick:M})}),(0,D.jsxs)("div",{className:_,children:[(0,D.jsx)("span",{className:P,children:(0,D.jsx)(f.j,{className:T,"aria-hidden":!0,iconSize:re?16:24})}),G&&(0,D.jsx)("button",{className:E,onClick:function(){U.current&&U.current.focus();var e=te.hitTextClear();K(""),oe("",$,e)},"aria-label":j.ag.get("search.a11y.clear-input"),children:(0,D.jsx)(h.k,{className:T,iconSize:re?16:24})})]})]})}))},76804:(e,t,n)=>{n.d(t,{l:()=>s});n(40274),n(22369),n(90511);var r=n(59496),o=n(41177),i=n(48369),a=function(e){return i.i9.find((function(t){return t===e}))};function s(){var e,t,n,i=(0,o.s0)(),s=(0,o.bS)("/search/:query"),c=(0,o.bS)("/search/:query/:category"),l=(0,r.useCallback)((function(e,t,n,r){var o=r?{interactionId:r,preventMoveFocus:!0}:{preventMoveFocus:!0},a=["/search"];e&&(a.push(encodeURIComponent(e)),t&&a.push(t));var s=a.join("/");i(s,n?{state:o}:{state:o,replace:!0})}),[i]);return[{query:function(e){try{return decodeURIComponent(e)}catch(t){return e}}(null!==(e=null!==(t=null==s?void 0:s.params.query)&&void 0!==t?t:null==c||null===(n=c.params)||void 0===n?void 0:n.query)&&void 0!==e?e:""),category:a(null==c?void 0:c.params.category)},l]}}}]);
//# sourceMappingURL=home-v2.js.map