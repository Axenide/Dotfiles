"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[9805],{49805:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ne});var r=t(45389),a=t(83014),i=t(39130),o=(t(30246),t(83001),t(22369),t(27639),t(71756),t(45880),t(16366),t(70785),t(69109),t(27535),t(95675),t(61235),t(62780),t(7845),t(29543),t(70969),t(66715),t(30479),t(75341),t(59496)),l=t(61740),s=t(41177),c=t(86604),u=t(53361),d=t(59272),m=t(17249),f=t(23621),v=t(84737),p=t(56075),h=t(55411),g=t(25229),x=t(60817),b=t(64371),y=t(19382),j=t(39547),I=t(96692),k=t(90775),R=t(17295),P=t(92722),w=t(1003),C=t(20188),O=t(44423),E=t(8850),U=t(10995),T=t.n(U),S=(t(162),t(82),t(87453)),A=t(15206),B=t(83656),D=t(11794),_=t(36841),F=t(76956),N=t(78142),Z=t(24511),M=t(12033),L=(t(90511),t(18113)),z=t(13833),K=t(70058),J=t(98235),X=t(97427),Q=t(69395),H=t(81386),G=t(14699),V=t(47982),W=t(56200),$=t(6336),Y=t(90902),q=t(71163),ee=t(1962),ne=t(85013),te=t(84875),re=t.n(te),ae=t(71062);const ie="TRDgmejiOzKjissuLFSx";var oe=t(4637),le=function(e){var n=e.onClick,t=void 0===n?function(){}:n,r=e.className,a=e.label,i=e.ariaLabel,o=void 0===i?a:i,l=e.Icon;return(0,oe.jsx)(ae.w,{label:a,children:(0,oe.jsx)("button",{type:"button","aria-label":o,className:re()(ie,r),onClick:t,children:(0,oe.jsx)(l,{iconSize:16})})})},se=t(19174),ce=o.memo((function(e){var n,t,r,a,i=e.uri,o=e.uid,l=e.name,s=e.durationMs,c=e.artists,u=e.album,f=e.isMOGEFRestricted,v=e.isExplicit,p=e.isPlayable,h=e.index,g=e.playIndex,x=void 0===g?null:g,b=e.imgUrl,y=e.contextUri,j=e.usePlayContextItem,I=e.isEnhanced,k=e.playContextPageIndex,R=e.isFirstRecommendation,P=e.add,w=e.remove,O=e.canBeRemovedFromPlaylist,E=e.addedBy,U=e.addedAt,T=(0,q._)(i),S=(0,se.k)(i,p),B=(0,ee.r)({downloadAvailability:T,isExplicit:v,isMOGEFRestricted:f,isEnhanced:I}),D=B.badges,_=B.hasBadges,F=h+1,Z=c.items.map((function(e){return{uri:e.uri,name:e.profile.name}})),te=(0,oe.jsx)(J.$,{uri:i,uid:o,albumUri:null==u?void 0:u.uri,artists:Z,contextUri:y,isRecommendation:I,removePlaylistItems:function(){return w([o])},removeRecommendation:function(){return w([o])},addRecommendation:function(){return P(o)},canBeRemovedFromPlaylist:O}),re=(null==Z?void 0:Z.map((function(e){return e.name})).join(m.ag.getSeparator()))||"",ae=j({uid:o,uri:i,index:null!=x?x:h,pageIndex:k}),ie=ae.isActive,ce=ae.isPlaying,ue=ae.triggerPlay,de=ae.togglePlay,me=(0,C.fU)(A.r,{data:{position:h,reason:"",uri:i}}),fe=me.spec,ve=me.logger,pe=(0,oe.jsx)(le,{onClick:function(){P(o),ve.logInteraction(fe.addRecommendationButtonFactory().hitAddToPlaylist({playlist:y,itemToBeAdded:i}))},label:m.ag.get("web-player.enhance.button_label_keep_in_playlist"),Icon:L.G});return(0,oe.jsx)(N.ZP,{value:"row",index:h,children:(0,oe.jsx)(V._P,{menu:te,children:(0,oe.jsxs)(G.c,{uri:i,contextUri:y,index:h,onTriggerPlay:function(e,n){ue({loggingParams:n})},isActive:ie,ariaRowIndex:h+1,isPlayable:S,ageRestricted:f,dragMetadata:{name:l,createdBy:re},spec:fe,removePlaylistItems:function(e){return w(e.map((function(e){return e.uid})))},children:[(0,oe.jsx)(Q.Dd,{ariaColIndex:0,children:(0,oe.jsx)(Q.Du,{uri:i,playAriaLabel:m.ag.get("tracklist.a11y.play",l,re),onClick:function(e,n){de({loggingParams:n})},isPlaying:ce,isActive:ie,spec:fe,children:(0,oe.jsx)(Q.km,{children:F})})}),(0,oe.jsxs)(Q.vZ,{ariaColIndex:1,children:[(0,oe.jsx)(Q.lD,{src:b}),(0,oe.jsxs)(Q.vm,{children:[(0,oe.jsx)(Q.Wh,{titleText:l,children:l}),_&&(0,oe.jsxs)(Q.g3,{children:[D.enhanced&&(0,oe.jsx)(z._,{iconSize:16,className:H.Z.enhanced,title:m.ag.get("web-player.enhance.button_text_enhanced"),"aria-label":m.ag.get("web-player.enhance.button_text_enhanced")}),D.download&&(0,oe.jsx)(W.G,{size:16}),D.explicit&&(0,oe.jsx)($.N,{}),D.paid&&(0,oe.jsx)(X.g,{}),D.nineteen&&(0,oe.jsx)(Y.X,{className:H.Z.nineteen,size:16})]}),(0,oe.jsx)(Q.K9,{children:(0,oe.jsx)(Q.T6,{artists:Z,spec:fe})})]})]}),(0,oe.jsx)(Q.UA,{ariaColIndex:2,children:u&&(0,oe.jsx)(Q.BM,{uri:u.uri,name:u.name,creatorUri:null==Z||null===(n=Z[0])||void 0===n?void 0:n.uri,spec:fe,children:u.name})}),(0,oe.jsx)(Q.UA,{ariaColIndex:3,children:(0,oe.jsx)(Q.p_,{name:(null==E?void 0:E.name)||(null==E?void 0:E.id)||"",uri:(null==E?void 0:E.id)&&(0,d.QK)(E.id).toURI()||"",imageUrl:(null==E||null===(t=E.avatar)||void 0===t?void 0:t.sources)&&(null===(r=(0,M.X)(null==E||null===(a=E.avatar)||void 0===a?void 0:a.sources,{desiredWidth:24,desiredLabel:"small"}))||void 0===r?void 0:r.url)||"",showAvatar:!0})}),(0,oe.jsx)(Q.UA,{ariaColIndex:4,children:U?(0,oe.jsx)(Q.Op,{dateAdded:U}):null}),(0,oe.jsxs)(Q.mU,{ariaColIndex:5,children:[I?(0,oe.jsxs)(oe.Fragment,{children:[R?(0,oe.jsx)(ne.T,{id:"enhance-add-recommendation",bodyText:m.ag.get("web-player.enhance.onboarding.add-recommendation-to-playlist"),shouldScrollIntoView:!0,children:pe}):pe,(0,oe.jsx)(le,{onClick:function(){w([o]),ve.logInteraction(fe.removeRecommendationButtonFactory().hitRemoveRecommendation({recommendedItemUri:i,contextUri:y}))},label:m.ag.get("web-player.enhance.button_label_remove_from_playlist"),Icon:K.H})]}):(0,oe.jsx)(Q.qS,{uri:i,type:"track",spec:fe}),(0,oe.jsx)(Q.A$,{duration:s}),(0,oe.jsx)(Q.Zv,{menu:te,label:m.ag.get("more.label.track",l,re),spec:fe})]})]})})})})),ue=[_.Q.INDEX,_.Q.TITLE,_.Q.ALBUM,_.Q.ADDED_BY,_.Q.ADDED_AT,_.Q.DURATION],de=o.memo((function(e){var n=e.ariaLabel,t=e.uri,r=e.name,a=e.usePlayContextItem,l=e.tracklistRef,s=e.fetchTracks,c=e.addRecommendation,u=e.removeItems,d=e.nrTracks,f=e.canBeRemovedFromPlaylist,v=(0,o.useRef)(!1),p=(0,F.k)();(0,o.useEffect)((function(){var e;v.current&&p&&(null==l||null===(e=l.current)||void 0===e||e.update());v.current=!0}),[p,l]);var h=50,g=(0,o.useRef)((function(){})),x=(0,o.useState)([]),b=(0,i.Z)(x,2),y=b[0],j=b[1],I=(0,C.fU)(S.createDesktopTrackListEventFactory,{data:{uri:t,identifier:"enhanced-tracklist"}}),k=I.logger,R=I.spec,P=I.UBIFragment,w=(0,o.useCallback)((function(){if(l&&l.current){var e=l.current.getVisibleTrackWindow(),n=e.firstIndex,t=e.lastIndex-n;return Math.max(0,n-Math.round((h-t)/2))}return 0}),[l]),O=(0,o.useCallback)((function(e){var n;g.current(),u({itemIds:e.map((function(e){return e.uid})),offset:w(),limit:h});var r,a=new Set(e.map((function(e){return e.uid}))),i=(null==l||null===(n=l.current)||void 0===n?void 0:n.getRows())||[],o=[];(i.forEach((function(e,n){if(e&&a.has(e.uid)){var t={index:n,item:e};e.isEnhanced&&o.push(t)}})),o.length)&&((r=1===o.length?(0,A.r)({data:{uri:o[0].item.uri,position:o[0].index,reason:""}}).removeRecommendationButtonFactory().hitRemoveRecommendation({contextUri:t,recommendedItemUri:o[0].item.uri}):R.removeItemsButtonFactory().hitRemoveRecommendations({contextUri:t,numberOfRecommendationsToRemove:o.length}))&&k.logInteraction(r))}),[u,w,k,l,t,R]),U=(0,o.useCallback)(function(){var e=(0,E.Z)(T().mark((function e(n,t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n,t);case 2:return r=e.sent,e.abrupt("return",{items:r,totalLength:d});case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[s,d]),_=(0,o.useCallback)((function(e,n){g.current=n,e.length>1?j(e):O(e)}),[O]),L=(0,o.useCallback)((function(e){c({itemIds:[e],offset:w(),limit:h})}),[c,w]),z=(0,o.useCallback)((function(e){u({itemIds:e,offset:w(),limit:h})}),[u,w]),K=(0,o.useCallback)((function(e,n){var r,i,o,l,s=(0,M.X)(null===(r=e.albumOfTrack)||void 0===r||null===(i=r.coverArt)||void 0===i?void 0:i.sources,{desiredSize:40,desiredLabel:"small"});return(0,oe.jsx)(ce,{index:n,playIndex:n,contextUri:t,uri:e.uri,uid:e.uid,isPlayable:e.playability.playable,durationMs:e.duration.totalMilliseconds,name:e.name,artists:e.artists,album:e.albumOfTrack,isExplicit:(null===(o=e.contentRating)||void 0===o?void 0:o.label)===Z.KS.Explicit,isMOGEFRestricted:(null===(l=e.contentRating)||void 0===l?void 0:l.label)===Z.KS.NineteenPlus,imgUrl:(null==s?void 0:s.url)||"",usePlayContextItem:a,isEnhanced:e.isEnhanced,playContextPageIndex:e.playContextPageIndex,isFirstRecommendation:e.isFirstRecommendationOfPage&&n<h,add:L,remove:z,canBeRemovedFromPlaylist:f,addedBy:e.addedBy,addedAt:e.addedAt},e.uid)}),[a,t,L,z,f]),J=(0,o.useCallback)((function(e){return e.uri}),[]),X=(0,o.useCallback)((function(e){return e.uid}),[]);return(0,oe.jsxs)(P,{spec:R,children:[(0,oe.jsx)(N.ZP,{value:"playlist-tracklist",children:(0,oe.jsx)(D.Pv,{testID:"playlist-tracklist",ariaLabel:n,hasHeaderRow:!0,columns:ue,onRemove:_,renderRow:K,resolveUri:J,resolveUid:X,nrTracks:d,fetchTracks:U,limit:h,outerRef:l},t)}),(0,oe.jsx)(B.h,{title:m.ag.get("playlist.remove_from_playlist",r),isOpen:y.length>0,tracks:y,onClose:function(e){e.stopPropagation(),j([])},onRemove:O})]})})),me=t(44463),fe=t(28146),ve=t(98148),pe=t(68058),he=t(63892),ge=t(32080),xe=t(14050);const be="z9JdxJgW3OxYysR2dkal";function ye(e){return"function"==typeof e}var je=function(e){var n=e.contextUri,t=e.title,r=e.message,a=e.children,l=(0,o.useRef)(null),s=(0,o.useState)(!1),c=(0,i.Z)(s,2),u=c[0],d=c[1],f=(0,o.useState)("topStart"),v=(0,i.Z)(f,2),p=v[0],h=v[1],g=(0,o.useCallback)((function(){var e;d(!1),null===(e=l.current)||void 0===e||e.focus()}),[]),x=(0,o.useCallback)((function(){d(!0)}),[]),b=(0,xe.U)(n).setIsEnhanced,y=(0,o.useRef)(null);return(0,o.useEffect)((function(){if(y.current){if(!y.current)return;var e=y.current.getBoundingClientRect(),n=e.top,t=e.bottom;n<16?h("bottomStart"):t>window.innerHeight-16&&h("topStart")}}),[u]),(0,oe.jsx)(me.x,{onShow:x,onHide:g,placement:p,withPortal:!0,overlay:u&&(0,oe.jsx)(ge.i,{children:(0,oe.jsx)("div",{className:"encore-dark-theme",ref:y,children:(0,oe.jsxs)(fe.J,{role:"alertdialog",popoverTitle:t,arrow:"topStart"===p?"bottomEnd":"topEnd",colorSet:"announcement",children:[r,(0,oe.jsxs)("div",{className:be,children:[(0,oe.jsx)(ve.o,{buttonSize:pe.z.sm,onClick:g,children:m.ag.get("web-player.enhance.missing-functionality-callout.dismiss")}),(0,oe.jsx)(he.D,{buttonSize:pe.z.sm,onClick:function(){g(),b(!1)},colorSet:"invertedLight",children:m.ag.get("web-player.enhance.missing-functionality-callout.turn-off-enhance")})]})]})})}),children:ye(a)?(0,oe.jsx)(oe.Fragment,{children:a(x)}):a})},Ie=t(23006),ke=t(24898),Re=t(96339),Pe=t(980),we=(t(37193),t(40265),t(43125),t(50103),t(96807),t(72649),t(37253)),Ce=t(20805),Oe=["pageItems"];function Ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ue(e,n,t,a){var i=a?{}:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ee(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e);return n.forEach((function(e,n){i[t+n]=e})),i}var Te=t(80274),Se=t(1074),Ae=t(83474);const Be="A4dupilHPIEDfhXDE0m0",De="JYAfUd8XXrVwcPbq9QaC";function _e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_e(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const Ne=o.memo((function(e){var n,t,r,U=e.metadata,S=e.capabilities,A=e.featureIdentifier,B=U.uri,D=U.name,_=U.images,F=U.totalLength,N=(0,i.Z)(_,1)[0],Z=(0,R.Z)((null==N?void 0:N.url)||null),M=(0,s.TH)(),L=(0,s.ur)(),z=(0,l.I0)(),K=(0,k.o)(),J=(0,o.useRef)(null),X=(0,d.nK)(B),Q=function(e){var n,t,r=(0,Ce._)(),a=(0,xe.U)(e),l=a.isEnhanced,s=a.iteration,c=a.setIsEnhanced,u=a.toggleIsEnhanced,d=(0,o.useState)(null),m=(0,i.Z)(d,2),f=m[0],v=m[1],p=(0,o.useRef)(Date.now()),h=(0,o.useCallback)((function(){return Date.now()-p.current>3e3}),[]),g=(0,o.useRef)({}),x=(0,o.useRef)(null),b=(0,o.useCallback)(function(){var e=(0,E.Z)(T().mark((function e(n,t,a,i,o,l,s){var c,u,d,m,f,h,b,y,j,I;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l&&(p.current=Date.now()),f=null===(c=x.current)||void 0===c?void 0:c.enhancedRevision,e.prev=2,e.next=5,s;case 5:h=e.sent,e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(2),409!==(null===e.t0||void 0===e.t0?void 0:e.t0.status)){e.next=14;break}return e.next=13,r.getPage(n,t,a,i,o);case 13:h=e.sent;case 14:if(b=null===(u=h)||void 0===u?void 0:u.enhancePage){e.next=17;break}return e.abrupt("return",[]);case 17:return y=b.pageItems,j=(0,Pe.Z)(b,Oe),e.next=20,r.decoratePageItems(y);case 20:if(I=e.sent,f===(null===(d=x.current)||void 0===d?void 0:d.enhancedRevision)){e.next=24;break}return e.abrupt("return",[]);case 24:return(null===(m=x.current)||void 0===m?void 0:m.enhancedRevision)!==j.enhancedRevision&&(l=!0),g.current=Ue(g.current,I,i,l),v(j),x.current=j,e.abrupt("return",I);case 30:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(n,t,r,a,i,o,l){return e.apply(this,arguments)}}(),[r]),y=(0,o.useCallback)(function(){var n=(0,E.Z)(T().mark((function n(t){var a,i,o,l,c;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.itemIds,i=t.offset,o=void 0===i?0:i,l=t.limit,c=void 0===l?1:l,x.current&&s){n.next=3;break}return n.abrupt("return");case 3:b(e,s,x.current.sessionId,o,c,!0,r.addRecommendation(e,x.current.sessionId,a,o,c));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[b,e,r,s]),j=(0,o.useCallback)(function(){var n=(0,E.Z)(T().mark((function n(t){var a,i,o,l,c,u,d,m,f;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.itemIds,i=t.offset,o=void 0===i?0:i,l=t.limit,c=void 0===l?1:l,x.current&&s){n.next=3;break}return n.abrupt("return");case 3:u=g.current,d=new Set(a),m=!1,n.t0=T().keys(u);case 7:if((n.t1=n.t0()).done){n.next=14;break}if(f=n.t1.value,!d.has(u[f].uid)||!u[f].isEnhanced){n.next=12;break}return m=!0,n.abrupt("break",14);case 12:n.next=7;break;case 14:b(e,s,x.current.sessionId,o,c,!0,r.removeItems(e,x.current.sessionId,a,o,c,m));case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[b,e,r,s]),I=(0,o.useMemo)((function(){return new we.tL}),[]),k=(0,o.useCallback)(function(){var n=(0,E.Z)(T().mark((function n(t,a){var i,o,l,c,u;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return",[]);case 2:if(c=Math.min(a,((null===(i=x.current)||void 0===i?void 0:i.numTotalItems)||1/0)-t),!(u=Array.from({length:c},(function(e,n){return g.current[n+t]}))).every((function(e){return!!e}))||0===c){n.next=7;break}return n.abrupt("return",u);case 7:return n.abrupt("return",b(e,s,null===(o=x.current)||void 0===o?void 0:o.sessionId,t,a,!1,I.create("".concat(e,":").concat(s,":").concat(null===(l=x.current)||void 0===l?void 0:l.sessionId,":").concat(t,":").concat(a),(function(){var n;return r.getPage(e,s,null===(n=x.current)||void 0===n?void 0:n.sessionId,t,a)}))));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[I,b,e,r,s]),R=(0,o.useMemo)((function(){return{uri:e,url:null==f?void 0:f.dspContextUri}}),[e,null==f?void 0:f.dspContextUri]),P=(0,o.useCallback)((function(){g.current={}}),[]),w=(0,o.useCallback)(function(){var n=(0,E.Z)(T().mark((function n(t){var a,i,o,l;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s){n.next=2;break}return n.abrupt("return",-1);case 2:return n.next=4,r.getPage(e,s,null===(a=x.current)||void 0===a?void 0:a.sessionId,0,r.MAX_PAGE_SIZE);case 4:return o=n.sent,l=o.enhancePage,n.abrupt("return",null!==(i=null==l?void 0:l.pageItems.findIndex((function(e){return e.itemId===t})))&&void 0!==i?i:-1);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[r,s,e]);return{isEnhanced:l,setIsEnhanced:c,toggleIsEnhanced:u,addRecommendation:y,removeItems:j,playContext:R,numTotalItems:isNaN(Number(null==f?void 0:f.numTotalItems))?void 0:Number(null==f?void 0:f.numTotalItems),numTotalRecs:isNaN(Number(null==f?void 0:f.numTotalRecs))?void 0:Number(null==f?void 0:f.numTotalRecs),fetchTracks:k,clearCache:P,enhancedInvalidationKey:"".concat(null!==(n=null==f?void 0:f.enhancedRevision)&&void 0!==n?n:"").concat(null!=s?s:""),shouldUnderlyingContextChangeRefreshView:h,UBIReason:f?"enhanced|".concat(null==f?void 0:f.sessionId,"#").concat(null==f||null===(t=f.logging)||void 0===t?void 0:t.correlationId):"enhanced|",fetchIndexOfItemId:w}}(B),H=Q.isEnhanced,G=Q.playContext,V=Q.numTotalItems,W=Q.numTotalRecs,$=Q.addRecommendation,Y=Q.removeItems,q=Q.fetchTracks,ee=Q.enhancedInvalidationKey,ne=Q.shouldUnderlyingContextChangeRefreshView,te=Q.UBIReason,re=Q.clearCache,ae=Q.fetchIndexOfItemId,ie=(null!=V?V:F)>0,le=(null==S?void 0:S.canFilter)&&F>0,se=(null==S?void 0:S.canSort)&&F>0;(0,o.useEffect)((function(){if(H&&"POP"!==L){var e=new URLSearchParams(M.search).get("uid");if(!e)return;ae(e).then((function(e){var n;-1!==e&&(null===(n=J.current)||void 0===n||n.scrollToIndex(e))}))}}),[ae,H,L,M.search]),(0,o.useEffect)((function(){var e;ee&&(null===(e=J.current)||void 0===e||e.update())}),[ee]),(0,o.useEffect)((function(){var e;ne()&&(re(),null===(e=J.current)||void 0===e||e.update())}),[F,re,ne]);var ce=(0,C.fU)(c.createDesktopEnhancedEventFactory,{data:{uri:B,identifier:"enhanced-session",reason:te}}),ue=ce.spec,me=ce.logger,fe=ce.UBIFragment,ve=(0,o.useMemo)((function(){return{header:ue.headerFactory()}}),[ue]),pe=(0,w.n)(G,{featureIdentifier:A}),he=pe.isPlaying,ge=pe.isActive,be=pe.togglePlay,ye=pe.usePlayContextItem,Ee=(0,o.useCallback)((function(){var e;be(),e=ge?he?ue.playButtonFactory().hitPause({itemToBePaused:B}):ue.playButtonFactory().hitResume({itemToBeResumed:B}):ue.playButtonFactory().hitPlay({itemToBePlayed:B}),me.logInteraction(e)}),[be,he,ge,me,ue,B]),_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,Te.J)(Se.n5.getUser,["spotify"]).data;return(0,o.useMemo)((function(){return null!=n&&n.body?{isOwner:!1,tracksAdded:e,user:{uri:n.body.uri,type:Ae.p.USER,username:n.body.id,displayName:n.body.display_name,images:n.body.images}}:null}),[n,e])}(W),Ne=null!==(n=null===(t=U.collaborators)||void 0===t||null===(r=t.items)||void 0===r?void 0:r.concat())&&void 0!==n?n:[];_e&&Ne.splice(Ie.ms-1,0,_e);var Ze={count:Ne.length,items:Ne},Me=(0,o.useCallback)((function(e,n){var t=[].concat((0,a.Z)(n[I.a[d.JM.ALBUM]]||[]),(0,a.Z)(n[I.a[d.JM.TRACK]]||[]));t.length>0&&(z((0,f.jV)(B,t)),K({targetUri:B,intent:"add",type:"drop"}))}),[z,K,B]);return(0,oe.jsx)(o.Suspense,{fallback:null,children:(0,oe.jsx)(Re.e,{pageId:u.Wg.ENHANCED_SESSION,children:(0,oe.jsxs)(fe,{spec:ue,children:[(0,oe.jsx)(x.$,{children:m.ag.get("playlist.page-title",D)}),(0,oe.jsx)(g.Z,{types:[I.a[d.JM.ALBUM],I.a[d.JM.TRACK]],onDrop:Me,children:(0,oe.jsxs)("section",{role:"presentation",className:Be,"data-testid":"enhanced-page",children:[(0,oe.jsxs)(fe,{spec:ve.header,children:[(0,oe.jsx)(j.s,{metadata:Fe(Fe({},U),{},{collaborators:Ze,duration:void 0,totalLength:null!=V?V:F}),isPlaying:he,togglePlay:Ee,backgroundColor:Z}),(0,oe.jsx)("div",{children:(0,oe.jsx)(v.o,{backgroundColor:Z,children:(0,oe.jsxs)(v.F,{children:[ie?(0,oe.jsx)(b.$,{onClick:Ee,isPlaying:he,size:"lg",uri:B}):null,(0,oe.jsx)(O.v,{uri:B}),X&&(0,oe.jsx)(P.y,{menu:(0,oe.jsx)(h.X,{uri:B,isEnhanced:H}),children:(0,oe.jsx)(p.z,{})}),(le||se)&&(0,oe.jsxs)("div",{className:De,children:[le&&(0,oe.jsx)(o.Suspense,{fallback:null,children:(0,oe.jsx)(je,{contextUri:B,title:m.ag.get("web-player.enhance.missing-functionality-callout.filtering-playlist-disabled-title"),message:m.ag.get("web-player.enhance.missing-functionality-callout.filtering-playlist-disabled-message"),children:function(e){return(0,oe.jsx)(ke.K,{placeholder:m.ag.get("playlist.search_in_playlist"),onActivate:function(){return e(),!1}})}})}),se&&(0,oe.jsx)(je,{contextUri:B,title:m.ag.get("web-player.enhance.missing-functionality-callout.sorting-playlist-disabled-title"),message:m.ag.get("web-player.enhance.missing-functionality-callout.sorting-playlist-disabled-message"),children:(0,oe.jsx)(y.l,{columns:[],disabled:!0})})]})]})})})]}),(0,oe.jsx)("div",{className:"contentSpacing",children:(0,oe.jsx)(o.Suspense,{fallback:null,children:(0,oe.jsx)(de,{ariaLabel:D,nrTracks:null!=V?V:Math.max(15,F),uri:B,name:D,usePlayContextItem:ye,tracklistRef:J,fetchTracks:q,addRecommendation:$,removeItems:Y,canBeRemovedFromPlaylist:X},B)})})]})})]})})})}))}}]);
//# sourceMappingURL=9805.js.map